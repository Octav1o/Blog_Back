{"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\src\\\\app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireWildcard(require(\"express\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _multer = _interopRequireDefault(require(\"multer\"));\nvar _user = _interopRequireDefault(require(\"./routes/user.routes\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\nconst app = (0, _express.default)();\nconst upload = (0, _multer.default)();\napp.use(upload.array());\napp.use(_express.default.json());\nconst PORT = process.env.PORT || 3000;\nconst publicRoutes = ['/api/user/login', '/api/user/registerUser'];\napp.use((0, _cors.default)({\n  origin: \"*\"\n}));\napp.use((req, res, next) => {\n  if (publicRoutes.includes(req.path)) {\n    return next();\n  }\n  ;\n});\napp.listen(PORT, () => console.log(`App listening on port ${PORT}`));\napp.use(_user.default);\nvar _default = exports.default = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9jb3JzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9tdWx0ZXIiLCJfdXNlciIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIldlYWtNYXAiLCJyIiwidCIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsImFwcCIsImV4cHJlc3MiLCJ1cGxvYWQiLCJtdWx0ZXIiLCJ1c2UiLCJhcnJheSIsImpzb24iLCJQT1JUIiwicHJvY2VzcyIsImVudiIsInB1YmxpY1JvdXRlcyIsImNvcnMiLCJvcmlnaW4iLCJyZXEiLCJyZXMiLCJuZXh0IiwiaW5jbHVkZXMiLCJwYXRoIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsInVzZXJSb3V0ZXMiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXHNyY1xcIiwic291cmNlcyI6WyJhcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MsIHtqc29ufSBmcm9tICdleHByZXNzJztcclxuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcclxuaW1wb3J0IG11bHRlciBmcm9tIFwibXVsdGVyXCI7XHJcbmltcG9ydCB1c2VyUm91dGVzIGZyb20gJy4vcm91dGVzL3VzZXIucm91dGVzJztcclxuXHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcclxuY29uc3QgdXBsb2FkID0gbXVsdGVyKCk7XHJcblxyXG5hcHAudXNlKHVwbG9hZC5hcnJheSgpKTtcclxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcblxyXG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwO1xyXG5cclxuY29uc3QgcHVibGljUm91dGVzID0gW1xyXG4gICAgJy9hcGkvdXNlci9sb2dpbicsXHJcbiAgICAnL2FwaS91c2VyL3JlZ2lzdGVyVXNlcicsXHJcbl07XHJcblxyXG5hcHAudXNlKGNvcnMoeyBvcmlnaW46IFwiKlwifSkpO1xyXG5cclxuYXBwLnVzZSgoIHJlcSwgcmVzLCBuZXh0ICkgPT4ge1xyXG4gICAgaWYocHVibGljUm91dGVzLmluY2x1ZGVzKHJlcS5wYXRoKSkge1xyXG4gICAgICAgIHJldHVybiBuZXh0KCk7XHJcbiAgICB9O1xyXG59KTtcclxuXHJcblxyXG5hcHAubGlzdGVuKFBPUlQsICgpID0+IGNvbnNvbGUubG9nKGBBcHAgbGlzdGVuaW5nIG9uIHBvcnQgJHtQT1JUfWApKTtcclxuYXBwLnVzZSh1c2VyUm91dGVzKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFwcDsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLE9BQUEsR0FBQUQsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFJLEtBQUEsR0FBQUYsc0JBQUEsQ0FBQUYsT0FBQTtBQUE4QyxTQUFBRSx1QkFBQUcsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUFBLFNBQUFHLHlCQUFBSCxDQUFBLDZCQUFBSSxPQUFBLG1CQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFELHdCQUFBLFlBQUFBLENBQUFILENBQUEsV0FBQUEsQ0FBQSxHQUFBTSxDQUFBLEdBQUFELENBQUEsS0FBQUwsQ0FBQTtBQUFBLFNBQUFOLHdCQUFBTSxDQUFBLEVBQUFLLENBQUEsU0FBQUEsQ0FBQSxJQUFBTCxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxTQUFBRCxDQUFBLGVBQUFBLENBQUEsdUJBQUFBLENBQUEseUJBQUFBLENBQUEsV0FBQUUsT0FBQSxFQUFBRixDQUFBLFFBQUFNLENBQUEsR0FBQUgsd0JBQUEsQ0FBQUUsQ0FBQSxPQUFBQyxDQUFBLElBQUFBLENBQUEsQ0FBQUMsR0FBQSxDQUFBUCxDQUFBLFVBQUFNLENBQUEsQ0FBQUUsR0FBQSxDQUFBUixDQUFBLE9BQUFTLENBQUEsS0FBQUMsU0FBQSxVQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsY0FBQSxJQUFBRCxNQUFBLENBQUFFLHdCQUFBLFdBQUFDLENBQUEsSUFBQWYsQ0FBQSxvQkFBQWUsQ0FBQSxPQUFBQyxjQUFBLENBQUFDLElBQUEsQ0FBQWpCLENBQUEsRUFBQWUsQ0FBQSxTQUFBRyxDQUFBLEdBQUFQLENBQUEsR0FBQUMsTUFBQSxDQUFBRSx3QkFBQSxDQUFBZCxDQUFBLEVBQUFlLENBQUEsVUFBQUcsQ0FBQSxLQUFBQSxDQUFBLENBQUFWLEdBQUEsSUFBQVUsQ0FBQSxDQUFBQyxHQUFBLElBQUFQLE1BQUEsQ0FBQUMsY0FBQSxDQUFBSixDQUFBLEVBQUFNLENBQUEsRUFBQUcsQ0FBQSxJQUFBVCxDQUFBLENBQUFNLENBQUEsSUFBQWYsQ0FBQSxDQUFBZSxDQUFBLFlBQUFOLENBQUEsQ0FBQVAsT0FBQSxHQUFBRixDQUFBLEVBQUFNLENBQUEsSUFBQUEsQ0FBQSxDQUFBYSxHQUFBLENBQUFuQixDQUFBLEVBQUFTLENBQUEsR0FBQUEsQ0FBQTtBQUU5QyxNQUFNVyxHQUFHLEdBQUcsSUFBQUMsZ0JBQU8sRUFBQyxDQUFDO0FBQ3JCLE1BQU1DLE1BQU0sR0FBRyxJQUFBQyxlQUFNLEVBQUMsQ0FBQztBQUV2QkgsR0FBRyxDQUFDSSxHQUFHLENBQUNGLE1BQU0sQ0FBQ0csS0FBSyxDQUFDLENBQUMsQ0FBQztBQUN2QkwsR0FBRyxDQUFDSSxHQUFHLENBQUNILGdCQUFPLENBQUNLLElBQUksQ0FBQyxDQUFDLENBQUM7QUFFdkIsTUFBTUMsSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsSUFBSSxJQUFJLElBQUk7QUFFckMsTUFBTUcsWUFBWSxHQUFHLENBQ2pCLGlCQUFpQixFQUNqQix3QkFBd0IsQ0FDM0I7QUFFRFYsR0FBRyxDQUFDSSxHQUFHLENBQUMsSUFBQU8sYUFBSSxFQUFDO0VBQUVDLE1BQU0sRUFBRTtBQUFHLENBQUMsQ0FBQyxDQUFDO0FBRTdCWixHQUFHLENBQUNJLEdBQUcsQ0FBQyxDQUFFUyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFNO0VBQzFCLElBQUdMLFlBQVksQ0FBQ00sUUFBUSxDQUFDSCxHQUFHLENBQUNJLElBQUksQ0FBQyxFQUFFO0lBQ2hDLE9BQU9GLElBQUksQ0FBQyxDQUFDO0VBQ2pCO0VBQUM7QUFDTCxDQUFDLENBQUM7QUFHRmYsR0FBRyxDQUFDa0IsTUFBTSxDQUFDWCxJQUFJLEVBQUUsTUFBTVksT0FBTyxDQUFDQyxHQUFHLENBQUMseUJBQXlCYixJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQ3BFUCxHQUFHLENBQUNJLEdBQUcsQ0FBQ2lCLGFBQVUsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBekMsT0FBQSxHQUVMa0IsR0FBRyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_express","_interopRequireWildcard","require","_cors","_interopRequireDefault","_multer","_user","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","app","express","upload","multer","use","array","json","PORT","process","env","publicRoutes","cors","origin","req","res","next","includes","path","listen","console","log","userRoutes","_default","exports"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\src\\","sources":["app.js"],"sourcesContent":["import express, {json} from 'express';\r\nimport cors from \"cors\";\r\nimport multer from \"multer\";\r\nimport userRoutes from './routes/user.routes';\r\n\r\nconst app = express();\r\nconst upload = multer();\r\n\r\napp.use(upload.array());\r\napp.use(express.json());\r\n\r\nconst PORT = process.env.PORT || 3000;\r\n\r\nconst publicRoutes = [\r\n    '/api/user/login',\r\n    '/api/user/registerUser',\r\n];\r\n\r\napp.use(cors({ origin: \"*\"}));\r\n\r\napp.use(( req, res, next ) => {\r\n    if(publicRoutes.includes(req.path)) {\r\n        return next();\r\n    };\r\n});\r\n\r\n\r\napp.listen(PORT, () => console.log(`App listening on port ${PORT}`));\r\napp.use(userRoutes);\r\n\r\nexport default app;"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,OAAA,GAAAD,sBAAA,CAAAF,OAAA;AACA,IAAAI,KAAA,GAAAF,sBAAA,CAAAF,OAAA;AAA8C,SAAAE,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAAA,SAAAG,yBAAAH,CAAA,6BAAAI,OAAA,mBAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAD,wBAAA,YAAAA,CAAAH,CAAA,WAAAA,CAAA,GAAAM,CAAA,GAAAD,CAAA,KAAAL,CAAA;AAAA,SAAAN,wBAAAM,CAAA,EAAAK,CAAA,SAAAA,CAAA,IAAAL,CAAA,IAAAA,CAAA,CAAAC,UAAA,SAAAD,CAAA,eAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,WAAAE,OAAA,EAAAF,CAAA,QAAAM,CAAA,GAAAH,wBAAA,CAAAE,CAAA,OAAAC,CAAA,IAAAA,CAAA,CAAAC,GAAA,CAAAP,CAAA,UAAAM,CAAA,CAAAE,GAAA,CAAAR,CAAA,OAAAS,CAAA,KAAAC,SAAA,UAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,CAAA,IAAAf,CAAA,oBAAAe,CAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAjB,CAAA,EAAAe,CAAA,SAAAG,CAAA,GAAAP,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAd,CAAA,EAAAe,CAAA,UAAAG,CAAA,KAAAA,CAAA,CAAAV,GAAA,IAAAU,CAAA,CAAAC,GAAA,IAAAP,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAG,CAAA,IAAAT,CAAA,CAAAM,CAAA,IAAAf,CAAA,CAAAe,CAAA,YAAAN,CAAA,CAAAP,OAAA,GAAAF,CAAA,EAAAM,CAAA,IAAAA,CAAA,CAAAa,GAAA,CAAAnB,CAAA,EAAAS,CAAA,GAAAA,CAAA;AAE9C,MAAMW,GAAG,GAAG,IAAAC,gBAAO,EAAC,CAAC;AACrB,MAAMC,MAAM,GAAG,IAAAC,eAAM,EAAC,CAAC;AAEvBH,GAAG,CAACI,GAAG,CAACF,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC;AACvBL,GAAG,CAACI,GAAG,CAACH,gBAAO,CAACK,IAAI,CAAC,CAAC,CAAC;AAEvB,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACF,IAAI,IAAI,IAAI;AAErC,MAAMG,YAAY,GAAG,CACjB,iBAAiB,EACjB,wBAAwB,CAC3B;AAEDV,GAAG,CAACI,GAAG,CAAC,IAAAO,aAAI,EAAC;EAAEC,MAAM,EAAE;AAAG,CAAC,CAAC,CAAC;AAE7BZ,GAAG,CAACI,GAAG,CAAC,CAAES,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAM;EAC1B,IAAGL,YAAY,CAACM,QAAQ,CAACH,GAAG,CAACI,IAAI,CAAC,EAAE;IAChC,OAAOF,IAAI,CAAC,CAAC;EACjB;EAAC;AACL,CAAC,CAAC;AAGFf,GAAG,CAACkB,MAAM,CAACX,IAAI,EAAE,MAAMY,OAAO,CAACC,GAAG,CAAC,yBAAyBb,IAAI,EAAE,CAAC,CAAC;AACpEP,GAAG,CAACI,GAAG,CAACiB,aAAU,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAzC,OAAA,GAELkB,GAAG","ignoreList":[]}},"mtime":1718134354337},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\items.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst items = [{\n  id: 1,\n  username: \"John doe\",\n  cartItems: ['football', 'ps5', 'cd-rom']\n}, {\n  id: 2,\n  username: \"Jane doe\",\n  cartItems: ['mobile phone', 'game pad']\n}];\nvar _default = exports.default = items;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpdGVtcyIsImlkIiwidXNlcm5hbWUiLCJjYXJ0SXRlbXMiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiJEOlxcVVRNXFw5bm9cXFdlYl9JbnRlZ3JhbFxcYmxvZ19iYWNrXFwiLCJzb3VyY2VzIjpbIml0ZW1zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGl0ZW1zID0gW1xyXG4gICAge1xyXG4gICAgICAgIGlkOiAxLFxyXG4gICAgICAgIHVzZXJuYW1lOiBcIkpvaG4gZG9lXCIsXHJcbiAgICAgICAgY2FydEl0ZW1zOiBbJ2Zvb3RiYWxsJywgJ3BzNScsICdjZC1yb20nXSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgaWQ6IDIsXHJcbiAgICAgICAgdXNlcm5hbWU6IFwiSmFuZSBkb2VcIixcclxuICAgICAgICBjYXJ0SXRlbXM6IFsnbW9iaWxlIHBob25lJywgJ2dhbWUgcGFkJ10sXHJcbiAgICB9XHJcbl07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBpdGVtczsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU1BLEtBQUssR0FBRyxDQUNWO0VBQ0lDLEVBQUUsRUFBRSxDQUFDO0VBQ0xDLFFBQVEsRUFBRSxVQUFVO0VBQ3BCQyxTQUFTLEVBQUUsQ0FBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLFFBQVE7QUFDM0MsQ0FBQyxFQUNEO0VBQ0lGLEVBQUUsRUFBRSxDQUFDO0VBQ0xDLFFBQVEsRUFBRSxVQUFVO0VBQ3BCQyxTQUFTLEVBQUUsQ0FBQyxjQUFjLEVBQUUsVUFBVTtBQUMxQyxDQUFDLENBQ0o7QUFBQyxJQUFBQyxRQUFBLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUVhTixLQUFLIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["items","id","username","cartItems","_default","exports","default"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\","sources":["items.js"],"sourcesContent":["const items = [\r\n    {\r\n        id: 1,\r\n        username: \"John doe\",\r\n        cartItems: ['football', 'ps5', 'cd-rom'],\r\n    },\r\n    {\r\n        id: 2,\r\n        username: \"Jane doe\",\r\n        cartItems: ['mobile phone', 'game pad'],\r\n    }\r\n];\r\n\r\nexport default items;"],"mappings":";;;;;;AAAA,MAAMA,KAAK,GAAG,CACV;EACIC,EAAE,EAAE,CAAC;EACLC,QAAQ,EAAE,UAAU;EACpBC,SAAS,EAAE,CAAC,UAAU,EAAE,KAAK,EAAE,QAAQ;AAC3C,CAAC,EACD;EACIF,EAAE,EAAE,CAAC;EACLC,QAAQ,EAAE,UAAU;EACpBC,SAAS,EAAE,CAAC,cAAc,EAAE,UAAU;AAC1C,CAAC,CACJ;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaN,KAAK","ignoreList":[]}},"mtime":1718124819027},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\items.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst items = [{\n  id: 1,\n  username: \"John doe\",\n  cartItems: ['football', 'ps5', 'cd-rom']\n}, {\n  id: 2,\n  username: \"Jane doe\",\n  cartItems: ['mobile phone', 'game pad']\n}];\nvar _default = exports.default = items;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpdGVtcyIsImlkIiwidXNlcm5hbWUiLCJjYXJ0SXRlbXMiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiJEOlxcVVRNXFw5bm9cXFdlYl9JbnRlZ3JhbFxcYmxvZ19iYWNrXFwiLCJzb3VyY2VzIjpbIml0ZW1zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGl0ZW1zID0gW1xyXG4gICAge1xyXG4gICAgICAgIGlkOiAxLFxyXG4gICAgICAgIHVzZXJuYW1lOiBcIkpvaG4gZG9lXCIsXHJcbiAgICAgICAgY2FydEl0ZW1zOiBbJ2Zvb3RiYWxsJywgJ3BzNScsICdjZC1yb20nXSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgaWQ6IDIsXHJcbiAgICAgICAgdXNlcm5hbWU6IFwiSmFuZSBkb2VcIixcclxuICAgICAgICBjYXJ0SXRlbXM6IFsnbW9iaWxlIHBob25lJywgJ2dhbWUgcGFkJ10sXHJcbiAgICB9XHJcbl07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBpdGVtczsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU1BLEtBQUssR0FBRyxDQUNWO0VBQ0lDLEVBQUUsRUFBRSxDQUFDO0VBQ0xDLFFBQVEsRUFBRSxVQUFVO0VBQ3BCQyxTQUFTLEVBQUUsQ0FBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLFFBQVE7QUFDM0MsQ0FBQyxFQUNEO0VBQ0lGLEVBQUUsRUFBRSxDQUFDO0VBQ0xDLFFBQVEsRUFBRSxVQUFVO0VBQ3BCQyxTQUFTLEVBQUUsQ0FBQyxjQUFjLEVBQUUsVUFBVTtBQUMxQyxDQUFDLENBQ0o7QUFBQyxJQUFBQyxRQUFBLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUVhTixLQUFLIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["items","id","username","cartItems","_default","exports","default"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\","sources":["items.js"],"sourcesContent":["const items = [\r\n    {\r\n        id: 1,\r\n        username: \"John doe\",\r\n        cartItems: ['football', 'ps5', 'cd-rom'],\r\n    },\r\n    {\r\n        id: 2,\r\n        username: \"Jane doe\",\r\n        cartItems: ['mobile phone', 'game pad'],\r\n    }\r\n];\r\n\r\nexport default items;"],"mappings":";;;;;;AAAA,MAAMA,KAAK,GAAG,CACV;EACIC,EAAE,EAAE,CAAC;EACLC,QAAQ,EAAE,UAAU;EACpBC,SAAS,EAAE,CAAC,UAAU,EAAE,KAAK,EAAE,QAAQ;AAC3C,CAAC,EACD;EACIF,EAAE,EAAE,CAAC;EACLC,QAAQ,EAAE,UAAU;EACpBC,SAAS,EAAE,CAAC,cAAc,EAAE,UAAU;AAC1C,CAAC,CACJ;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaN,KAAK","ignoreList":[]}},"mtime":1718124819027},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\src\\\\routes\\\\user.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _userController = require(\"../controllers/userController\");\nconst router = (0, _express.Router)();\nrouter.post('/api/user/registerUser', _userController.registerUser);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsInJlcXVpcmUiLCJfdXNlckNvbnRyb2xsZXIiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwicmVnaXN0ZXJVc2VyIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXFVUTVxcOW5vXFxXZWJfSW50ZWdyYWxcXGJsb2dfYmFja1xcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsidXNlci5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbmltcG9ydCB7IHJlZ2lzdGVyVXNlciB9IGZyb20gXCIuLi9jb250cm9sbGVycy91c2VyQ29udHJvbGxlclwiO1xyXG5cclxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2FwaS91c2VyL3JlZ2lzdGVyVXNlcicsIHJlZ2lzdGVyVXNlcik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFFQSxJQUFBQyxlQUFBLEdBQUFELE9BQUE7QUFFQSxNQUFNRSxNQUFNLEdBQUcsSUFBQUMsZUFBTSxFQUFDLENBQUM7QUFFdkJELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLHdCQUF3QixFQUFFQyw0QkFBWSxDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FFckNOLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_express","require","_userController","router","Router","post","registerUser","_default","exports","default"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\src\\routes\\","sources":["user.routes.js"],"sourcesContent":["import { Router } from \"express\";\r\n\r\nimport { registerUser } from \"../controllers/userController\";\r\n\r\nconst router = Router();\r\n\r\nrouter.post('/api/user/registerUser', registerUser);\r\n\r\nexport default router;"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAEA,IAAAC,eAAA,GAAAD,OAAA;AAEA,MAAME,MAAM,GAAG,IAAAC,eAAM,EAAC,CAAC;AAEvBD,MAAM,CAACE,IAAI,CAAC,wBAAwB,EAAEC,4BAAY,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAErCN,MAAM","ignoreList":[]}},"mtime":1718130899377},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\src\\\\controllers\\\\userController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerUser = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _expressValidator = require(\"express-validator\");\nvar _index = require(\"../../database/index\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst registerUser = async (req, res) => {\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    name,\n    lastname,\n    mail,\n    password,\n    pfp,\n    status\n  } = req.body;\n  try {\n    const salt = await _bcrypt.default.genSalt(10);\n    const hashedPassword = await _bcrypt.default.hash(password, salt);\n    const user = {\n      name,\n      lastname,\n      mail,\n      password: hashedPassword,\n      pfp: pfp || null,\n      status\n    };\n    const result = await (0, _index.insertUser)(user);\n    const payload = {\n      user: {\n        id: result.insertId\n      }\n    };\n    _jsonwebtoken.default.sign(payload, process.env.TOKEN, {\n      expiresIn: '1 day'\n    }, (err, token) => {\n      if (err) throw err;\n      res.status(201).json({\n        message: 'success'\n      }, token);\n    });\n    // return res.status(201).json({message: 'success', token: token});\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send('Server Error');\n  }\n};\nexports.registerUser = registerUser;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYmNyeXB0IiwiX2V4cHJlc3NWYWxpZGF0b3IiLCJfaW5kZXgiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJyZWdpc3RlclVzZXIiLCJyZXEiLCJyZXMiLCJlcnJvcnMiLCJ2YWxpZGF0aW9uUmVzdWx0IiwiaXNFbXB0eSIsInN0YXR1cyIsImpzb24iLCJhcnJheSIsIm5hbWUiLCJsYXN0bmFtZSIsIm1haWwiLCJwYXNzd29yZCIsInBmcCIsImJvZHkiLCJzYWx0IiwiYmNyeXB0IiwiZ2VuU2FsdCIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaCIsInVzZXIiLCJyZXN1bHQiLCJpbnNlcnRVc2VyIiwicGF5bG9hZCIsImlkIiwiaW5zZXJ0SWQiLCJqd3QiLCJzaWduIiwicHJvY2VzcyIsImVudiIsIlRPS0VOIiwiZXhwaXJlc0luIiwiZXJyIiwidG9rZW4iLCJtZXNzYWdlIiwiY29uc29sZSIsImVycm9yIiwic2VuZCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXHNyY1xcY29udHJvbGxlcnNcXCIsInNvdXJjZXMiOlsidXNlckNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XHJcbmltcG9ydCB7IHZhbGlkYXRpb25SZXN1bHQgfSBmcm9tICdleHByZXNzLXZhbGlkYXRvcic7XHJcbmltcG9ydCB7IGluc2VydFVzZXIgfSBmcm9tICcuLi8uLi9kYXRhYmFzZS9pbmRleCc7XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyVXNlciA9IGFzeW5jICggcmVxLCByZXMgKSA9PiB7XHJcblxyXG4gICAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdCggcmVxICk7XHJcbiAgICBpZighZXJyb3JzLmlzRW1wdHkoKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKCA0MDAgKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IG5hbWUsIGxhc3RuYW1lLCBtYWlsLCBwYXNzd29yZCwgcGZwLCBzdGF0dXMgfSA9IHJlcS5ib2R5O1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTApO1xyXG4gICAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQpO1xyXG5cclxuICAgICAgICBjb25zdCB1c2VyID0ge1xyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICBsYXN0bmFtZSxcclxuICAgICAgICAgICAgbWFpbCxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgICAgICAgICBwZnA6IHBmcCB8fCBudWxsLFxyXG4gICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbnNlcnRVc2VyKHVzZXIpO1xyXG5cclxuICAgICAgICBjb25zdCBwYXlsb2FkID0ge1xyXG4gICAgICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICAgICAgICBpZDogcmVzdWx0Lmluc2VydElkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGp3dC5zaWduKFxyXG4gICAgICAgICAgICBwYXlsb2FkLFxyXG4gICAgICAgICAgICBwcm9jZXNzLmVudi5UT0tFTixcclxuICAgICAgICAgICAgeyBleHBpcmVzSW46ICcxIGRheSd9LFxyXG4gICAgICAgICAgICAoIGVyciwgdG9rZW4gKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIGVyciApIHRocm93IGVycjtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKCB7bWVzc2FnZTogJ3N1Y2Nlc3MnfSwgdG9rZW4gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAvLyByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe21lc3NhZ2U6ICdzdWNjZXNzJywgdG9rZW46IHRva2VufSk7XHJcbiAgICB9IGNhdGNoICggZXJyICkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoIGVyci5tZXNzYWdlICk7XHJcbiAgICAgICAgcmVzLnN0YXR1cyggNTAwICkuc2VuZCggJ1NlcnZlciBFcnJvcicgKTtcclxuICAgIH1cclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsYUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsaUJBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLE1BQUEsR0FBQUgsT0FBQTtBQUFrRCxTQUFBRCx1QkFBQUssQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUczQyxNQUFNRyxZQUFZLEdBQUcsTUFBQUEsQ0FBUUMsR0FBRyxFQUFFQyxHQUFHLEtBQU07RUFFOUMsTUFBTUMsTUFBTSxHQUFHLElBQUFDLGtDQUFnQixFQUFFSCxHQUFJLENBQUM7RUFDdEMsSUFBRyxDQUFDRSxNQUFNLENBQUNFLE9BQU8sQ0FBQyxDQUFDLEVBQUU7SUFDbEIsT0FBT0gsR0FBRyxDQUFDSSxNQUFNLENBQUUsR0FBSSxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFSixNQUFNLEVBQUVBLE1BQU0sQ0FBQ0ssS0FBSyxDQUFDO0lBQUUsQ0FBQyxDQUFDO0VBQzdEO0VBRUEsTUFBTTtJQUFFQyxJQUFJO0lBQUVDLFFBQVE7SUFBRUMsSUFBSTtJQUFFQyxRQUFRO0lBQUVDLEdBQUc7SUFBRVA7RUFBTyxDQUFDLEdBQUdMLEdBQUcsQ0FBQ2EsSUFBSTtFQUNoRSxJQUFJO0lBQ0EsTUFBTUMsSUFBSSxHQUFHLE1BQU1DLGVBQU0sQ0FBQ0MsT0FBTyxDQUFDLEVBQUUsQ0FBQztJQUNyQyxNQUFNQyxjQUFjLEdBQUcsTUFBTUYsZUFBTSxDQUFDRyxJQUFJLENBQUNQLFFBQVEsRUFBRUcsSUFBSSxDQUFDO0lBRXhELE1BQU1LLElBQUksR0FBRztNQUNUWCxJQUFJO01BQ0pDLFFBQVE7TUFDUkMsSUFBSTtNQUNKQyxRQUFRLEVBQUVNLGNBQWM7TUFDeEJMLEdBQUcsRUFBRUEsR0FBRyxJQUFJLElBQUk7TUFDaEJQO0lBQ0osQ0FBQztJQUVELE1BQU1lLE1BQU0sR0FBRyxNQUFNLElBQUFDLGlCQUFVLEVBQUNGLElBQUksQ0FBQztJQUVyQyxNQUFNRyxPQUFPLEdBQUc7TUFDWkgsSUFBSSxFQUFFO1FBQ0ZJLEVBQUUsRUFBRUgsTUFBTSxDQUFDSTtNQUNmO0lBQ0osQ0FBQztJQUVEQyxxQkFBRyxDQUFDQyxJQUFJLENBQ0pKLE9BQU8sRUFDUEssT0FBTyxDQUFDQyxHQUFHLENBQUNDLEtBQUssRUFDakI7TUFBRUMsU0FBUyxFQUFFO0lBQU8sQ0FBQyxFQUNyQixDQUFFQyxHQUFHLEVBQUVDLEtBQUssS0FBTTtNQUNkLElBQUtELEdBQUcsRUFBRyxNQUFNQSxHQUFHO01BQ3BCOUIsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBRTtRQUFDMkIsT0FBTyxFQUFFO01BQVMsQ0FBQyxFQUFFRCxLQUFNLENBQUM7SUFDdkQsQ0FDSixDQUFDO0lBQ0w7RUFDQSxDQUFDLENBQUMsT0FBUUQsR0FBRyxFQUFHO0lBQ1pHLE9BQU8sQ0FBQ0MsS0FBSyxDQUFFSixHQUFHLENBQUNFLE9BQVEsQ0FBQztJQUM1QmhDLEdBQUcsQ0FBQ0ksTUFBTSxDQUFFLEdBQUksQ0FBQyxDQUFDK0IsSUFBSSxDQUFFLGNBQWUsQ0FBQztFQUM1QztBQUNKLENBQUM7QUFBQUMsT0FBQSxDQUFBdEMsWUFBQSxHQUFBQSxZQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_bcrypt","_expressValidator","_index","e","__esModule","default","registerUser","req","res","errors","validationResult","isEmpty","status","json","array","name","lastname","mail","password","pfp","body","salt","bcrypt","genSalt","hashedPassword","hash","user","result","insertUser","payload","id","insertId","jwt","sign","process","env","TOKEN","expiresIn","err","token","message","console","error","send","exports"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\src\\controllers\\","sources":["userController.js"],"sourcesContent":["import jwt from 'jsonwebtoken';\r\nimport bcrypt from 'bcrypt';\r\nimport { validationResult } from 'express-validator';\r\nimport { insertUser } from '../../database/index';\r\n\r\n\r\nexport const registerUser = async ( req, res ) => {\r\n\r\n    const errors = validationResult( req );\r\n    if(!errors.isEmpty()) {\r\n        return res.status( 400 ).json({ errors: errors.array() });\r\n    }\r\n\r\n    const { name, lastname, mail, password, pfp, status } = req.body;\r\n    try {\r\n        const salt = await bcrypt.genSalt(10);\r\n        const hashedPassword = await bcrypt.hash(password, salt);\r\n\r\n        const user = {\r\n            name,\r\n            lastname,\r\n            mail,\r\n            password: hashedPassword,\r\n            pfp: pfp || null,\r\n            status\r\n        };\r\n\r\n        const result = await insertUser(user);\r\n\r\n        const payload = {\r\n            user: {\r\n                id: result.insertId,\r\n            },\r\n        };\r\n\r\n        jwt.sign(\r\n            payload,\r\n            process.env.TOKEN,\r\n            { expiresIn: '1 day'},\r\n            ( err, token ) => {\r\n                if ( err ) throw err;\r\n                res.status(201).json( {message: 'success'}, token );\r\n            }\r\n        );\r\n    // return res.status(201).json({message: 'success', token: token});\r\n    } catch ( err ) {\r\n        console.error( err.message );\r\n        res.status( 500 ).send( 'Server Error' );\r\n    }\r\n}"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,iBAAA,GAAAF,OAAA;AACA,IAAAG,MAAA,GAAAH,OAAA;AAAkD,SAAAD,uBAAAK,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAG3C,MAAMG,YAAY,GAAG,MAAAA,CAAQC,GAAG,EAAEC,GAAG,KAAM;EAE9C,MAAMC,MAAM,GAAG,IAAAC,kCAAgB,EAAEH,GAAI,CAAC;EACtC,IAAG,CAACE,MAAM,CAACE,OAAO,CAAC,CAAC,EAAE;IAClB,OAAOH,GAAG,CAACI,MAAM,CAAE,GAAI,CAAC,CAACC,IAAI,CAAC;MAAEJ,MAAM,EAAEA,MAAM,CAACK,KAAK,CAAC;IAAE,CAAC,CAAC;EAC7D;EAEA,MAAM;IAAEC,IAAI;IAAEC,QAAQ;IAAEC,IAAI;IAAEC,QAAQ;IAAEC,GAAG;IAAEP;EAAO,CAAC,GAAGL,GAAG,CAACa,IAAI;EAChE,IAAI;IACA,MAAMC,IAAI,GAAG,MAAMC,eAAM,CAACC,OAAO,CAAC,EAAE,CAAC;IACrC,MAAMC,cAAc,GAAG,MAAMF,eAAM,CAACG,IAAI,CAACP,QAAQ,EAAEG,IAAI,CAAC;IAExD,MAAMK,IAAI,GAAG;MACTX,IAAI;MACJC,QAAQ;MACRC,IAAI;MACJC,QAAQ,EAAEM,cAAc;MACxBL,GAAG,EAAEA,GAAG,IAAI,IAAI;MAChBP;IACJ,CAAC;IAED,MAAMe,MAAM,GAAG,MAAM,IAAAC,iBAAU,EAACF,IAAI,CAAC;IAErC,MAAMG,OAAO,GAAG;MACZH,IAAI,EAAE;QACFI,EAAE,EAAEH,MAAM,CAACI;MACf;IACJ,CAAC;IAEDC,qBAAG,CAACC,IAAI,CACJJ,OAAO,EACPK,OAAO,CAACC,GAAG,CAACC,KAAK,EACjB;MAAEC,SAAS,EAAE;IAAO,CAAC,EACrB,CAAEC,GAAG,EAAEC,KAAK,KAAM;MACd,IAAKD,GAAG,EAAG,MAAMA,GAAG;MACpB9B,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAE;QAAC2B,OAAO,EAAE;MAAS,CAAC,EAAED,KAAM,CAAC;IACvD,CACJ,CAAC;IACL;EACA,CAAC,CAAC,OAAQD,GAAG,EAAG;IACZG,OAAO,CAACC,KAAK,CAAEJ,GAAG,CAACE,OAAQ,CAAC;IAC5BhC,GAAG,CAACI,MAAM,CAAE,GAAI,CAAC,CAAC+B,IAAI,CAAE,cAAe,CAAC;EAC5C;AACJ,CAAC;AAAAC,OAAA,CAAAtC,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1718133637662},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\src\\\\routes\\\\user.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _userController = require(\"../controllers/userController\");\nconst router = (0, _express.Router)();\nrouter.post('/api/user/registerUser', _userController.registerUser);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsInJlcXVpcmUiLCJfdXNlckNvbnRyb2xsZXIiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwicmVnaXN0ZXJVc2VyIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXFVUTVxcOW5vXFxXZWJfSW50ZWdyYWxcXGJsb2dfYmFja1xcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsidXNlci5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbmltcG9ydCB7IHJlZ2lzdGVyVXNlciB9IGZyb20gXCIuLi9jb250cm9sbGVycy91c2VyQ29udHJvbGxlclwiO1xyXG5cclxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2FwaS91c2VyL3JlZ2lzdGVyVXNlcicsIHJlZ2lzdGVyVXNlcik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFFQSxJQUFBQyxlQUFBLEdBQUFELE9BQUE7QUFFQSxNQUFNRSxNQUFNLEdBQUcsSUFBQUMsZUFBTSxFQUFDLENBQUM7QUFFdkJELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLHdCQUF3QixFQUFFQyw0QkFBWSxDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FFckNOLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_express","require","_userController","router","Router","post","registerUser","_default","exports","default"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\src\\routes\\","sources":["user.routes.js"],"sourcesContent":["import { Router } from \"express\";\r\n\r\nimport { registerUser } from \"../controllers/userController\";\r\n\r\nconst router = Router();\r\n\r\nrouter.post('/api/user/registerUser', registerUser);\r\n\r\nexport default router;"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAEA,IAAAC,eAAA,GAAAD,OAAA;AAEA,MAAME,MAAM,GAAG,IAAAC,eAAM,EAAC,CAAC;AAEvBD,MAAM,CAACE,IAAI,CAAC,wBAAwB,EAAEC,4BAAY,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAErCN,MAAM","ignoreList":[]}},"mtime":1718130899377},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\src\\\\controllers\\\\userController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerUser = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _expressValidator = require(\"express-validator\");\nvar _index = require(\"../../database/index\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst registerUser = async (req, res) => {\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    name,\n    lastname,\n    mail,\n    password,\n    pfp,\n    status\n  } = req.body;\n  try {\n    const salt = await _bcrypt.default.genSalt(10);\n    const hashedPassword = await _bcrypt.default.hash(password, salt);\n    const user = {\n      name,\n      lastname,\n      mail,\n      password: hashedPassword,\n      pfp: pfp || null,\n      status\n    };\n    const result = await (0, _index.insertUser)(user);\n    const payload = {\n      user: {\n        id: result.insertId\n      }\n    };\n    _jsonwebtoken.default.sign(payload, process.env.TOKEN, {\n      expiresIn: '1 day'\n    }, (err, token) => {\n      if (err) throw err;\n      res.status(201).json({\n        message: 'success'\n      }, token);\n    });\n    // return res.status(201).json({message: 'success', token: token});\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send('Server Error');\n  }\n};\nexports.registerUser = registerUser;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYmNyeXB0IiwiX2V4cHJlc3NWYWxpZGF0b3IiLCJfaW5kZXgiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJyZWdpc3RlclVzZXIiLCJyZXEiLCJyZXMiLCJlcnJvcnMiLCJ2YWxpZGF0aW9uUmVzdWx0IiwiaXNFbXB0eSIsInN0YXR1cyIsImpzb24iLCJhcnJheSIsIm5hbWUiLCJsYXN0bmFtZSIsIm1haWwiLCJwYXNzd29yZCIsInBmcCIsImJvZHkiLCJzYWx0IiwiYmNyeXB0IiwiZ2VuU2FsdCIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaCIsInVzZXIiLCJyZXN1bHQiLCJpbnNlcnRVc2VyIiwicGF5bG9hZCIsImlkIiwiaW5zZXJ0SWQiLCJqd3QiLCJzaWduIiwicHJvY2VzcyIsImVudiIsIlRPS0VOIiwiZXhwaXJlc0luIiwiZXJyIiwidG9rZW4iLCJtZXNzYWdlIiwiY29uc29sZSIsImVycm9yIiwic2VuZCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXHNyY1xcY29udHJvbGxlcnNcXCIsInNvdXJjZXMiOlsidXNlckNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XHJcbmltcG9ydCB7IHZhbGlkYXRpb25SZXN1bHQgfSBmcm9tICdleHByZXNzLXZhbGlkYXRvcic7XHJcbmltcG9ydCB7IGluc2VydFVzZXIgfSBmcm9tICcuLi8uLi9kYXRhYmFzZS9pbmRleCc7XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyVXNlciA9IGFzeW5jICggcmVxLCByZXMgKSA9PiB7XHJcblxyXG4gICAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdCggcmVxICk7XHJcbiAgICBpZighZXJyb3JzLmlzRW1wdHkoKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKCA0MDAgKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IG5hbWUsIGxhc3RuYW1lLCBtYWlsLCBwYXNzd29yZCwgcGZwLCBzdGF0dXMgfSA9IHJlcS5ib2R5O1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTApO1xyXG4gICAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQpO1xyXG5cclxuICAgICAgICBjb25zdCB1c2VyID0ge1xyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICBsYXN0bmFtZSxcclxuICAgICAgICAgICAgbWFpbCxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgICAgICAgICBwZnA6IHBmcCB8fCBudWxsLFxyXG4gICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbnNlcnRVc2VyKHVzZXIpO1xyXG5cclxuICAgICAgICBjb25zdCBwYXlsb2FkID0ge1xyXG4gICAgICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICAgICAgICBpZDogcmVzdWx0Lmluc2VydElkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGp3dC5zaWduKFxyXG4gICAgICAgICAgICBwYXlsb2FkLFxyXG4gICAgICAgICAgICBwcm9jZXNzLmVudi5UT0tFTixcclxuICAgICAgICAgICAgeyBleHBpcmVzSW46ICcxIGRheSd9LFxyXG4gICAgICAgICAgICAoIGVyciwgdG9rZW4gKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIGVyciApIHRocm93IGVycjtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKCB7bWVzc2FnZTogJ3N1Y2Nlc3MnfSwgdG9rZW4gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAvLyByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe21lc3NhZ2U6ICdzdWNjZXNzJywgdG9rZW46IHRva2VufSk7XHJcbiAgICB9IGNhdGNoICggZXJyICkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoIGVyci5tZXNzYWdlICk7XHJcbiAgICAgICAgcmVzLnN0YXR1cyggNTAwICkuc2VuZCggJ1NlcnZlciBFcnJvcicgKTtcclxuICAgIH1cclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsYUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsaUJBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLE1BQUEsR0FBQUgsT0FBQTtBQUFrRCxTQUFBRCx1QkFBQUssQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUczQyxNQUFNRyxZQUFZLEdBQUcsTUFBQUEsQ0FBUUMsR0FBRyxFQUFFQyxHQUFHLEtBQU07RUFFOUMsTUFBTUMsTUFBTSxHQUFHLElBQUFDLGtDQUFnQixFQUFFSCxHQUFJLENBQUM7RUFDdEMsSUFBRyxDQUFDRSxNQUFNLENBQUNFLE9BQU8sQ0FBQyxDQUFDLEVBQUU7SUFDbEIsT0FBT0gsR0FBRyxDQUFDSSxNQUFNLENBQUUsR0FBSSxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFSixNQUFNLEVBQUVBLE1BQU0sQ0FBQ0ssS0FBSyxDQUFDO0lBQUUsQ0FBQyxDQUFDO0VBQzdEO0VBRUEsTUFBTTtJQUFFQyxJQUFJO0lBQUVDLFFBQVE7SUFBRUMsSUFBSTtJQUFFQyxRQUFRO0lBQUVDLEdBQUc7SUFBRVA7RUFBTyxDQUFDLEdBQUdMLEdBQUcsQ0FBQ2EsSUFBSTtFQUNoRSxJQUFJO0lBQ0EsTUFBTUMsSUFBSSxHQUFHLE1BQU1DLGVBQU0sQ0FBQ0MsT0FBTyxDQUFDLEVBQUUsQ0FBQztJQUNyQyxNQUFNQyxjQUFjLEdBQUcsTUFBTUYsZUFBTSxDQUFDRyxJQUFJLENBQUNQLFFBQVEsRUFBRUcsSUFBSSxDQUFDO0lBRXhELE1BQU1LLElBQUksR0FBRztNQUNUWCxJQUFJO01BQ0pDLFFBQVE7TUFDUkMsSUFBSTtNQUNKQyxRQUFRLEVBQUVNLGNBQWM7TUFDeEJMLEdBQUcsRUFBRUEsR0FBRyxJQUFJLElBQUk7TUFDaEJQO0lBQ0osQ0FBQztJQUVELE1BQU1lLE1BQU0sR0FBRyxNQUFNLElBQUFDLGlCQUFVLEVBQUNGLElBQUksQ0FBQztJQUVyQyxNQUFNRyxPQUFPLEdBQUc7TUFDWkgsSUFBSSxFQUFFO1FBQ0ZJLEVBQUUsRUFBRUgsTUFBTSxDQUFDSTtNQUNmO0lBQ0osQ0FBQztJQUVEQyxxQkFBRyxDQUFDQyxJQUFJLENBQ0pKLE9BQU8sRUFDUEssT0FBTyxDQUFDQyxHQUFHLENBQUNDLEtBQUssRUFDakI7TUFBRUMsU0FBUyxFQUFFO0lBQU8sQ0FBQyxFQUNyQixDQUFFQyxHQUFHLEVBQUVDLEtBQUssS0FBTTtNQUNkLElBQUtELEdBQUcsRUFBRyxNQUFNQSxHQUFHO01BQ3BCOUIsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBRTtRQUFDMkIsT0FBTyxFQUFFO01BQVMsQ0FBQyxFQUFFRCxLQUFNLENBQUM7SUFDdkQsQ0FDSixDQUFDO0lBQ0w7RUFDQSxDQUFDLENBQUMsT0FBUUQsR0FBRyxFQUFHO0lBQ1pHLE9BQU8sQ0FBQ0MsS0FBSyxDQUFFSixHQUFHLENBQUNFLE9BQVEsQ0FBQztJQUM1QmhDLEdBQUcsQ0FBQ0ksTUFBTSxDQUFFLEdBQUksQ0FBQyxDQUFDK0IsSUFBSSxDQUFFLGNBQWUsQ0FBQztFQUM1QztBQUNKLENBQUM7QUFBQUMsT0FBQSxDQUFBdEMsWUFBQSxHQUFBQSxZQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_bcrypt","_expressValidator","_index","e","__esModule","default","registerUser","req","res","errors","validationResult","isEmpty","status","json","array","name","lastname","mail","password","pfp","body","salt","bcrypt","genSalt","hashedPassword","hash","user","result","insertUser","payload","id","insertId","jwt","sign","process","env","TOKEN","expiresIn","err","token","message","console","error","send","exports"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\src\\controllers\\","sources":["userController.js"],"sourcesContent":["import jwt from 'jsonwebtoken';\r\nimport bcrypt from 'bcrypt';\r\nimport { validationResult } from 'express-validator';\r\nimport { insertUser } from '../../database/index';\r\n\r\n\r\nexport const registerUser = async ( req, res ) => {\r\n\r\n    const errors = validationResult( req );\r\n    if(!errors.isEmpty()) {\r\n        return res.status( 400 ).json({ errors: errors.array() });\r\n    }\r\n\r\n    const { name, lastname, mail, password, pfp, status } = req.body;\r\n    try {\r\n        const salt = await bcrypt.genSalt(10);\r\n        const hashedPassword = await bcrypt.hash(password, salt);\r\n\r\n        const user = {\r\n            name,\r\n            lastname,\r\n            mail,\r\n            password: hashedPassword,\r\n            pfp: pfp || null,\r\n            status\r\n        };\r\n\r\n        const result = await insertUser(user);\r\n\r\n        const payload = {\r\n            user: {\r\n                id: result.insertId,\r\n            },\r\n        };\r\n\r\n        jwt.sign(\r\n            payload,\r\n            process.env.TOKEN,\r\n            { expiresIn: '1 day'},\r\n            ( err, token ) => {\r\n                if ( err ) throw err;\r\n                res.status(201).json( {message: 'success'}, token );\r\n            }\r\n        );\r\n    // return res.status(201).json({message: 'success', token: token});\r\n    } catch ( err ) {\r\n        console.error( err.message );\r\n        res.status( 500 ).send( 'Server Error' );\r\n    }\r\n}"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,iBAAA,GAAAF,OAAA;AACA,IAAAG,MAAA,GAAAH,OAAA;AAAkD,SAAAD,uBAAAK,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAG3C,MAAMG,YAAY,GAAG,MAAAA,CAAQC,GAAG,EAAEC,GAAG,KAAM;EAE9C,MAAMC,MAAM,GAAG,IAAAC,kCAAgB,EAAEH,GAAI,CAAC;EACtC,IAAG,CAACE,MAAM,CAACE,OAAO,CAAC,CAAC,EAAE;IAClB,OAAOH,GAAG,CAACI,MAAM,CAAE,GAAI,CAAC,CAACC,IAAI,CAAC;MAAEJ,MAAM,EAAEA,MAAM,CAACK,KAAK,CAAC;IAAE,CAAC,CAAC;EAC7D;EAEA,MAAM;IAAEC,IAAI;IAAEC,QAAQ;IAAEC,IAAI;IAAEC,QAAQ;IAAEC,GAAG;IAAEP;EAAO,CAAC,GAAGL,GAAG,CAACa,IAAI;EAChE,IAAI;IACA,MAAMC,IAAI,GAAG,MAAMC,eAAM,CAACC,OAAO,CAAC,EAAE,CAAC;IACrC,MAAMC,cAAc,GAAG,MAAMF,eAAM,CAACG,IAAI,CAACP,QAAQ,EAAEG,IAAI,CAAC;IAExD,MAAMK,IAAI,GAAG;MACTX,IAAI;MACJC,QAAQ;MACRC,IAAI;MACJC,QAAQ,EAAEM,cAAc;MACxBL,GAAG,EAAEA,GAAG,IAAI,IAAI;MAChBP;IACJ,CAAC;IAED,MAAMe,MAAM,GAAG,MAAM,IAAAC,iBAAU,EAACF,IAAI,CAAC;IAErC,MAAMG,OAAO,GAAG;MACZH,IAAI,EAAE;QACFI,EAAE,EAAEH,MAAM,CAACI;MACf;IACJ,CAAC;IAEDC,qBAAG,CAACC,IAAI,CACJJ,OAAO,EACPK,OAAO,CAACC,GAAG,CAACC,KAAK,EACjB;MAAEC,SAAS,EAAE;IAAO,CAAC,EACrB,CAAEC,GAAG,EAAEC,KAAK,KAAM;MACd,IAAKD,GAAG,EAAG,MAAMA,GAAG;MACpB9B,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAE;QAAC2B,OAAO,EAAE;MAAS,CAAC,EAAED,KAAM,CAAC;IACvD,CACJ,CAAC;IACL;EACA,CAAC,CAAC,OAAQD,GAAG,EAAG;IACZG,OAAO,CAACC,KAAK,CAAEJ,GAAG,CAACE,OAAQ,CAAC;IAC5BhC,GAAG,CAACI,MAAM,CAAE,GAAI,CAAC,CAAC+B,IAAI,CAAE,cAAe,CAAC;EAC5C;AACJ,CAAC;AAAAC,OAAA,CAAAtC,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1718133637662},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\database\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  queries: true\n};\nObject.defineProperty(exports, \"queries\", {\n  enumerable: true,\n  get: function () {\n    return _querys.queries;\n  }\n});\nvar _connection = require(\"./connection\");\nObject.keys(_connection).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _connection[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _connection[key];\n    }\n  });\n});\nvar _querys = require(\"./querys\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29ubmVjdGlvbiIsInJlcXVpcmUiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIl9leHBvcnROYW1lcyIsImV4cG9ydHMiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJfcXVlcnlzIl0sInNvdXJjZVJvb3QiOiJEOlxcVVRNXFw5bm9cXFdlYl9JbnRlZ3JhbFxcYmxvZ19iYWNrXFxkYXRhYmFzZVxcIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Nvbm5lY3Rpb24nO1xyXG5leHBvcnQgeyBxdWVyaWVzIH0gZnJvbSAnLi9xdWVyeXMnOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxXQUFBLEdBQUFDLE9BQUE7QUFBQUMsTUFBQSxDQUFBQyxJQUFBLENBQUFILFdBQUEsRUFBQUksT0FBQSxXQUFBQyxHQUFBO0VBQUEsSUFBQUEsR0FBQSxrQkFBQUEsR0FBQTtFQUFBLElBQUFILE1BQUEsQ0FBQUksU0FBQSxDQUFBQyxjQUFBLENBQUFDLElBQUEsQ0FBQUMsWUFBQSxFQUFBSixHQUFBO0VBQUEsSUFBQUEsR0FBQSxJQUFBSyxPQUFBLElBQUFBLE9BQUEsQ0FBQUwsR0FBQSxNQUFBTCxXQUFBLENBQUFLLEdBQUE7RUFBQUgsTUFBQSxDQUFBUyxjQUFBLENBQUFELE9BQUEsRUFBQUwsR0FBQTtJQUFBTyxVQUFBO0lBQUFDLEdBQUEsV0FBQUEsQ0FBQTtNQUFBLE9BQUFiLFdBQUEsQ0FBQUssR0FBQTtJQUFBO0VBQUE7QUFBQTtBQUNBLElBQUFTLE9BQUEsR0FBQWIsT0FBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_connection","require","Object","keys","forEach","key","prototype","hasOwnProperty","call","_exportNames","exports","defineProperty","enumerable","get","_querys"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\database\\","sources":["index.js"],"sourcesContent":["export * from './connection';\r\nexport { queries } from './querys';"],"mappings":";;;;;;;;;;;;;;AAAA,IAAAA,WAAA,GAAAC,OAAA;AAAAC,MAAA,CAAAC,IAAA,CAAAH,WAAA,EAAAI,OAAA,WAAAC,GAAA;EAAA,IAAAA,GAAA,kBAAAA,GAAA;EAAA,IAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAC,YAAA,EAAAJ,GAAA;EAAA,IAAAA,GAAA,IAAAK,OAAA,IAAAA,OAAA,CAAAL,GAAA,MAAAL,WAAA,CAAAK,GAAA;EAAAH,MAAA,CAAAS,cAAA,CAAAD,OAAA,EAAAL,GAAA;IAAAO,UAAA;IAAAC,GAAA,WAAAA,CAAA;MAAA,OAAAb,WAAA,CAAAK,GAAA;IAAA;EAAA;AAAA;AACA,IAAAS,OAAA,GAAAb,OAAA","ignoreList":[]}},"mtime":1718128895690},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\database\\\\connection.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getConnection = getConnection;\nvar _mssql = _interopRequireDefault(require(\"mssql\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst sqlConfig = {\n  database: process.env.DB_NAME,\n  server: 'localhost'\n};\nasync function getConnection() {\n  try {\n    await _mssql.default.connect(sqlConfig);\n  } catch (e) {\n    console.log(e);\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbXNzcWwiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInNxbENvbmZpZyIsImRhdGFiYXNlIiwicHJvY2VzcyIsImVudiIsIkRCX05BTUUiLCJzZXJ2ZXIiLCJnZXRDb25uZWN0aW9uIiwic3FsIiwiY29ubmVjdCIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXGRhdGFiYXNlXFwiLCJzb3VyY2VzIjpbImNvbm5lY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNxbCBmcm9tICdtc3NxbCc7XHJcbmNvbnN0IHNxbENvbmZpZyA9IHtcclxuICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FLFxyXG4gICAgc2VydmVyOiAnbG9jYWxob3N0J1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb25uZWN0aW9uKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBzcWwuY29ubmVjdChzcWxDb25maWcpO1xyXG4gICAgICAgIFxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgfVxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBd0IsU0FBQUQsdUJBQUFFLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFDeEIsTUFBTUcsU0FBUyxHQUFHO0VBQ2RDLFFBQVEsRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87RUFDN0JDLE1BQU0sRUFBRTtBQUNaLENBQUM7QUFDTSxlQUFlQyxhQUFhQSxDQUFBLEVBQUc7RUFDbEMsSUFBSTtJQUNBLE1BQU1DLGNBQUcsQ0FBQ0MsT0FBTyxDQUFDUixTQUFTLENBQUM7RUFFaEMsQ0FBQyxDQUFDLE9BQU9ILENBQUMsRUFBRTtJQUNSWSxPQUFPLENBQUNDLEdBQUcsQ0FBQ2IsQ0FBQyxDQUFDO0VBQ2xCO0FBQ0oiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_mssql","_interopRequireDefault","require","e","__esModule","default","sqlConfig","database","process","env","DB_NAME","server","getConnection","sql","connect","console","log"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\database\\","sources":["connection.js"],"sourcesContent":["import sql from 'mssql';\r\nconst sqlConfig = {\r\n    database: process.env.DB_NAME,\r\n    server: 'localhost'\r\n}\r\nexport async function getConnection() {\r\n    try {\r\n        await sql.connect(sqlConfig);\r\n        \r\n    } catch (e) {\r\n        console.log(e);\r\n    }\r\n}"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAwB,SAAAD,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AACxB,MAAMG,SAAS,GAAG;EACdC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO;EAC7BC,MAAM,EAAE;AACZ,CAAC;AACM,eAAeC,aAAaA,CAAA,EAAG;EAClC,IAAI;IACA,MAAMC,cAAG,CAACC,OAAO,CAACR,SAAS,CAAC;EAEhC,CAAC,CAAC,OAAOH,CAAC,EAAE;IACRY,OAAO,CAACC,GAAG,CAACb,CAAC,CAAC;EAClB;AACJ","ignoreList":[]}},"mtime":1718124344203},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\database\\\\querys.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.queries = void 0;\nconst queries = exports.queries = {\n  getUser: \"SELECT name, lastname, mail, pfp FROM Usuario\",\n  insertUser: \"INSERT INTO Usuario VALUES (name, lastname, mail, password, pfp, status)\",\n  userExist: \"SEELCT * FROM Usuario WHERE mail = ?\"\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJxdWVyaWVzIiwiZXhwb3J0cyIsImdldFVzZXIiLCJpbnNlcnRVc2VyIiwidXNlckV4aXN0Il0sInNvdXJjZVJvb3QiOiJEOlxcVVRNXFw5bm9cXFdlYl9JbnRlZ3JhbFxcYmxvZ19iYWNrXFxkYXRhYmFzZVxcIiwic291cmNlcyI6WyJxdWVyeXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHF1ZXJpZXMgPSB7XHJcbiAgICBnZXRVc2VyOiBcIlNFTEVDVCBuYW1lLCBsYXN0bmFtZSwgbWFpbCwgcGZwIEZST00gVXN1YXJpb1wiLFxyXG4gICAgaW5zZXJ0VXNlcjogXCJJTlNFUlQgSU5UTyBVc3VhcmlvIFZBTFVFUyAobmFtZSwgbGFzdG5hbWUsIG1haWwsIHBhc3N3b3JkLCBwZnAsIHN0YXR1cylcIixcclxuICAgIHVzZXJFeGlzdDogXCJTRUVMQ1QgKiBGUk9NIFVzdWFyaW8gV0hFUkUgbWFpbCA9ID9cIlxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxPQUFPLEdBQUFDLE9BQUEsQ0FBQUQsT0FBQSxHQUFHO0VBQ25CRSxPQUFPLEVBQUUsK0NBQStDO0VBQ3hEQyxVQUFVLEVBQUUsMEVBQTBFO0VBQ3RGQyxTQUFTLEVBQUU7QUFDZixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["queries","exports","getUser","insertUser","userExist"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\database\\","sources":["querys.js"],"sourcesContent":["export const queries = {\r\n    getUser: \"SELECT name, lastname, mail, pfp FROM Usuario\",\r\n    insertUser: \"INSERT INTO Usuario VALUES (name, lastname, mail, password, pfp, status)\",\r\n    userExist: \"SEELCT * FROM Usuario WHERE mail = ?\"\r\n}"],"mappings":";;;;;;AAAO,MAAMA,OAAO,GAAAC,OAAA,CAAAD,OAAA,GAAG;EACnBE,OAAO,EAAE,+CAA+C;EACxDC,UAAU,EAAE,0EAA0E;EACtFC,SAAS,EAAE;AACf,CAAC","ignoreList":[]}},"mtime":1718133026334},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\database\\\\connection.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getConnection = getConnection;\nvar _mssql = _interopRequireDefault(require(\"mssql\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst sqlConfig = {\n  database: process.env.DB_NAME,\n  server: 'localhost'\n};\nasync function getConnection() {\n  try {\n    await _mssql.default.connect(sqlConfig);\n  } catch (e) {\n    console.log(e);\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbXNzcWwiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInNxbENvbmZpZyIsImRhdGFiYXNlIiwicHJvY2VzcyIsImVudiIsIkRCX05BTUUiLCJzZXJ2ZXIiLCJnZXRDb25uZWN0aW9uIiwic3FsIiwiY29ubmVjdCIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXGRhdGFiYXNlXFwiLCJzb3VyY2VzIjpbImNvbm5lY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNxbCBmcm9tICdtc3NxbCc7XHJcbmNvbnN0IHNxbENvbmZpZyA9IHtcclxuICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FLFxyXG4gICAgc2VydmVyOiAnbG9jYWxob3N0J1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb25uZWN0aW9uKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBzcWwuY29ubmVjdChzcWxDb25maWcpO1xyXG4gICAgICAgIFxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgfVxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBd0IsU0FBQUQsdUJBQUFFLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFDeEIsTUFBTUcsU0FBUyxHQUFHO0VBQ2RDLFFBQVEsRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87RUFDN0JDLE1BQU0sRUFBRTtBQUNaLENBQUM7QUFDTSxlQUFlQyxhQUFhQSxDQUFBLEVBQUc7RUFDbEMsSUFBSTtJQUNBLE1BQU1DLGNBQUcsQ0FBQ0MsT0FBTyxDQUFDUixTQUFTLENBQUM7RUFFaEMsQ0FBQyxDQUFDLE9BQU9ILENBQUMsRUFBRTtJQUNSWSxPQUFPLENBQUNDLEdBQUcsQ0FBQ2IsQ0FBQyxDQUFDO0VBQ2xCO0FBQ0oiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_mssql","_interopRequireDefault","require","e","__esModule","default","sqlConfig","database","process","env","DB_NAME","server","getConnection","sql","connect","console","log"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\database\\","sources":["connection.js"],"sourcesContent":["import sql from 'mssql';\r\nconst sqlConfig = {\r\n    database: process.env.DB_NAME,\r\n    server: 'localhost'\r\n}\r\nexport async function getConnection() {\r\n    try {\r\n        await sql.connect(sqlConfig);\r\n        \r\n    } catch (e) {\r\n        console.log(e);\r\n    }\r\n}"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAwB,SAAAD,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AACxB,MAAMG,SAAS,GAAG;EACdC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO;EAC7BC,MAAM,EAAE;AACZ,CAAC;AACM,eAAeC,aAAaA,CAAA,EAAG;EAClC,IAAI;IACA,MAAMC,cAAG,CAACC,OAAO,CAACR,SAAS,CAAC;EAEhC,CAAC,CAAC,OAAOH,CAAC,EAAE;IACRY,OAAO,CAACC,GAAG,CAACb,CAAC,CAAC;EAClB;AACJ","ignoreList":[]}},"mtime":1718124344203},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\database\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  queries: true\n};\nObject.defineProperty(exports, \"queries\", {\n  enumerable: true,\n  get: function () {\n    return _querys.queries;\n  }\n});\nvar _connection = require(\"./connection\");\nObject.keys(_connection).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _connection[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _connection[key];\n    }\n  });\n});\nvar _querys = require(\"./querys\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29ubmVjdGlvbiIsInJlcXVpcmUiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIl9leHBvcnROYW1lcyIsImV4cG9ydHMiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJfcXVlcnlzIl0sInNvdXJjZVJvb3QiOiJEOlxcVVRNXFw5bm9cXFdlYl9JbnRlZ3JhbFxcYmxvZ19iYWNrXFxkYXRhYmFzZVxcIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Nvbm5lY3Rpb24nO1xyXG5leHBvcnQgeyBxdWVyaWVzIH0gZnJvbSAnLi9xdWVyeXMnOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxXQUFBLEdBQUFDLE9BQUE7QUFBQUMsTUFBQSxDQUFBQyxJQUFBLENBQUFILFdBQUEsRUFBQUksT0FBQSxXQUFBQyxHQUFBO0VBQUEsSUFBQUEsR0FBQSxrQkFBQUEsR0FBQTtFQUFBLElBQUFILE1BQUEsQ0FBQUksU0FBQSxDQUFBQyxjQUFBLENBQUFDLElBQUEsQ0FBQUMsWUFBQSxFQUFBSixHQUFBO0VBQUEsSUFBQUEsR0FBQSxJQUFBSyxPQUFBLElBQUFBLE9BQUEsQ0FBQUwsR0FBQSxNQUFBTCxXQUFBLENBQUFLLEdBQUE7RUFBQUgsTUFBQSxDQUFBUyxjQUFBLENBQUFELE9BQUEsRUFBQUwsR0FBQTtJQUFBTyxVQUFBO0lBQUFDLEdBQUEsV0FBQUEsQ0FBQTtNQUFBLE9BQUFiLFdBQUEsQ0FBQUssR0FBQTtJQUFBO0VBQUE7QUFBQTtBQUNBLElBQUFTLE9BQUEsR0FBQWIsT0FBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_connection","require","Object","keys","forEach","key","prototype","hasOwnProperty","call","_exportNames","exports","defineProperty","enumerable","get","_querys"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\database\\","sources":["index.js"],"sourcesContent":["export * from './connection';\r\nexport { queries } from './querys';"],"mappings":";;;;;;;;;;;;;;AAAA,IAAAA,WAAA,GAAAC,OAAA;AAAAC,MAAA,CAAAC,IAAA,CAAAH,WAAA,EAAAI,OAAA,WAAAC,GAAA;EAAA,IAAAA,GAAA,kBAAAA,GAAA;EAAA,IAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAC,YAAA,EAAAJ,GAAA;EAAA,IAAAA,GAAA,IAAAK,OAAA,IAAAA,OAAA,CAAAL,GAAA,MAAAL,WAAA,CAAAK,GAAA;EAAAH,MAAA,CAAAS,cAAA,CAAAD,OAAA,EAAAL,GAAA;IAAAO,UAAA;IAAAC,GAAA,WAAAA,CAAA;MAAA,OAAAb,WAAA,CAAAK,GAAA;IAAA;EAAA;AAAA;AACA,IAAAS,OAAA,GAAAb,OAAA","ignoreList":[]}},"mtime":1718128895690},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\database\\\\querys.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.queries = void 0;\nconst queries = exports.queries = {\n  getUser: \"SELECT name, lastname, mail, pfp FROM Usuario\",\n  insertUser: \"INSERT INTO Usuario VALUES (name, lastname, mail, password, pfp, status)\",\n  userExist: \"SEELCT * FROM Usuario WHERE mail = ?\"\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJxdWVyaWVzIiwiZXhwb3J0cyIsImdldFVzZXIiLCJpbnNlcnRVc2VyIiwidXNlckV4aXN0Il0sInNvdXJjZVJvb3QiOiJEOlxcVVRNXFw5bm9cXFdlYl9JbnRlZ3JhbFxcYmxvZ19iYWNrXFxkYXRhYmFzZVxcIiwic291cmNlcyI6WyJxdWVyeXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHF1ZXJpZXMgPSB7XHJcbiAgICBnZXRVc2VyOiBcIlNFTEVDVCBuYW1lLCBsYXN0bmFtZSwgbWFpbCwgcGZwIEZST00gVXN1YXJpb1wiLFxyXG4gICAgaW5zZXJ0VXNlcjogXCJJTlNFUlQgSU5UTyBVc3VhcmlvIFZBTFVFUyAobmFtZSwgbGFzdG5hbWUsIG1haWwsIHBhc3N3b3JkLCBwZnAsIHN0YXR1cylcIixcclxuICAgIHVzZXJFeGlzdDogXCJTRUVMQ1QgKiBGUk9NIFVzdWFyaW8gV0hFUkUgbWFpbCA9ID9cIlxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxPQUFPLEdBQUFDLE9BQUEsQ0FBQUQsT0FBQSxHQUFHO0VBQ25CRSxPQUFPLEVBQUUsK0NBQStDO0VBQ3hEQyxVQUFVLEVBQUUsMEVBQTBFO0VBQ3RGQyxTQUFTLEVBQUU7QUFDZixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["queries","exports","getUser","insertUser","userExist"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\database\\","sources":["querys.js"],"sourcesContent":["export const queries = {\r\n    getUser: \"SELECT name, lastname, mail, pfp FROM Usuario\",\r\n    insertUser: \"INSERT INTO Usuario VALUES (name, lastname, mail, password, pfp, status)\",\r\n    userExist: \"SEELCT * FROM Usuario WHERE mail = ?\"\r\n}"],"mappings":";;;;;;AAAO,MAAMA,OAAO,GAAAC,OAAA,CAAAD,OAAA,GAAG;EACnBE,OAAO,EAAE,+CAA+C;EACxDC,UAAU,EAAE,0EAA0E;EACtFC,SAAS,EAAE;AACf,CAAC","ignoreList":[]}},"mtime":1718133026334},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _user = _interopRequireDefault(require(\"./routes/user.routes\"));\nvar _post = _interopRequireDefault(require(\"./routes/post.routes\"));\nvar _authMiddleware = require(\"./middleware/authMiddleware\");\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _expressFileupload = _interopRequireDefault(require(\"express-fileupload\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n_dotenv.default.config();\nconst app = (0, _express.default)();\nconst PORT = process.env.PORT || 3000;\n\n// Middleware\napp.use((0, _cors.default)({\n  origin: \"*\"\n}));\napp.use(_express.default.json());\napp.use(_express.default.urlencoded({\n  extended: true\n}));\n\n// Configurar express-fileupload\napp.use((0, _expressFileupload.default)({\n  createParentPath: true,\n  limits: {\n    fileSize: 5 * 1024 * 1024\n  }\n}));\napp.use('/photos', _express.default.static(_path.default.join(__dirname, './photos')));\n// Middleware para verificar el token en rutas protegidas\nconst publicRoutes = ['/api/user/login', '/api/user/registerUser', '/api/post/getPosts'\n// '/api/post/getUserPosts',\n];\napp.use((req, res, next) => {\n  console.log(req.path);\n  if (publicRoutes.includes(req.path)) {\n    return next();\n  }\n  (0, _authMiddleware.authenticateToken)(req, res, next);\n});\n\n// Rutas para usuarios y posts\napp.use(_user.default);\napp.use(_post.default);\n\n// Middleware para servir archivos estáticos (fotos)\n\n// Escuchar en el puerto definido\napp.listen(PORT, () => console.log(`App listening on port ${PORT}`));\nvar _default = exports.default = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NvcnMiLCJfdXNlciIsIl9wb3N0IiwiX2F1dGhNaWRkbGV3YXJlIiwiX2RvdGVudiIsIl9leHByZXNzRmlsZXVwbG9hZCIsIl9wYXRoIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZG90ZW52IiwiY29uZmlnIiwiYXBwIiwiZXhwcmVzcyIsIlBPUlQiLCJwcm9jZXNzIiwiZW52IiwidXNlIiwiY29ycyIsIm9yaWdpbiIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJmaWxlVXBsb2FkIiwiY3JlYXRlUGFyZW50UGF0aCIsImxpbWl0cyIsImZpbGVTaXplIiwic3RhdGljIiwicGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJwdWJsaWNSb3V0ZXMiLCJyZXEiLCJyZXMiLCJuZXh0IiwiY29uc29sZSIsImxvZyIsImluY2x1ZGVzIiwiYXV0aGVudGljYXRlVG9rZW4iLCJ1c2VyUm91dGVzIiwicG9zdHNSb3V0ZXMiLCJsaXN0ZW4iLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXEJsb2dfQmFja1xcc3JjXFwiLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcclxuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcclxuaW1wb3J0IHVzZXJSb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvdXNlci5yb3V0ZXMnO1xyXG5pbXBvcnQgcG9zdHNSb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvcG9zdC5yb3V0ZXMnO1xyXG5pbXBvcnQgeyBhdXRoZW50aWNhdGVUb2tlbiB9IGZyb20gJy4vbWlkZGxld2FyZS9hdXRoTWlkZGxld2FyZSc7XHJcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcclxuaW1wb3J0IGZpbGVVcGxvYWQgZnJvbSAnZXhwcmVzcy1maWxldXBsb2FkJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcblxyXG5kb3RlbnYuY29uZmlnKCk7XHJcblxyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbmNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDA7XHJcblxyXG4vLyBNaWRkbGV3YXJlXHJcbmFwcC51c2UoY29ycyh7IG9yaWdpbjogXCIqXCIgfSkpO1xyXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcclxuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XHJcblxyXG4vLyBDb25maWd1cmFyIGV4cHJlc3MtZmlsZXVwbG9hZFxyXG5hcHAudXNlKGZpbGVVcGxvYWQoe1xyXG4gIGNyZWF0ZVBhcmVudFBhdGg6IHRydWUsXHJcbiAgbGltaXRzOiB7XHJcbiAgICBmaWxlU2l6ZTogNSAqIDEwMjQgKiAxMDI0LCBcclxuICB9LFxyXG59KSk7XHJcblxyXG5hcHAudXNlKCcvcGhvdG9zJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy4vcGhvdG9zJykpKTtcclxuLy8gTWlkZGxld2FyZSBwYXJhIHZlcmlmaWNhciBlbCB0b2tlbiBlbiBydXRhcyBwcm90ZWdpZGFzXHJcbmNvbnN0IHB1YmxpY1JvdXRlcyA9IFtcclxuICAnL2FwaS91c2VyL2xvZ2luJyxcclxuICAnL2FwaS91c2VyL3JlZ2lzdGVyVXNlcicsXHJcbiAgJy9hcGkvcG9zdC9nZXRQb3N0cycsXHJcbiAgLy8gJy9hcGkvcG9zdC9nZXRVc2VyUG9zdHMnLFxyXG5dO1xyXG5cclxuYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcclxuICBjb25zb2xlLmxvZyhyZXEucGF0aCk7XHJcbiAgaWYgKHB1YmxpY1JvdXRlcy5pbmNsdWRlcyhyZXEucGF0aCkpIHtcclxuICAgIHJldHVybiBuZXh0KCk7XHJcbiAgfVxyXG4gIGF1dGhlbnRpY2F0ZVRva2VuKHJlcSwgcmVzLCBuZXh0KTtcclxufSk7XHJcblxyXG4vLyBSdXRhcyBwYXJhIHVzdWFyaW9zIHkgcG9zdHNcclxuYXBwLnVzZSh1c2VyUm91dGVzKTtcclxuYXBwLnVzZShwb3N0c1JvdXRlcyk7XHJcblxyXG4vLyBNaWRkbGV3YXJlIHBhcmEgc2VydmlyIGFyY2hpdm9zIGVzdMOhdGljb3MgKGZvdG9zKVxyXG5cclxuLy8gRXNjdWNoYXIgZW4gZWwgcHVlcnRvIGRlZmluaWRvXHJcbmFwcC5saXN0ZW4oUE9SVCwgKCkgPT4gY29uc29sZS5sb2coYEFwcCBsaXN0ZW5pbmcgb24gcG9ydCAke1BPUlR9YCkpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXBwO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLEtBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLEtBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLGVBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLE9BQUEsR0FBQU4sc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFNLGtCQUFBLEdBQUFQLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTyxLQUFBLEdBQUFSLHNCQUFBLENBQUFDLE9BQUE7QUFBd0IsU0FBQUQsdUJBQUFTLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFFeEJHLGVBQU0sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFFZixNQUFNQyxHQUFHLEdBQUcsSUFBQUMsZ0JBQU8sRUFBQyxDQUFDO0FBQ3JCLE1BQU1DLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNGLElBQUksSUFBSSxJQUFJOztBQUVyQztBQUNBRixHQUFHLENBQUNLLEdBQUcsQ0FBQyxJQUFBQyxhQUFJLEVBQUM7RUFBRUMsTUFBTSxFQUFFO0FBQUksQ0FBQyxDQUFDLENBQUM7QUFDOUJQLEdBQUcsQ0FBQ0ssR0FBRyxDQUFDSixnQkFBTyxDQUFDTyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3ZCUixHQUFHLENBQUNLLEdBQUcsQ0FBQ0osZ0JBQU8sQ0FBQ1EsVUFBVSxDQUFDO0VBQUVDLFFBQVEsRUFBRTtBQUFLLENBQUMsQ0FBQyxDQUFDOztBQUUvQztBQUNBVixHQUFHLENBQUNLLEdBQUcsQ0FBQyxJQUFBTSwwQkFBVSxFQUFDO0VBQ2pCQyxnQkFBZ0IsRUFBRSxJQUFJO0VBQ3RCQyxNQUFNLEVBQUU7SUFDTkMsUUFBUSxFQUFFLENBQUMsR0FBRyxJQUFJLEdBQUc7RUFDdkI7QUFDRixDQUFDLENBQUMsQ0FBQztBQUVIZCxHQUFHLENBQUNLLEdBQUcsQ0FBQyxTQUFTLEVBQUVKLGdCQUFPLENBQUNjLE1BQU0sQ0FBQ0MsYUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDO0FBQ3BFO0FBQ0EsTUFBTUMsWUFBWSxHQUFHLENBQ25CLGlCQUFpQixFQUNqQix3QkFBd0IsRUFDeEI7QUFDQTtBQUFBLENBQ0Q7QUFFRG5CLEdBQUcsQ0FBQ0ssR0FBRyxDQUFDLENBQUNlLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDMUJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSixHQUFHLENBQUNKLElBQUksQ0FBQztFQUNyQixJQUFJRyxZQUFZLENBQUNNLFFBQVEsQ0FBQ0wsR0FBRyxDQUFDSixJQUFJLENBQUMsRUFBRTtJQUNuQyxPQUFPTSxJQUFJLENBQUMsQ0FBQztFQUNmO0VBQ0EsSUFBQUksaUNBQWlCLEVBQUNOLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLENBQUM7QUFDbkMsQ0FBQyxDQUFDOztBQUVGO0FBQ0F0QixHQUFHLENBQUNLLEdBQUcsQ0FBQ3NCLGFBQVUsQ0FBQztBQUNuQjNCLEdBQUcsQ0FBQ0ssR0FBRyxDQUFDdUIsYUFBVyxDQUFDOztBQUVwQjs7QUFFQTtBQUNBNUIsR0FBRyxDQUFDNkIsTUFBTSxDQUFDM0IsSUFBSSxFQUFFLE1BQU1xQixPQUFPLENBQUNDLEdBQUcsQ0FBQyx5QkFBeUJ0QixJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQUMsSUFBQTRCLFFBQUEsR0FBQUMsT0FBQSxDQUFBbEMsT0FBQSxHQUV0REcsR0FBRyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_express","_interopRequireDefault","require","_cors","_user","_post","_authMiddleware","_dotenv","_expressFileupload","_path","e","__esModule","default","dotenv","config","app","express","PORT","process","env","use","cors","origin","json","urlencoded","extended","fileUpload","createParentPath","limits","fileSize","static","path","join","__dirname","publicRoutes","req","res","next","console","log","includes","authenticateToken","userRoutes","postsRoutes","listen","_default","exports"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\src\\","sources":["app.js"],"sourcesContent":["import express from 'express';\r\nimport cors from \"cors\";\r\nimport userRoutes from './routes/user.routes';\r\nimport postsRoutes from './routes/post.routes';\r\nimport { authenticateToken } from './middleware/authMiddleware';\r\nimport dotenv from 'dotenv';\r\nimport fileUpload from 'express-fileupload';\r\nimport path from 'path';\r\n\r\ndotenv.config();\r\n\r\nconst app = express();\r\nconst PORT = process.env.PORT || 3000;\r\n\r\n// Middleware\r\napp.use(cors({ origin: \"*\" }));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: true }));\r\n\r\n// Configurar express-fileupload\r\napp.use(fileUpload({\r\n  createParentPath: true,\r\n  limits: {\r\n    fileSize: 5 * 1024 * 1024, \r\n  },\r\n}));\r\n\r\napp.use('/photos', express.static(path.join(__dirname, './photos')));\r\n// Middleware para verificar el token en rutas protegidas\r\nconst publicRoutes = [\r\n  '/api/user/login',\r\n  '/api/user/registerUser',\r\n  '/api/post/getPosts',\r\n  // '/api/post/getUserPosts',\r\n];\r\n\r\napp.use((req, res, next) => {\r\n  console.log(req.path);\r\n  if (publicRoutes.includes(req.path)) {\r\n    return next();\r\n  }\r\n  authenticateToken(req, res, next);\r\n});\r\n\r\n// Rutas para usuarios y posts\r\napp.use(userRoutes);\r\napp.use(postsRoutes);\r\n\r\n// Middleware para servir archivos estáticos (fotos)\r\n\r\n// Escuchar en el puerto definido\r\napp.listen(PORT, () => console.log(`App listening on port ${PORT}`));\r\n\r\nexport default app;\r\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,KAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,KAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,eAAA,GAAAJ,OAAA;AACA,IAAAK,OAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA,IAAAM,kBAAA,GAAAP,sBAAA,CAAAC,OAAA;AACA,IAAAO,KAAA,GAAAR,sBAAA,CAAAC,OAAA;AAAwB,SAAAD,uBAAAS,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAExBG,eAAM,CAACC,MAAM,CAAC,CAAC;AAEf,MAAMC,GAAG,GAAG,IAAAC,gBAAO,EAAC,CAAC;AACrB,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACF,IAAI,IAAI,IAAI;;AAErC;AACAF,GAAG,CAACK,GAAG,CAAC,IAAAC,aAAI,EAAC;EAAEC,MAAM,EAAE;AAAI,CAAC,CAAC,CAAC;AAC9BP,GAAG,CAACK,GAAG,CAACJ,gBAAO,CAACO,IAAI,CAAC,CAAC,CAAC;AACvBR,GAAG,CAACK,GAAG,CAACJ,gBAAO,CAACQ,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC;;AAE/C;AACAV,GAAG,CAACK,GAAG,CAAC,IAAAM,0BAAU,EAAC;EACjBC,gBAAgB,EAAE,IAAI;EACtBC,MAAM,EAAE;IACNC,QAAQ,EAAE,CAAC,GAAG,IAAI,GAAG;EACvB;AACF,CAAC,CAAC,CAAC;AAEHd,GAAG,CAACK,GAAG,CAAC,SAAS,EAAEJ,gBAAO,CAACc,MAAM,CAACC,aAAI,CAACC,IAAI,CAACC,SAAS,EAAE,UAAU,CAAC,CAAC,CAAC;AACpE;AACA,MAAMC,YAAY,GAAG,CACnB,iBAAiB,EACjB,wBAAwB,EACxB;AACA;AAAA,CACD;AAEDnB,GAAG,CAACK,GAAG,CAAC,CAACe,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC1BC,OAAO,CAACC,GAAG,CAACJ,GAAG,CAACJ,IAAI,CAAC;EACrB,IAAIG,YAAY,CAACM,QAAQ,CAACL,GAAG,CAACJ,IAAI,CAAC,EAAE;IACnC,OAAOM,IAAI,CAAC,CAAC;EACf;EACA,IAAAI,iCAAiB,EAACN,GAAG,EAAEC,GAAG,EAAEC,IAAI,CAAC;AACnC,CAAC,CAAC;;AAEF;AACAtB,GAAG,CAACK,GAAG,CAACsB,aAAU,CAAC;AACnB3B,GAAG,CAACK,GAAG,CAACuB,aAAW,CAAC;;AAEpB;;AAEA;AACA5B,GAAG,CAAC6B,MAAM,CAAC3B,IAAI,EAAE,MAAMqB,OAAO,CAACC,GAAG,CAAC,yBAAyBtB,IAAI,EAAE,CAAC,CAAC;AAAC,IAAA4B,QAAA,GAAAC,OAAA,CAAAlC,OAAA,GAEtDG,GAAG","ignoreList":[]}},"mtime":1718588173413},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\routes\\\\user.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _userController = require(\"../controllers/userController\");\nvar _authMiddleware = require(\"../middleware/authMiddleware\");\nconst router = (0, _express.Router)();\nrouter.post('/api/user/registerUser', _userController.registerUser);\nrouter.post('/api/user/login', _userController.login);\nrouter.post('/api/user/updateCredentials', _authMiddleware.authenticateToken, _userController.updateCredentials);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsInJlcXVpcmUiLCJfdXNlckNvbnRyb2xsZXIiLCJfYXV0aE1pZGRsZXdhcmUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwicmVnaXN0ZXJVc2VyIiwibG9naW4iLCJhdXRoZW50aWNhdGVUb2tlbiIsInVwZGF0ZUNyZWRlbnRpYWxzIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXFVUTVxcOW5vXFxXZWJfSW50ZWdyYWxcXGJsb2dfYmFja1xcQmxvZ19CYWNrXFxzcmNcXHJvdXRlc1xcIiwic291cmNlcyI6WyJ1c2VyLnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5cclxuaW1wb3J0IHsgbG9naW4sIHJlZ2lzdGVyVXNlciwgdXBkYXRlQ3JlZGVudGlhbHMgfSBmcm9tIFwiLi4vY29udHJvbGxlcnMvdXNlckNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgYXV0aGVudGljYXRlVG9rZW4gfSBmcm9tIFwiLi4vbWlkZGxld2FyZS9hdXRoTWlkZGxld2FyZVwiO1xyXG5cclxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2FwaS91c2VyL3JlZ2lzdGVyVXNlcicsIHJlZ2lzdGVyVXNlcik7XHJcbnJvdXRlci5wb3N0KCcvYXBpL3VzZXIvbG9naW4nLCBsb2dpbik7XHJcbnJvdXRlci5wb3N0KCcvYXBpL3VzZXIvdXBkYXRlQ3JlZGVudGlhbHMnLCBhdXRoZW50aWNhdGVUb2tlbiwgdXBkYXRlQ3JlZGVudGlhbHMpO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUVBLElBQUFDLGVBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLGVBQUEsR0FBQUYsT0FBQTtBQUVBLE1BQU1HLE1BQU0sR0FBRyxJQUFBQyxlQUFNLEVBQUMsQ0FBQztBQUV2QkQsTUFBTSxDQUFDRSxJQUFJLENBQUMsd0JBQXdCLEVBQUVDLDRCQUFZLENBQUM7QUFDbkRILE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLGlCQUFpQixFQUFFRSxxQkFBSyxDQUFDO0FBQ3JDSixNQUFNLENBQUNFLElBQUksQ0FBQyw2QkFBNkIsRUFBRUcsaUNBQWlCLEVBQUVDLGlDQUFpQixDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FHbEVULE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_express","require","_userController","_authMiddleware","router","Router","post","registerUser","login","authenticateToken","updateCredentials","_default","exports","default"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\src\\routes\\","sources":["user.routes.js"],"sourcesContent":["import { Router } from \"express\";\r\n\r\nimport { login, registerUser, updateCredentials } from \"../controllers/userController\";\r\nimport { authenticateToken } from \"../middleware/authMiddleware\";\r\n\r\nconst router = Router();\r\n\r\nrouter.post('/api/user/registerUser', registerUser);\r\nrouter.post('/api/user/login', login);\r\nrouter.post('/api/user/updateCredentials', authenticateToken, updateCredentials);\r\n\r\n\r\nexport default router;"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAEA,IAAAC,eAAA,GAAAD,OAAA;AACA,IAAAE,eAAA,GAAAF,OAAA;AAEA,MAAMG,MAAM,GAAG,IAAAC,eAAM,EAAC,CAAC;AAEvBD,MAAM,CAACE,IAAI,CAAC,wBAAwB,EAAEC,4BAAY,CAAC;AACnDH,MAAM,CAACE,IAAI,CAAC,iBAAiB,EAAEE,qBAAK,CAAC;AACrCJ,MAAM,CAACE,IAAI,CAAC,6BAA6B,EAAEG,iCAAiB,EAAEC,iCAAiB,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAGlET,MAAM","ignoreList":[]}},"mtime":1718371509445},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\controllers\\\\userController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateCredentials = exports.registerUser = exports.login = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _expressValidator = require(\"express-validator\");\nvar _index = require(\"../../database/index\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst registerUser = async (req, res) => {\n  console.log(req.body);\n  console.log(req.files);\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    name,\n    lastname,\n    mail,\n    password\n  } = req.body;\n  const pfp = req.files && req.files.pfp ? req.files.pfp[0] : null;\n  try {\n    const existingUser = await (0, _index.executeQuery)(_index.queries.userExist, {\n      mail\n    });\n    if (existingUser.recordset.length > 0) {\n      return res.status(400).json({\n        message: \"El correo ya está en uso\"\n      });\n    }\n    const salt = await _bcrypt.default.genSalt(10);\n    const hashedPassword = await _bcrypt.default.hash(password, salt);\n    console.log(salt);\n    const user = {\n      name,\n      lastname,\n      mail,\n      password: hashedPassword,\n      pfp,\n      status: true\n    };\n    const params = {\n      name: user.name,\n      lastname: user.lastname,\n      mail: user.mail,\n      password: user.password,\n      pfp: user.pfp ? user.pfp.buffer : Buffer.from(\"\"),\n      status: user.status\n    };\n    const result = await (0, _index.executeQuery)(_index.queries.insertUser, params);\n    const payload = {\n      user: {\n        id: result.insertId,\n        name: user.name\n      }\n    };\n    _jsonwebtoken.default.sign(payload, process.env.TOKEN, {\n      expiresIn: \"1 day\"\n    }, (err, token) => {\n      if (err) {\n        console.error(err);\n        return res.status(500).json({\n          message: \"Error signing the token\"\n        });\n      }\n      res.status(201).json({\n        message: \"success\",\n        accessToken: token\n      });\n    });\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Server Error\");\n  }\n};\nexports.registerUser = registerUser;\nconst login = async (req, res) => {\n  try {\n    const {\n      mail,\n      password\n    } = req.body;\n    const user = {\n      mail: mail,\n      password: password\n    };\n    const params = {\n      mail: user.mail,\n      password: user.password\n    };\n    if (!mail || !password) {\n      return res.status(400).json({\n        error: \"El correo y la contraseña son campos requeridos, intentelo de nuevo\"\n      });\n    }\n    const existingUser = await (0, _index.executeQuery)(_index.queries.userExist, params);\n    console.log(existingUser);\n    // console.log(existingUser.password);\n\n    if (existingUser.recordset.length === 0) {\n      console.warn(\"Error al intentar el inicio de sesion, intentelo de nuevo\");\n      return res.status(401).json({\n        error: \"xd\"\n      });\n    }\n    const _user = existingUser.recordset[0];\n    console.log(_user.password);\n    if (await _bcrypt.default.compare(password, _user.password)) {\n      res.cookie(\"session\", \"secure-session-token\", {\n        httpOnly: true,\n        secure: true\n        // sameSite: \"strict\",\n      });\n      console.log(`User ${mail} logged in successfully`);\n      const accessToken = _jsonwebtoken.default.sign({\n        userId: _user.id,\n        name: _user.name\n      }, process.env.TOKEN, {\n        //verificar \n        expiresIn: \"1h\"\n      });\n      res.json({\n        accessToken\n      });\n    } else {\n      console.warn(`Failed login attempt for correo ${mail}`);\n      response.status(401).json({\n        error: \"Invalid credentials\"\n      });\n    }\n  } catch (err) {\n    console.error(err.message);\n    throw err;\n  }\n};\nexports.login = login;\nconst updateCredentials = async (req, res) => {\n  console.log(req.body);\n  console.log(req.files);\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    name,\n    lastname,\n    mail,\n    password,\n    pfp\n  } = req.body;\n  try {\n    const existingUser = await (0, _index.executeQuery)(_index.queries.userExist, {\n      mail\n    });\n    if (existingUser.recordset.length === 0) {\n      return res.status(400).json({\n        message: `No existe el usuario ${mail}`\n      });\n    }\n    const salt = await _bcrypt.default.genSalt(10);\n    const hashedPassword = await _bcrypt.default.hash(password, salt);\n    console.log(salt);\n    const updatedUser = {\n      name,\n      lastname,\n      password: hashedPassword,\n      pfp\n    };\n    const params = {\n      name: updatedUser.name,\n      lastname: updatedUser.lastname,\n      password: updatedUser.password,\n      mail,\n      pfp: updatedUser.pfp ? updatedUser.pfp.buffer : Buffer.from(\"\")\n    };\n    const result = await (0, _index.executeQuery)(_index.queries.updateUser, params);\n    console.log(result);\n    res.status(200).send(\"User updated\");\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Server Error\");\n  }\n};\nexports.updateCredentials = updateCredentials;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYmNyeXB0IiwiX2V4cHJlc3NWYWxpZGF0b3IiLCJfaW5kZXgiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJyZWdpc3RlclVzZXIiLCJyZXEiLCJyZXMiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsImZpbGVzIiwiZXJyb3JzIiwidmFsaWRhdGlvblJlc3VsdCIsImlzRW1wdHkiLCJzdGF0dXMiLCJqc29uIiwiYXJyYXkiLCJuYW1lIiwibGFzdG5hbWUiLCJtYWlsIiwicGFzc3dvcmQiLCJwZnAiLCJleGlzdGluZ1VzZXIiLCJleGVjdXRlUXVlcnkiLCJxdWVyaWVzIiwidXNlckV4aXN0IiwicmVjb3Jkc2V0IiwibGVuZ3RoIiwibWVzc2FnZSIsInNhbHQiLCJiY3J5cHQiLCJnZW5TYWx0IiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwidXNlciIsInBhcmFtcyIsImJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJyZXN1bHQiLCJpbnNlcnRVc2VyIiwicGF5bG9hZCIsImlkIiwiaW5zZXJ0SWQiLCJqd3QiLCJzaWduIiwicHJvY2VzcyIsImVudiIsIlRPS0VOIiwiZXhwaXJlc0luIiwiZXJyIiwidG9rZW4iLCJlcnJvciIsImFjY2Vzc1Rva2VuIiwic2VuZCIsImV4cG9ydHMiLCJsb2dpbiIsIndhcm4iLCJfdXNlciIsImNvbXBhcmUiLCJjb29raWUiLCJodHRwT25seSIsInNlY3VyZSIsInVzZXJJZCIsInJlc3BvbnNlIiwidXBkYXRlQ3JlZGVudGlhbHMiLCJ1cGRhdGVkVXNlciIsInVwZGF0ZVVzZXIiXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXEJsb2dfQmFja1xcc3JjXFxjb250cm9sbGVyc1xcIiwic291cmNlcyI6WyJ1c2VyQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcbmltcG9ydCB7IHZhbGlkYXRpb25SZXN1bHQgfSBmcm9tIFwiZXhwcmVzcy12YWxpZGF0b3JcIjtcclxuaW1wb3J0IHsgdXNlckV4aXN0LCBleGVjdXRlUXVlcnksIHF1ZXJpZXMgfSBmcm9tIFwiLi4vLi4vZGF0YWJhc2UvaW5kZXhcIjtcclxuXHJcbmV4cG9ydCBjb25zdCByZWdpc3RlclVzZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zb2xlLmxvZyhyZXEuYm9keSk7XHJcbiAgY29uc29sZS5sb2cocmVxLmZpbGVzKTtcclxuICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XHJcbiAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgeyBuYW1lLCBsYXN0bmFtZSwgbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnN0IHBmcCA9IHJlcS5maWxlcyAmJiByZXEuZmlsZXMucGZwID8gcmVxLmZpbGVzLnBmcFswXSA6IG51bGw7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBleGVjdXRlUXVlcnkocXVlcmllcy51c2VyRXhpc3QsIHsgbWFpbCB9KTtcclxuICAgIGlmIChleGlzdGluZ1VzZXIucmVjb3Jkc2V0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJFbCBjb3JyZW8geWEgZXN0w6EgZW4gdXNvXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEwKTtcclxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQpO1xyXG4gICAgY29uc29sZS5sb2coc2FsdCk7XHJcblxyXG4gICAgY29uc3QgdXNlciA9IHtcclxuICAgICAgbmFtZSxcclxuICAgICAgbGFzdG5hbWUsXHJcbiAgICAgIG1haWwsXHJcbiAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcclxuICAgICAgcGZwLFxyXG4gICAgICBzdGF0dXM6IHRydWUsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgICBsYXN0bmFtZTogdXNlci5sYXN0bmFtZSxcclxuICAgICAgbWFpbDogdXNlci5tYWlsLFxyXG4gICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZCxcclxuICAgICAgcGZwOiB1c2VyLnBmcCA/IHVzZXIucGZwLmJ1ZmZlciA6IEJ1ZmZlci5mcm9tKFwiXCIpLFxyXG4gICAgICBzdGF0dXM6IHVzZXIuc3RhdHVzLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVRdWVyeShxdWVyaWVzLmluc2VydFVzZXIsIHBhcmFtcyk7XHJcblxyXG4gICAgY29uc3QgcGF5bG9hZCA9IHtcclxuICAgICAgdXNlcjoge1xyXG4gICAgICAgIGlkOiByZXN1bHQuaW5zZXJ0SWQsXHJcbiAgICAgICAgbmFtZTogdXNlci5uYW1lXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIGp3dC5zaWduKFxyXG4gICAgICBwYXlsb2FkLFxyXG4gICAgICBwcm9jZXNzLmVudi5UT0tFTixcclxuICAgICAgeyBleHBpcmVzSW46IFwiMSBkYXlcIiB9LFxyXG4gICAgICAoZXJyLCB0b2tlbikgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyb3Igc2lnbmluZyB0aGUgdG9rZW5cIiB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcInN1Y2Nlc3NcIiwgYWNjZXNzVG9rZW46IHRva2VuIH0pO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIlNlcnZlciBFcnJvclwiKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgbG9naW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgY29uc3QgdXNlciA9IHtcclxuICAgICAgbWFpbDogbWFpbCxcclxuICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgIG1haWw6IHVzZXIubWFpbCxcclxuICAgICAgcGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQsXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICghbWFpbCB8fCAhcGFzc3dvcmQpIHtcclxuICAgICAgcmV0dXJuIHJlc1xyXG4gICAgICAgIC5zdGF0dXMoNDAwKVxyXG4gICAgICAgIC5qc29uKHtcclxuICAgICAgICAgIGVycm9yOlxyXG4gICAgICAgICAgICBcIkVsIGNvcnJlbyB5IGxhIGNvbnRyYXNlw7FhIHNvbiBjYW1wb3MgcmVxdWVyaWRvcywgaW50ZW50ZWxvIGRlIG51ZXZvXCIsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHF1ZXJpZXMudXNlckV4aXN0LCBwYXJhbXMpO1xyXG4gICAgY29uc29sZS5sb2coZXhpc3RpbmdVc2VyKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKGV4aXN0aW5nVXNlci5wYXNzd29yZCk7XHJcblxyXG4gICAgaWYgKGV4aXN0aW5nVXNlci5yZWNvcmRzZXQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIGFsIGludGVudGFyIGVsIGluaWNpbyBkZSBzZXNpb24sIGludGVudGVsbyBkZSBudWV2b1wiKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwieGRcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBfdXNlciA9IGV4aXN0aW5nVXNlci5yZWNvcmRzZXRbMF07XHJcblxyXG4gICAgY29uc29sZS5sb2coX3VzZXIucGFzc3dvcmQpO1xyXG5cclxuICAgIGlmIChhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgX3VzZXIucGFzc3dvcmQpKSB7XHJcbiAgICAgIHJlcy5jb29raWUoXCJzZXNzaW9uXCIsIFwic2VjdXJlLXNlc3Npb24tdG9rZW5cIiwge1xyXG4gICAgICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgICAgIHNlY3VyZTogdHJ1ZSxcclxuICAgICAgICAvLyBzYW1lU2l0ZTogXCJzdHJpY3RcIixcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgVXNlciAke21haWx9IGxvZ2dlZCBpbiBzdWNjZXNzZnVsbHlgKTtcclxuXHJcbiAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gand0LnNpZ24oeyB1c2VySWQ6IF91c2VyLmlkICwgbmFtZTogX3VzZXIubmFtZSB9LCBwcm9jZXNzLmVudi5UT0tFTiwgeyAvL3ZlcmlmaWNhciBcclxuICAgICAgICBleHBpcmVzSW46IFwiMWhcIixcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXMuanNvbih7YWNjZXNzVG9rZW59KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIGxvZ2luIGF0dGVtcHQgZm9yIGNvcnJlbyAke21haWx9YCk7XHJcbiAgICAgIHJlc3BvbnNlLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIGNyZWRlbnRpYWxzXCIgfSk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcclxuICAgIHRocm93IGVycjtcclxuICB9XHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IHVwZGF0ZUNyZWRlbnRpYWxzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcblxyXG4gIGNvbnNvbGUubG9nKHJlcS5ib2R5KTtcclxuICBjb25zb2xlLmxvZyhyZXEuZmlsZXMpO1xyXG4gIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcclxuXHJcbiAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcclxuXHJcbiAgfVxyXG5cclxuICBjb25zdCB7IG5hbWUsIGxhc3RuYW1lLCBtYWlsLCBwYXNzd29yZCwgcGZwIH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuXHJcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBleGVjdXRlUXVlcnkocXVlcmllcy51c2VyRXhpc3QsIHsgbWFpbCB9KTtcclxuICAgIGlmIChleGlzdGluZ1VzZXIucmVjb3Jkc2V0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBgTm8gZXhpc3RlIGVsIHVzdWFyaW8gJHttYWlsfWAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEwKTtcclxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQpO1xyXG4gICAgY29uc29sZS5sb2coc2FsdCk7XHJcblxyXG4gICAgY29uc3QgdXBkYXRlZFVzZXIgPSB7XHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIGxhc3RuYW1lLFxyXG4gICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsIFxyXG4gICAgICBwZnAgXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICBuYW1lOiB1cGRhdGVkVXNlci5uYW1lLFxyXG4gICAgICBsYXN0bmFtZTogdXBkYXRlZFVzZXIubGFzdG5hbWUsXHJcbiAgICAgIHBhc3N3b3JkOiB1cGRhdGVkVXNlci5wYXNzd29yZCxcclxuICAgICAgbWFpbCxcclxuICAgICAgcGZwOiB1cGRhdGVkVXNlci5wZnAgPyB1cGRhdGVkVXNlci5wZnAuYnVmZmVyIDogQnVmZmVyLmZyb20oXCJcIiksXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHF1ZXJpZXMudXBkYXRlVXNlciwgcGFyYW1zKTtcclxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChcIlVzZXIgdXBkYXRlZFwiKTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcblxyXG4gICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIlNlcnZlciBFcnJvclwiKTtcclxuXHJcbiAgfVxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLGlCQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxNQUFBLEdBQUFILE9BQUE7QUFBd0UsU0FBQUQsdUJBQUFLLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFF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","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_bcrypt","_expressValidator","_index","e","__esModule","default","registerUser","req","res","console","log","body","files","errors","validationResult","isEmpty","status","json","array","name","lastname","mail","password","pfp","existingUser","executeQuery","queries","userExist","recordset","length","message","salt","bcrypt","genSalt","hashedPassword","hash","user","params","buffer","Buffer","from","result","insertUser","payload","id","insertId","jwt","sign","process","env","TOKEN","expiresIn","err","token","error","accessToken","send","exports","login","warn","_user","compare","cookie","httpOnly","secure","userId","response","updateCredentials","updatedUser","updateUser"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\src\\controllers\\","sources":["userController.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\r\nimport bcrypt from \"bcrypt\";\r\nimport { validationResult } from \"express-validator\";\r\nimport { userExist, executeQuery, queries } from \"../../database/index\";\r\n\r\nexport const registerUser = async (req, res) => {\r\n  console.log(req.body);\r\n  console.log(req.files);\r\n  const errors = validationResult(req);\r\n  if (!errors.isEmpty()) {\r\n    return res.status(400).json({ errors: errors.array() });\r\n  }\r\n\r\n  const { name, lastname, mail, password } = req.body;\r\n  const pfp = req.files && req.files.pfp ? req.files.pfp[0] : null;\r\n\r\n  try {\r\n    const existingUser = await executeQuery(queries.userExist, { mail });\r\n    if (existingUser.recordset.length > 0) {\r\n      return res.status(400).json({ message: \"El correo ya está en uso\" });\r\n    }\r\n\r\n    const salt = await bcrypt.genSalt(10);\r\n    const hashedPassword = await bcrypt.hash(password, salt);\r\n    console.log(salt);\r\n\r\n    const user = {\r\n      name,\r\n      lastname,\r\n      mail,\r\n      password: hashedPassword,\r\n      pfp,\r\n      status: true,\r\n    };\r\n\r\n    const params = {\r\n      name: user.name,\r\n      lastname: user.lastname,\r\n      mail: user.mail,\r\n      password: user.password,\r\n      pfp: user.pfp ? user.pfp.buffer : Buffer.from(\"\"),\r\n      status: user.status,\r\n    };\r\n    const result = await executeQuery(queries.insertUser, params);\r\n\r\n    const payload = {\r\n      user: {\r\n        id: result.insertId,\r\n        name: user.name\r\n      },\r\n    };\r\n\r\n    jwt.sign(\r\n      payload,\r\n      process.env.TOKEN,\r\n      { expiresIn: \"1 day\" },\r\n      (err, token) => {\r\n        if (err) {\r\n          console.error(err);\r\n          return res.status(500).json({ message: \"Error signing the token\" });\r\n        }\r\n        res.status(201).json({ message: \"success\", accessToken: token });\r\n      }\r\n    );\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    res.status(500).send(\"Server Error\");\r\n  }\r\n};\r\n\r\nexport const login = async (req, res) => {\r\n  try {\r\n    const { mail, password } = req.body;\r\n\r\n    const user = {\r\n      mail: mail,\r\n      password: password,\r\n    };\r\n\r\n    const params = {\r\n      mail: user.mail,\r\n      password: user.password,\r\n    };\r\n\r\n    if (!mail || !password) {\r\n      return res\r\n        .status(400)\r\n        .json({\r\n          error:\r\n            \"El correo y la contraseña son campos requeridos, intentelo de nuevo\",\r\n        });\r\n    }\r\n\r\n    const existingUser = await executeQuery(queries.userExist, params);\r\n    console.log(existingUser);\r\n    // console.log(existingUser.password);\r\n\r\n    if (existingUser.recordset.length === 0) {\r\n      console.warn(\"Error al intentar el inicio de sesion, intentelo de nuevo\");\r\n      return res.status(401).json({ error: \"xd\" });\r\n    }\r\n\r\n    const _user = existingUser.recordset[0];\r\n\r\n    console.log(_user.password);\r\n\r\n    if (await bcrypt.compare(password, _user.password)) {\r\n      res.cookie(\"session\", \"secure-session-token\", {\r\n        httpOnly: true,\r\n        secure: true,\r\n        // sameSite: \"strict\",\r\n      });\r\n\r\n      console.log(`User ${mail} logged in successfully`);\r\n\r\n      const accessToken = jwt.sign({ userId: _user.id , name: _user.name }, process.env.TOKEN, { //verificar \r\n        expiresIn: \"1h\",\r\n      });\r\n\r\n      res.json({accessToken});\r\n    } else {\r\n      console.warn(`Failed login attempt for correo ${mail}`);\r\n      response.status(401).json({ error: \"Invalid credentials\" });\r\n    }\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    throw err;\r\n  }\r\n};\r\n\r\n\r\nexport const updateCredentials = async (req, res) => {\r\n\r\n  console.log(req.body);\r\n  console.log(req.files);\r\n  const errors = validationResult(req);\r\n\r\n  if (!errors.isEmpty()) {\r\n\r\n    return res.status(400).json({ errors: errors.array() });\r\n\r\n  }\r\n\r\n  const { name, lastname, mail, password, pfp } = req.body;\r\n\r\n  try {\r\n\r\n    const existingUser = await executeQuery(queries.userExist, { mail });\r\n    if (existingUser.recordset.length === 0) {\r\n      return res.status(400).json({ message: `No existe el usuario ${mail}` });\r\n    }\r\n\r\n    const salt = await bcrypt.genSalt(10);\r\n    const hashedPassword = await bcrypt.hash(password, salt);\r\n    console.log(salt);\r\n\r\n    const updatedUser = {\r\n      name,\r\n      lastname,\r\n      password: hashedPassword, \r\n      pfp \r\n    }\r\n\r\n    const params = {\r\n      name: updatedUser.name,\r\n      lastname: updatedUser.lastname,\r\n      password: updatedUser.password,\r\n      mail,\r\n      pfp: updatedUser.pfp ? updatedUser.pfp.buffer : Buffer.from(\"\"),\r\n    };\r\n    const result = await executeQuery(queries.updateUser, params);\r\n    console.log(result);\r\n    res.status(200).send(\"User updated\");\r\n\r\n  } catch (err) {\r\n\r\n    console.error(err.message);\r\n    res.status(500).send(\"Server Error\");\r\n\r\n  }\r\n};\r\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,iBAAA,GAAAF,OAAA;AACA,IAAAG,MAAA,GAAAH,OAAA;AAAwE,SAAAD,uBAAAK,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEjE,MAAMG,YAAY,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;EAC9CC,OAAO,CAACC,GAAG,CAACH,GAAG,CAACI,IAAI,CAAC;EACrBF,OAAO,CAACC,GAAG,CAACH,GAAG,CAACK,KAAK,CAAC;EACtB,MAAMC,MAAM,GAAG,IAAAC,kCAAgB,EAACP,GAAG,CAAC;EACpC,IAAI,CAACM,MAAM,CAACE,OAAO,CAAC,CAAC,EAAE;IACrB,OAAOP,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEJ,MAAM,EAAEA,MAAM,CAACK,KAAK,CAAC;IAAE,CAAC,CAAC;EACzD;EAEA,MAAM;IAAEC,IAAI;IAAEC,QAAQ;IAAEC,IAAI;IAAEC;EAAS,CAAC,GAAGf,GAAG,CAACI,IAAI;EACnD,MAAMY,GAAG,GAAGhB,GAAG,CAACK,KAAK,IAAIL,GAAG,CAACK,KAAK,CAACW,GAAG,GAAGhB,GAAG,CAACK,KAAK,CAACW,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI;EAEhE,IAAI;IACF,MAAMC,YAAY,GAAG,MAAM,IAAAC,mBAAY,EAACC,cAAO,CAACC,SAAS,EAAE;MAAEN;IAAK,CAAC,CAAC;IACpE,IAAIG,YAAY,CAACI,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;MACrC,OAAOrB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEa,OAAO,EAAE;MAA2B,CAAC,CAAC;IACtE;IAEA,MAAMC,IAAI,GAAG,MAAMC,eAAM,CAACC,OAAO,CAAC,EAAE,CAAC;IACrC,MAAMC,cAAc,GAAG,MAAMF,eAAM,CAACG,IAAI,CAACb,QAAQ,EAAES,IAAI,CAAC;IACxDtB,OAAO,CAACC,GAAG,CAACqB,IAAI,CAAC;IAEjB,MAAMK,IAAI,GAAG;MACXjB,IAAI;MACJC,QAAQ;MACRC,IAAI;MACJC,QAAQ,EAAEY,cAAc;MACxBX,GAAG;MACHP,MAAM,EAAE;IACV,CAAC;IAED,MAAMqB,MAAM,GAAG;MACblB,IAAI,EAAEiB,IAAI,CAACjB,IAAI;MACfC,QAAQ,EAAEgB,IAAI,CAAChB,QAAQ;MACvBC,IAAI,EAAEe,IAAI,CAACf,IAAI;MACfC,QAAQ,EAAEc,IAAI,CAACd,QAAQ;MACvBC,GAAG,EAAEa,IAAI,CAACb,GAAG,GAAGa,IAAI,CAACb,GAAG,CAACe,MAAM,GAAGC,MAAM,CAACC,IAAI,CAAC,EAAE,CAAC;MACjDxB,MAAM,EAAEoB,IAAI,CAACpB;IACf,CAAC;IACD,MAAMyB,MAAM,GAAG,MAAM,IAAAhB,mBAAY,EAACC,cAAO,CAACgB,UAAU,EAAEL,MAAM,CAAC;IAE7D,MAAMM,OAAO,GAAG;MACdP,IAAI,EAAE;QACJQ,EAAE,EAAEH,MAAM,CAACI,QAAQ;QACnB1B,IAAI,EAAEiB,IAAI,CAACjB;MACb;IACF,CAAC;IAED2B,qBAAG,CAACC,IAAI,CACNJ,OAAO,EACPK,OAAO,CAACC,GAAG,CAACC,KAAK,EACjB;MAAEC,SAAS,EAAE;IAAQ,CAAC,EACtB,CAACC,GAAG,EAAEC,KAAK,KAAK;MACd,IAAID,GAAG,EAAE;QACP3C,OAAO,CAAC6C,KAAK,CAACF,GAAG,CAAC;QAClB,OAAO5C,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEa,OAAO,EAAE;QAA0B,CAAC,CAAC;MACrE;MACAtB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEa,OAAO,EAAE,SAAS;QAAEyB,WAAW,EAAEF;MAAM,CAAC,CAAC;IAClE,CACF,CAAC;EACH,CAAC,CAAC,OAAOD,GAAG,EAAE;IACZ3C,OAAO,CAAC6C,KAAK,CAACF,GAAG,CAACtB,OAAO,CAAC;IAC1BtB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACwC,IAAI,CAAC,cAAc,CAAC;EACtC;AACF,CAAC;AAACC,OAAA,CAAAnD,YAAA,GAAAA,YAAA;AAEK,MAAMoD,KAAK,GAAG,MAAAA,CAAOnD,GAAG,EAAEC,GAAG,KAAK;EACvC,IAAI;IACF,MAAM;MAAEa,IAAI;MAAEC;IAAS,CAAC,GAAGf,GAAG,CAACI,IAAI;IAEnC,MAAMyB,IAAI,GAAG;MACXf,IAAI,EAAEA,IAAI;MACVC,QAAQ,EAAEA;IACZ,CAAC;IAED,MAAMe,MAAM,GAAG;MACbhB,IAAI,EAAEe,IAAI,CAACf,IAAI;MACfC,QAAQ,EAAEc,IAAI,CAACd;IACjB,CAAC;IAED,IAAI,CAACD,IAAI,IAAI,CAACC,QAAQ,EAAE;MACtB,OAAOd,GAAG,CACPQ,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;QACJqC,KAAK,EACH;MACJ,CAAC,CAAC;IACN;IAEA,MAAM9B,YAAY,GAAG,MAAM,IAAAC,mBAAY,EAACC,cAAO,CAACC,SAAS,EAAEU,MAAM,CAAC;IAClE5B,OAAO,CAACC,GAAG,CAACc,YAAY,CAAC;IACzB;;IAEA,IAAIA,YAAY,CAACI,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE;MACvCpB,OAAO,CAACkD,IAAI,CAAC,2DAA2D,CAAC;MACzE,OAAOnD,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEqC,KAAK,EAAE;MAAK,CAAC,CAAC;IAC9C;IAEA,MAAMM,KAAK,GAAGpC,YAAY,CAACI,SAAS,CAAC,CAAC,CAAC;IAEvCnB,OAAO,CAACC,GAAG,CAACkD,KAAK,CAACtC,QAAQ,CAAC;IAE3B,IAAI,MAAMU,eAAM,CAAC6B,OAAO,CAACvC,QAAQ,EAAEsC,KAAK,CAACtC,QAAQ,CAAC,EAAE;MAClDd,GAAG,CAACsD,MAAM,CAAC,SAAS,EAAE,sBAAsB,EAAE;QAC5CC,QAAQ,EAAE,IAAI;QACdC,MAAM,EAAE;QACR;MACF,CAAC,CAAC;MAEFvD,OAAO,CAACC,GAAG,CAAC,QAAQW,IAAI,yBAAyB,CAAC;MAElD,MAAMkC,WAAW,GAAGT,qBAAG,CAACC,IAAI,CAAC;QAAEkB,MAAM,EAAEL,KAAK,CAAChB,EAAE;QAAGzB,IAAI,EAAEyC,KAAK,CAACzC;MAAK,CAAC,EAAE6B,OAAO,CAACC,GAAG,CAACC,KAAK,EAAE;QAAE;QACzFC,SAAS,EAAE;MACb,CAAC,CAAC;MAEF3C,GAAG,CAACS,IAAI,CAAC;QAACsC;MAAW,CAAC,CAAC;IACzB,CAAC,MAAM;MACL9C,OAAO,CAACkD,IAAI,CAAC,mCAAmCtC,IAAI,EAAE,CAAC;MACvD6C,QAAQ,CAAClD,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEqC,KAAK,EAAE;MAAsB,CAAC,CAAC;IAC7D;EACF,CAAC,CAAC,OAAOF,GAAG,EAAE;IACZ3C,OAAO,CAAC6C,KAAK,CAACF,GAAG,CAACtB,OAAO,CAAC;IAC1B,MAAMsB,GAAG;EACX;AACF,CAAC;AAACK,OAAA,CAAAC,KAAA,GAAAA,KAAA;AAGK,MAAMS,iBAAiB,GAAG,MAAAA,CAAO5D,GAAG,EAAEC,GAAG,KAAK;EAEnDC,OAAO,CAACC,GAAG,CAACH,GAAG,CAACI,IAAI,CAAC;EACrBF,OAAO,CAACC,GAAG,CAACH,GAAG,CAACK,KAAK,CAAC;EACtB,MAAMC,MAAM,GAAG,IAAAC,kCAAgB,EAACP,GAAG,CAAC;EAEpC,IAAI,CAACM,MAAM,CAACE,OAAO,CAAC,CAAC,EAAE;IAErB,OAAOP,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEJ,MAAM,EAAEA,MAAM,CAACK,KAAK,CAAC;IAAE,CAAC,CAAC;EAEzD;EAEA,MAAM;IAAEC,IAAI;IAAEC,QAAQ;IAAEC,IAAI;IAAEC,QAAQ;IAAEC;EAAI,CAAC,GAAGhB,GAAG,CAACI,IAAI;EAExD,IAAI;IAEF,MAAMa,YAAY,GAAG,MAAM,IAAAC,mBAAY,EAACC,cAAO,CAACC,SAAS,EAAE;MAAEN;IAAK,CAAC,CAAC;IACpE,IAAIG,YAAY,CAACI,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE;MACvC,OAAOrB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEa,OAAO,EAAE,wBAAwBT,IAAI;MAAG,CAAC,CAAC;IAC1E;IAEA,MAAMU,IAAI,GAAG,MAAMC,eAAM,CAACC,OAAO,CAAC,EAAE,CAAC;IACrC,MAAMC,cAAc,GAAG,MAAMF,eAAM,CAACG,IAAI,CAACb,QAAQ,EAAES,IAAI,CAAC;IACxDtB,OAAO,CAACC,GAAG,CAACqB,IAAI,CAAC;IAEjB,MAAMqC,WAAW,GAAG;MAClBjD,IAAI;MACJC,QAAQ;MACRE,QAAQ,EAAEY,cAAc;MACxBX;IACF,CAAC;IAED,MAAMc,MAAM,GAAG;MACblB,IAAI,EAAEiD,WAAW,CAACjD,IAAI;MACtBC,QAAQ,EAAEgD,WAAW,CAAChD,QAAQ;MAC9BE,QAAQ,EAAE8C,WAAW,CAAC9C,QAAQ;MAC9BD,IAAI;MACJE,GAAG,EAAE6C,WAAW,CAAC7C,GAAG,GAAG6C,WAAW,CAAC7C,GAAG,CAACe,MAAM,GAAGC,MAAM,CAACC,IAAI,CAAC,EAAE;IAChE,CAAC;IACD,MAAMC,MAAM,GAAG,MAAM,IAAAhB,mBAAY,EAACC,cAAO,CAAC2C,UAAU,EAAEhC,MAAM,CAAC;IAC7D5B,OAAO,CAACC,GAAG,CAAC+B,MAAM,CAAC;IACnBjC,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACwC,IAAI,CAAC,cAAc,CAAC;EAEtC,CAAC,CAAC,OAAOJ,GAAG,EAAE;IAEZ3C,OAAO,CAAC6C,KAAK,CAACF,GAAG,CAACtB,OAAO,CAAC;IAC1BtB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACwC,IAAI,CAAC,cAAc,CAAC;EAEtC;AACF,CAAC;AAACC,OAAA,CAAAU,iBAAA,GAAAA,iBAAA","ignoreList":[]}},"mtime":1718562942354},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\database\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.executeQuery = void 0;\nObject.defineProperty(exports, \"queries\", {\n  enumerable: true,\n  get: function () {\n    return _querys.queries;\n  }\n});\nvar _connection = require(\"./connection\");\nvar _mssql = _interopRequireDefault(require(\"mssql\"));\nvar _querys = require(\"./querys\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst executeQuery = async (query, params) => {\n  try {\n    const pool = await (0, _connection.getConnection)();\n    const request = pool.request();\n\n    // Añade cada parámetro al objeto de solicitud\n    for (let key in params) {\n      if (key === \"pfp\" && params[key] !== null) {\n        // Convierte 'pfp' a un Buffer antes de pasarlo a la consulta\n        request.input(key, _mssql.default.VarBinary(_mssql.default.MAX), Buffer.from(params[key].buffer));\n      } else if (key === \"picture\" && params[key] !== null) {\n        // Si 'picture' es un objeto con una propiedad 'buffer', conviértelo a un Buffer\n        // De lo contrario, asume que es un string y pásalo tal cual\n        if (params[key].buffer) {\n          request.input(key, _mssql.default.VarBinary(_mssql.default.MAX), Buffer.from(params[key].buffer));\n        } else {\n          request.input(key, params[key]);\n        }\n      } else {\n        // Agrega el parámetro como está si no es 'pfp' ni 'picture'\n        request.input(key, params[key]);\n      }\n    }\n    const result = await request.query(query);\n    return result;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n};\nexports.executeQuery = executeQuery;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29ubmVjdGlvbiIsInJlcXVpcmUiLCJfbXNzcWwiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3F1ZXJ5cyIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImV4ZWN1dGVRdWVyeSIsInF1ZXJ5IiwicGFyYW1zIiwicG9vbCIsImdldENvbm5lY3Rpb24iLCJyZXF1ZXN0Iiwia2V5IiwiaW5wdXQiLCJzcWwiLCJWYXJCaW5hcnkiLCJNQVgiLCJCdWZmZXIiLCJmcm9tIiwiYnVmZmVyIiwicmVzdWx0IiwiZXJyb3IiLCJjb25zb2xlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFVUTVxcOW5vXFxXZWJfSW50ZWdyYWxcXGJsb2dfYmFja1xcQmxvZ19CYWNrXFxkYXRhYmFzZVxcIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDb25uZWN0aW9uIH0gZnJvbSBcIi4vY29ubmVjdGlvblwiO1xyXG5pbXBvcnQgc3FsIGZyb20gXCJtc3NxbFwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGV4ZWN1dGVRdWVyeSA9IGFzeW5jIChxdWVyeSwgcGFyYW1zKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBvb2wgPSBhd2FpdCBnZXRDb25uZWN0aW9uKCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gcG9vbC5yZXF1ZXN0KCk7XHJcblxyXG4gICAgLy8gQcOxYWRlIGNhZGEgcGFyw6FtZXRybyBhbCBvYmpldG8gZGUgc29saWNpdHVkXHJcbiAgICBmb3IgKGxldCBrZXkgaW4gcGFyYW1zKSB7XHJcbiAgICAgIGlmIChrZXkgPT09IFwicGZwXCIgJiYgcGFyYW1zW2tleV0gIT09IG51bGwpIHtcclxuICAgICAgICAvLyBDb252aWVydGUgJ3BmcCcgYSB1biBCdWZmZXIgYW50ZXMgZGUgcGFzYXJsbyBhIGxhIGNvbnN1bHRhXHJcbiAgICAgICAgcmVxdWVzdC5pbnB1dChrZXksIHNxbC5WYXJCaW5hcnkoc3FsLk1BWCksIEJ1ZmZlci5mcm9tKHBhcmFtc1trZXldLmJ1ZmZlcikpO1xyXG4gICAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJwaWN0dXJlXCIgJiYgcGFyYW1zW2tleV0gIT09IG51bGwpIHtcclxuICAgICAgICAvLyBTaSAncGljdHVyZScgZXMgdW4gb2JqZXRvIGNvbiB1bmEgcHJvcGllZGFkICdidWZmZXInLCBjb252acOpcnRlbG8gYSB1biBCdWZmZXJcclxuICAgICAgICAvLyBEZSBsbyBjb250cmFyaW8sIGFzdW1lIHF1ZSBlcyB1biBzdHJpbmcgeSBww6FzYWxvIHRhbCBjdWFsXHJcbiAgICAgICAgaWYgKHBhcmFtc1trZXldLmJ1ZmZlcikge1xyXG4gICAgICAgICAgcmVxdWVzdC5pbnB1dChrZXksIHNxbC5WYXJCaW5hcnkoc3FsLk1BWCksIEJ1ZmZlci5mcm9tKHBhcmFtc1trZXldLmJ1ZmZlcikpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXF1ZXN0LmlucHV0KGtleSwgcGFyYW1zW2tleV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBBZ3JlZ2EgZWwgcGFyw6FtZXRybyBjb21vIGVzdMOhIHNpIG5vIGVzICdwZnAnIG5pICdwaWN0dXJlJ1xyXG4gICAgICAgIHJlcXVlc3QuaW5wdXQoa2V5LCBwYXJhbXNba2V5XSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXF1ZXN0LnF1ZXJ5KHF1ZXJ5KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbmV4cG9ydCB7IHF1ZXJpZXMgfSBmcm9tIFwiLi9xdWVyeXNcIjtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxXQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFtQ0EsSUFBQUcsT0FBQSxHQUFBSCxPQUFBO0FBQW1DLFNBQUFFLHVCQUFBRSxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBakM1QixNQUFNRyxZQUFZLEdBQUcsTUFBQUEsQ0FBT0MsS0FBSyxFQUFFQyxNQUFNLEtBQUs7RUFDbkQsSUFBSTtJQUNGLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFDLHlCQUFhLEVBQUMsQ0FBQztJQUNsQyxNQUFNQyxPQUFPLEdBQUdGLElBQUksQ0FBQ0UsT0FBTyxDQUFDLENBQUM7O0lBRTlCO0lBQ0EsS0FBSyxJQUFJQyxHQUFHLElBQUlKLE1BQU0sRUFBRTtNQUN0QixJQUFJSSxHQUFHLEtBQUssS0FBSyxJQUFJSixNQUFNLENBQUNJLEdBQUcsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUN6QztRQUNBRCxPQUFPLENBQUNFLEtBQUssQ0FBQ0QsR0FBRyxFQUFFRSxjQUFHLENBQUNDLFNBQVMsQ0FBQ0QsY0FBRyxDQUFDRSxHQUFHLENBQUMsRUFBRUMsTUFBTSxDQUFDQyxJQUFJLENBQUNWLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLENBQUNPLE1BQU0sQ0FBQyxDQUFDO01BQzdFLENBQUMsTUFBTSxJQUFJUCxHQUFHLEtBQUssU0FBUyxJQUFJSixNQUFNLENBQUNJLEdBQUcsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNwRDtRQUNBO1FBQ0EsSUFBSUosTUFBTSxDQUFDSSxHQUFHLENBQUMsQ0FBQ08sTUFBTSxFQUFFO1VBQ3RCUixPQUFPLENBQUNFLEtBQUssQ0FBQ0QsR0FBRyxFQUFFRSxjQUFHLENBQUNDLFNBQVMsQ0FBQ0QsY0FBRyxDQUFDRSxHQUFHLENBQUMsRUFBRUMsTUFBTSxDQUFDQyxJQUFJLENBQUNWLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLENBQUNPLE1BQU0sQ0FBQyxDQUFDO1FBQzdFLENBQUMsTUFBTTtVQUNMUixPQUFPLENBQUNFLEtBQUssQ0FBQ0QsR0FBRyxFQUFFSixNQUFNLENBQUNJLEdBQUcsQ0FBQyxDQUFDO1FBQ2pDO01BQ0YsQ0FBQyxNQUFNO1FBQ0w7UUFDQUQsT0FBTyxDQUFDRSxLQUFLLENBQUNELEdBQUcsRUFBRUosTUFBTSxDQUFDSSxHQUFHLENBQUMsQ0FBQztNQUNqQztJQUNGO0lBRUEsTUFBTVEsTUFBTSxHQUFHLE1BQU1ULE9BQU8sQ0FBQ0osS0FBSyxDQUFDQSxLQUFLLENBQUM7SUFDekMsT0FBT2EsTUFBTTtFQUNmLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFDZEMsT0FBTyxDQUFDRCxLQUFLLENBQUNBLEtBQUssQ0FBQztJQUNwQixNQUFNQSxLQUFLO0VBQ2I7QUFDRixDQUFDO0FBQUNFLE9BQUEsQ0FBQWpCLFlBQUEsR0FBQUEsWUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_connection","require","_mssql","_interopRequireDefault","_querys","e","__esModule","default","executeQuery","query","params","pool","getConnection","request","key","input","sql","VarBinary","MAX","Buffer","from","buffer","result","error","console","exports"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\database\\","sources":["index.js"],"sourcesContent":["import { getConnection } from \"./connection\";\r\nimport sql from \"mssql\";\r\n\r\nexport const executeQuery = async (query, params) => {\r\n  try {\r\n    const pool = await getConnection();\r\n    const request = pool.request();\r\n\r\n    // Añade cada parámetro al objeto de solicitud\r\n    for (let key in params) {\r\n      if (key === \"pfp\" && params[key] !== null) {\r\n        // Convierte 'pfp' a un Buffer antes de pasarlo a la consulta\r\n        request.input(key, sql.VarBinary(sql.MAX), Buffer.from(params[key].buffer));\r\n      } else if (key === \"picture\" && params[key] !== null) {\r\n        // Si 'picture' es un objeto con una propiedad 'buffer', conviértelo a un Buffer\r\n        // De lo contrario, asume que es un string y pásalo tal cual\r\n        if (params[key].buffer) {\r\n          request.input(key, sql.VarBinary(sql.MAX), Buffer.from(params[key].buffer));\r\n        } else {\r\n          request.input(key, params[key]);\r\n        }\r\n      } else {\r\n        // Agrega el parámetro como está si no es 'pfp' ni 'picture'\r\n        request.input(key, params[key]);\r\n      }\r\n    }\r\n\r\n    const result = await request.query(query);\r\n    return result;\r\n  } catch (error) {\r\n    console.error(error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n\r\nexport { queries } from \"./querys\";\r\n"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,WAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAC,sBAAA,CAAAF,OAAA;AAmCA,IAAAG,OAAA,GAAAH,OAAA;AAAmC,SAAAE,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAjC5B,MAAMG,YAAY,GAAG,MAAAA,CAAOC,KAAK,EAAEC,MAAM,KAAK;EACnD,IAAI;IACF,MAAMC,IAAI,GAAG,MAAM,IAAAC,yBAAa,EAAC,CAAC;IAClC,MAAMC,OAAO,GAAGF,IAAI,CAACE,OAAO,CAAC,CAAC;;IAE9B;IACA,KAAK,IAAIC,GAAG,IAAIJ,MAAM,EAAE;MACtB,IAAII,GAAG,KAAK,KAAK,IAAIJ,MAAM,CAACI,GAAG,CAAC,KAAK,IAAI,EAAE;QACzC;QACAD,OAAO,CAACE,KAAK,CAACD,GAAG,EAAEE,cAAG,CAACC,SAAS,CAACD,cAAG,CAACE,GAAG,CAAC,EAAEC,MAAM,CAACC,IAAI,CAACV,MAAM,CAACI,GAAG,CAAC,CAACO,MAAM,CAAC,CAAC;MAC7E,CAAC,MAAM,IAAIP,GAAG,KAAK,SAAS,IAAIJ,MAAM,CAACI,GAAG,CAAC,KAAK,IAAI,EAAE;QACpD;QACA;QACA,IAAIJ,MAAM,CAACI,GAAG,CAAC,CAACO,MAAM,EAAE;UACtBR,OAAO,CAACE,KAAK,CAACD,GAAG,EAAEE,cAAG,CAACC,SAAS,CAACD,cAAG,CAACE,GAAG,CAAC,EAAEC,MAAM,CAACC,IAAI,CAACV,MAAM,CAACI,GAAG,CAAC,CAACO,MAAM,CAAC,CAAC;QAC7E,CAAC,MAAM;UACLR,OAAO,CAACE,KAAK,CAACD,GAAG,EAAEJ,MAAM,CAACI,GAAG,CAAC,CAAC;QACjC;MACF,CAAC,MAAM;QACL;QACAD,OAAO,CAACE,KAAK,CAACD,GAAG,EAAEJ,MAAM,CAACI,GAAG,CAAC,CAAC;MACjC;IACF;IAEA,MAAMQ,MAAM,GAAG,MAAMT,OAAO,CAACJ,KAAK,CAACA,KAAK,CAAC;IACzC,OAAOa,MAAM;EACf,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACpB,MAAMA,KAAK;EACb;AACF,CAAC;AAACE,OAAA,CAAAjB,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1718402302502},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\database\\\\connection.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getConnection = getConnection;\nObject.defineProperty(exports, \"sql\", {\n  enumerable: true,\n  get: function () {\n    return _mssql.default;\n  }\n});\nvar _mssql = _interopRequireDefault(require(\"mssql\"));\nvar _config = _interopRequireDefault(require(\"../config\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst sqlConfig = {\n  user: _config.default.dbUser,\n  password: _config.default.dbPassword,\n  server: _config.default.dbServer,\n  database: _config.default.dbDatabase,\n  options: {\n    encrypt: true,\n    trustServerCertificate: true\n  }\n};\nasync function getConnection() {\n  try {\n    const pool = await _mssql.default.connect(sqlConfig);\n    return pool;\n  } catch (e) {\n    console.log(e);\n    throw e;\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbXNzcWwiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jb25maWciLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJzcWxDb25maWciLCJ1c2VyIiwiY29uZmlnIiwiZGJVc2VyIiwicGFzc3dvcmQiLCJkYlBhc3N3b3JkIiwic2VydmVyIiwiZGJTZXJ2ZXIiLCJkYXRhYmFzZSIsImRiRGF0YWJhc2UiLCJvcHRpb25zIiwiZW5jcnlwdCIsInRydXN0U2VydmVyQ2VydGlmaWNhdGUiLCJnZXRDb25uZWN0aW9uIiwicG9vbCIsInNxbCIsImNvbm5lY3QiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiJEOlxcVVRNXFw5bm9cXFdlYl9JbnRlZ3JhbFxcYmxvZ19iYWNrXFxCbG9nX0JhY2tcXGRhdGFiYXNlXFwiLCJzb3VyY2VzIjpbImNvbm5lY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNxbCBmcm9tICdtc3NxbCc7XHJcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnJ1xyXG5cclxuY29uc3Qgc3FsQ29uZmlnID0ge1xyXG4gICAgdXNlcjogY29uZmlnLmRiVXNlcixcclxuICAgIHBhc3N3b3JkOiBjb25maWcuZGJQYXNzd29yZCxcclxuICAgIHNlcnZlcjogY29uZmlnLmRiU2VydmVyLFxyXG4gICAgZGF0YWJhc2U6IGNvbmZpZy5kYkRhdGFiYXNlLFxyXG4gICAgb3B0aW9uczoge1xyXG4gICAgICAgIGVuY3J5cHQ6IHRydWUsXHJcbiAgICAgICAgdHJ1c3RTZXJ2ZXJDZXJ0aWZpY2F0ZTogdHJ1ZVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbm5lY3Rpb24oKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBvb2wgPSBhd2FpdCBzcWwuY29ubmVjdChzcWxDb25maWcpO1xyXG4gICAgICAgIHJldHVybiBwb29sO1xyXG4gICAgICAgIFxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7c3FsfSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQThCLFNBQUFELHVCQUFBRyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRTlCLE1BQU1HLFNBQVMsR0FBRztFQUNkQyxJQUFJLEVBQUVDLGVBQU0sQ0FBQ0MsTUFBTTtFQUNuQkMsUUFBUSxFQUFFRixlQUFNLENBQUNHLFVBQVU7RUFDM0JDLE1BQU0sRUFBRUosZUFBTSxDQUFDSyxRQUFRO0VBQ3ZCQyxRQUFRLEVBQUVOLGVBQU0sQ0FBQ08sVUFBVTtFQUMzQkMsT0FBTyxFQUFFO0lBQ0xDLE9BQU8sRUFBRSxJQUFJO0lBQ2JDLHNCQUFzQixFQUFFO0VBQzVCO0FBQ0osQ0FBQztBQUdNLGVBQWVDLGFBQWFBLENBQUEsRUFBRztFQUNsQyxJQUFJO0lBQ0EsTUFBTUMsSUFBSSxHQUFHLE1BQU1DLGNBQUcsQ0FBQ0MsT0FBTyxDQUFDaEIsU0FBUyxDQUFDO0lBQ3pDLE9BQU9jLElBQUk7RUFFZixDQUFDLENBQUMsT0FBT2pCLENBQUMsRUFBRTtJQUNSb0IsT0FBTyxDQUFDQyxHQUFHLENBQUNyQixDQUFDLENBQUM7SUFDZCxNQUFNQSxDQUFDO0VBQ1g7QUFDSiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_mssql","_interopRequireDefault","require","_config","e","__esModule","default","sqlConfig","user","config","dbUser","password","dbPassword","server","dbServer","database","dbDatabase","options","encrypt","trustServerCertificate","getConnection","pool","sql","connect","console","log"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\database\\","sources":["connection.js"],"sourcesContent":["import sql from 'mssql';\r\nimport config from '../config'\r\n\r\nconst sqlConfig = {\r\n    user: config.dbUser,\r\n    password: config.dbPassword,\r\n    server: config.dbServer,\r\n    database: config.dbDatabase,\r\n    options: {\r\n        encrypt: true,\r\n        trustServerCertificate: true\r\n    }\r\n}\r\n\r\n\r\nexport async function getConnection() {\r\n    try {\r\n        const pool = await sql.connect(sqlConfig);\r\n        return pool;\r\n        \r\n    } catch (e) {\r\n        console.log(e);\r\n        throw e;\r\n    }\r\n}\r\n\r\nexport {sql}"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA8B,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE9B,MAAMG,SAAS,GAAG;EACdC,IAAI,EAAEC,eAAM,CAACC,MAAM;EACnBC,QAAQ,EAAEF,eAAM,CAACG,UAAU;EAC3BC,MAAM,EAAEJ,eAAM,CAACK,QAAQ;EACvBC,QAAQ,EAAEN,eAAM,CAACO,UAAU;EAC3BC,OAAO,EAAE;IACLC,OAAO,EAAE,IAAI;IACbC,sBAAsB,EAAE;EAC5B;AACJ,CAAC;AAGM,eAAeC,aAAaA,CAAA,EAAG;EAClC,IAAI;IACA,MAAMC,IAAI,GAAG,MAAMC,cAAG,CAACC,OAAO,CAAChB,SAAS,CAAC;IACzC,OAAOc,IAAI;EAEf,CAAC,CAAC,OAAOjB,CAAC,EAAE;IACRoB,OAAO,CAACC,GAAG,CAACrB,CAAC,CAAC;IACd,MAAMA,CAAC;EACX;AACJ","ignoreList":[]}},"mtime":1718224475630},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\database\\\\querys.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.queries = void 0;\nconst queries = exports.queries = {\n  //querys de los usuarios\n  getUser: \"SELECT name, lastname, mail, pfp FROM Usuario\",\n  insertUser: \"INSERT INTO Usuario (name, lastname, mail, password, pfp, status) VALUES (@name, @lastname, @mail, @password, @pfp, @status)\",\n  userExist: \"SELECT * FROM Usuario WHERE mail = @mail\",\n  updateUser: \"UPDATE Usuario SET name = @name, lastname = @lastname, password = @password, pfp = @pfp WHERE mail = @mail\",\n  //querys de los posts\n  insertPost: \"INSERT INTO Posts (tittle, textDescrip, picture) OUTPUT INSERTED.id VALUES (@tittle, @textDescrip, @picture)\",\n  updatePost: \"UPDATE Posts SET tittle = @tittle, textDescrip = @textDescrip, picture = @picture WHERE id = @id\",\n  deletePost: \"DELETE FROM Posts WHERE id = @id\",\n  getPost: \"SELECT * FROM Posts WHERE id = @id\",\n  getPosts: \"SELECT * FROM Posts\",\n  //este no requiere token\n  getUserPosts: \"SELECT * FROM Posts INNER JOIN UserPosts ON posts.id = userPosts.idPost WHERE UserPosts.idUser = @idUser\",\n  //querys tabla UsuarioPost\n  insertUserPost: \"INSERT INTO UserPosts (idUser, idPost) VALUES (@idUser, @idPost)\"\n  // getUserPost: \"SELECT * FROM UsuarioPost WHERE id_user = @id_user\",\n  // deleteUserPost: \"DELETE FROM UsuarioPost WHERE id_user = @id_user AND id_post = @id_post\",\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJxdWVyaWVzIiwiZXhwb3J0cyIsImdldFVzZXIiLCJpbnNlcnRVc2VyIiwidXNlckV4aXN0IiwidXBkYXRlVXNlciIsImluc2VydFBvc3QiLCJ1cGRhdGVQb3N0IiwiZGVsZXRlUG9zdCIsImdldFBvc3QiLCJnZXRQb3N0cyIsImdldFVzZXJQb3N0cyIsImluc2VydFVzZXJQb3N0Il0sInNvdXJjZVJvb3QiOiJEOlxcVVRNXFw5bm9cXFdlYl9JbnRlZ3JhbFxcYmxvZ19iYWNrXFxCbG9nX0JhY2tcXGRhdGFiYXNlXFwiLCJzb3VyY2VzIjpbInF1ZXJ5cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZXhwb3J0IGNvbnN0IHF1ZXJpZXMgPSB7XHJcblxyXG4gICAgLy9xdWVyeXMgZGUgbG9zIHVzdWFyaW9zXHJcbiAgICBnZXRVc2VyOiBcIlNFTEVDVCBuYW1lLCBsYXN0bmFtZSwgbWFpbCwgcGZwIEZST00gVXN1YXJpb1wiLFxyXG4gICAgaW5zZXJ0VXNlcjogXCJJTlNFUlQgSU5UTyBVc3VhcmlvIChuYW1lLCBsYXN0bmFtZSwgbWFpbCwgcGFzc3dvcmQsIHBmcCwgc3RhdHVzKSBWQUxVRVMgKEBuYW1lLCBAbGFzdG5hbWUsIEBtYWlsLCBAcGFzc3dvcmQsIEBwZnAsIEBzdGF0dXMpXCIsXHJcbiAgICB1c2VyRXhpc3Q6IFwiU0VMRUNUICogRlJPTSBVc3VhcmlvIFdIRVJFIG1haWwgPSBAbWFpbFwiLFxyXG4gICAgdXBkYXRlVXNlcjogXCJVUERBVEUgVXN1YXJpbyBTRVQgbmFtZSA9IEBuYW1lLCBsYXN0bmFtZSA9IEBsYXN0bmFtZSwgcGFzc3dvcmQgPSBAcGFzc3dvcmQsIHBmcCA9IEBwZnAgV0hFUkUgbWFpbCA9IEBtYWlsXCIsXHJcblxyXG5cclxuXHJcbiAgICAvL3F1ZXJ5cyBkZSBsb3MgcG9zdHNcclxuICAgIGluc2VydFBvc3Q6IFwiSU5TRVJUIElOVE8gUG9zdHMgKHRpdHRsZSwgdGV4dERlc2NyaXAsIHBpY3R1cmUpIE9VVFBVVCBJTlNFUlRFRC5pZCBWQUxVRVMgKEB0aXR0bGUsIEB0ZXh0RGVzY3JpcCwgQHBpY3R1cmUpXCIsXHJcbiAgICB1cGRhdGVQb3N0OiBcIlVQREFURSBQb3N0cyBTRVQgdGl0dGxlID0gQHRpdHRsZSwgdGV4dERlc2NyaXAgPSBAdGV4dERlc2NyaXAsIHBpY3R1cmUgPSBAcGljdHVyZSBXSEVSRSBpZCA9IEBpZFwiLFxyXG4gICAgZGVsZXRlUG9zdDogXCJERUxFVEUgRlJPTSBQb3N0cyBXSEVSRSBpZCA9IEBpZFwiLFxyXG4gICAgZ2V0UG9zdDogXCJTRUxFQ1QgKiBGUk9NIFBvc3RzIFdIRVJFIGlkID0gQGlkXCIsXHJcbiAgICBnZXRQb3N0czogXCJTRUxFQ1QgKiBGUk9NIFBvc3RzXCIsIC8vZXN0ZSBubyByZXF1aWVyZSB0b2tlblxyXG4gICAgZ2V0VXNlclBvc3RzOiBcIlNFTEVDVCAqIEZST00gUG9zdHMgSU5ORVIgSk9JTiBVc2VyUG9zdHMgT04gcG9zdHMuaWQgPSB1c2VyUG9zdHMuaWRQb3N0IFdIRVJFIFVzZXJQb3N0cy5pZFVzZXIgPSBAaWRVc2VyXCIsXHJcblxyXG4gICAgLy9xdWVyeXMgdGFibGEgVXN1YXJpb1Bvc3RcclxuICAgIGluc2VydFVzZXJQb3N0OiBcIklOU0VSVCBJTlRPIFVzZXJQb3N0cyAoaWRVc2VyLCBpZFBvc3QpIFZBTFVFUyAoQGlkVXNlciwgQGlkUG9zdClcIixcclxuICAgIC8vIGdldFVzZXJQb3N0OiBcIlNFTEVDVCAqIEZST00gVXN1YXJpb1Bvc3QgV0hFUkUgaWRfdXNlciA9IEBpZF91c2VyXCIsXHJcbiAgICAvLyBkZWxldGVVc2VyUG9zdDogXCJERUxFVEUgRlJPTSBVc3VhcmlvUG9zdCBXSEVSRSBpZF91c2VyID0gQGlkX3VzZXIgQU5EIGlkX3Bvc3QgPSBAaWRfcG9zdFwiLFxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ08sTUFBTUEsT0FBTyxHQUFBQyxPQUFBLENBQUFELE9BQUEsR0FBRztFQUVuQjtFQUNBRSxPQUFPLEVBQUUsK0NBQStDO0VBQ3hEQyxVQUFVLEVBQUUsOEhBQThIO0VBQzFJQyxTQUFTLEVBQUUsMENBQTBDO0VBQ3JEQyxVQUFVLEVBQUUsNEdBQTRHO0VBSXhIO0VBQ0FDLFVBQVUsRUFBRSw4R0FBOEc7RUFDMUhDLFVBQVUsRUFBRSxrR0FBa0c7RUFDOUdDLFVBQVUsRUFBRSxrQ0FBa0M7RUFDOUNDLE9BQU8sRUFBRSxvQ0FBb0M7RUFDN0NDLFFBQVEsRUFBRSxxQkFBcUI7RUFBRTtFQUNqQ0MsWUFBWSxFQUFFLDBHQUEwRztFQUV4SDtFQUNBQyxjQUFjLEVBQUU7RUFDaEI7RUFDQTtBQUNKLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["queries","exports","getUser","insertUser","userExist","updateUser","insertPost","updatePost","deletePost","getPost","getPosts","getUserPosts","insertUserPost"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\database\\","sources":["querys.js"],"sourcesContent":["\r\nexport const queries = {\r\n\r\n    //querys de los usuarios\r\n    getUser: \"SELECT name, lastname, mail, pfp FROM Usuario\",\r\n    insertUser: \"INSERT INTO Usuario (name, lastname, mail, password, pfp, status) VALUES (@name, @lastname, @mail, @password, @pfp, @status)\",\r\n    userExist: \"SELECT * FROM Usuario WHERE mail = @mail\",\r\n    updateUser: \"UPDATE Usuario SET name = @name, lastname = @lastname, password = @password, pfp = @pfp WHERE mail = @mail\",\r\n\r\n\r\n\r\n    //querys de los posts\r\n    insertPost: \"INSERT INTO Posts (tittle, textDescrip, picture) OUTPUT INSERTED.id VALUES (@tittle, @textDescrip, @picture)\",\r\n    updatePost: \"UPDATE Posts SET tittle = @tittle, textDescrip = @textDescrip, picture = @picture WHERE id = @id\",\r\n    deletePost: \"DELETE FROM Posts WHERE id = @id\",\r\n    getPost: \"SELECT * FROM Posts WHERE id = @id\",\r\n    getPosts: \"SELECT * FROM Posts\", //este no requiere token\r\n    getUserPosts: \"SELECT * FROM Posts INNER JOIN UserPosts ON posts.id = userPosts.idPost WHERE UserPosts.idUser = @idUser\",\r\n\r\n    //querys tabla UsuarioPost\r\n    insertUserPost: \"INSERT INTO UserPosts (idUser, idPost) VALUES (@idUser, @idPost)\",\r\n    // getUserPost: \"SELECT * FROM UsuarioPost WHERE id_user = @id_user\",\r\n    // deleteUserPost: \"DELETE FROM UsuarioPost WHERE id_user = @id_user AND id_post = @id_post\",\r\n}\r\n"],"mappings":";;;;;;AACO,MAAMA,OAAO,GAAAC,OAAA,CAAAD,OAAA,GAAG;EAEnB;EACAE,OAAO,EAAE,+CAA+C;EACxDC,UAAU,EAAE,8HAA8H;EAC1IC,SAAS,EAAE,0CAA0C;EACrDC,UAAU,EAAE,4GAA4G;EAIxH;EACAC,UAAU,EAAE,8GAA8G;EAC1HC,UAAU,EAAE,kGAAkG;EAC9GC,UAAU,EAAE,kCAAkC;EAC9CC,OAAO,EAAE,oCAAoC;EAC7CC,QAAQ,EAAE,qBAAqB;EAAE;EACjCC,YAAY,EAAE,0GAA0G;EAExH;EACAC,cAAc,EAAE;EAChB;EACA;AACJ,CAAC","ignoreList":[]}},"mtime":1718588038768},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\routes\\\\user.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _userController = require(\"../controllers/userController\");\nvar _authMiddleware = require(\"../middleware/authMiddleware\");\nconst router = (0, _express.Router)();\nrouter.post('/api/user/registerUser', _userController.registerUser);\nrouter.post('/api/user/login', _userController.login);\nrouter.post('/api/user/updateCredentials', _authMiddleware.authenticateToken, _userController.updateCredentials);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsInJlcXVpcmUiLCJfdXNlckNvbnRyb2xsZXIiLCJfYXV0aE1pZGRsZXdhcmUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwicmVnaXN0ZXJVc2VyIiwibG9naW4iLCJhdXRoZW50aWNhdGVUb2tlbiIsInVwZGF0ZUNyZWRlbnRpYWxzIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXFVUTVxcOW5vXFxXZWJfSW50ZWdyYWxcXGJsb2dfYmFja1xcQmxvZ19CYWNrXFxzcmNcXHJvdXRlc1xcIiwic291cmNlcyI6WyJ1c2VyLnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5cclxuaW1wb3J0IHsgbG9naW4sIHJlZ2lzdGVyVXNlciwgdXBkYXRlQ3JlZGVudGlhbHMgfSBmcm9tIFwiLi4vY29udHJvbGxlcnMvdXNlckNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgYXV0aGVudGljYXRlVG9rZW4gfSBmcm9tIFwiLi4vbWlkZGxld2FyZS9hdXRoTWlkZGxld2FyZVwiO1xyXG5cclxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2FwaS91c2VyL3JlZ2lzdGVyVXNlcicsIHJlZ2lzdGVyVXNlcik7XHJcbnJvdXRlci5wb3N0KCcvYXBpL3VzZXIvbG9naW4nLCBsb2dpbik7XHJcbnJvdXRlci5wb3N0KCcvYXBpL3VzZXIvdXBkYXRlQ3JlZGVudGlhbHMnLCBhdXRoZW50aWNhdGVUb2tlbiwgdXBkYXRlQ3JlZGVudGlhbHMpO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUVBLElBQUFDLGVBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLGVBQUEsR0FBQUYsT0FBQTtBQUVBLE1BQU1HLE1BQU0sR0FBRyxJQUFBQyxlQUFNLEVBQUMsQ0FBQztBQUV2QkQsTUFBTSxDQUFDRSxJQUFJLENBQUMsd0JBQXdCLEVBQUVDLDRCQUFZLENBQUM7QUFDbkRILE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLGlCQUFpQixFQUFFRSxxQkFBSyxDQUFDO0FBQ3JDSixNQUFNLENBQUNFLElBQUksQ0FBQyw2QkFBNkIsRUFBRUcsaUNBQWlCLEVBQUVDLGlDQUFpQixDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FHbEVULE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_express","require","_userController","_authMiddleware","router","Router","post","registerUser","login","authenticateToken","updateCredentials","_default","exports","default"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\src\\routes\\","sources":["user.routes.js"],"sourcesContent":["import { Router } from \"express\";\r\n\r\nimport { login, registerUser, updateCredentials } from \"../controllers/userController\";\r\nimport { authenticateToken } from \"../middleware/authMiddleware\";\r\n\r\nconst router = Router();\r\n\r\nrouter.post('/api/user/registerUser', registerUser);\r\nrouter.post('/api/user/login', login);\r\nrouter.post('/api/user/updateCredentials', authenticateToken, updateCredentials);\r\n\r\n\r\nexport default router;"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAEA,IAAAC,eAAA,GAAAD,OAAA;AACA,IAAAE,eAAA,GAAAF,OAAA;AAEA,MAAMG,MAAM,GAAG,IAAAC,eAAM,EAAC,CAAC;AAEvBD,MAAM,CAACE,IAAI,CAAC,wBAAwB,EAAEC,4BAAY,CAAC;AACnDH,MAAM,CAACE,IAAI,CAAC,iBAAiB,EAAEE,qBAAK,CAAC;AACrCJ,MAAM,CAACE,IAAI,CAAC,6BAA6B,EAAEG,iCAAiB,EAAEC,iCAAiB,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAGlET,MAAM","ignoreList":[]}},"mtime":1718371509445},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\controllers\\\\userController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateCredentials = exports.registerUser = exports.login = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _expressValidator = require(\"express-validator\");\nvar _index = require(\"../../database/index\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst registerUser = async (req, res) => {\n  console.log(req.body);\n  console.log(req.files);\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    name,\n    lastname,\n    mail,\n    password\n  } = req.body;\n  const pfp = req.files && req.files.pfp ? req.files.pfp[0] : null;\n  try {\n    const existingUser = await (0, _index.executeQuery)(_index.queries.userExist, {\n      mail\n    });\n    if (existingUser.recordset.length > 0) {\n      return res.status(400).json({\n        message: \"El correo ya está en uso\"\n      });\n    }\n    const salt = await _bcrypt.default.genSalt(10);\n    const hashedPassword = await _bcrypt.default.hash(password, salt);\n    console.log(salt);\n    const user = {\n      name,\n      lastname,\n      mail,\n      password: hashedPassword,\n      pfp,\n      status: true\n    };\n    const params = {\n      name: user.name,\n      lastname: user.lastname,\n      mail: user.mail,\n      password: user.password,\n      pfp: user.pfp ? user.pfp.buffer : Buffer.from(\"\"),\n      status: user.status\n    };\n    const result = await (0, _index.executeQuery)(_index.queries.insertUser, params);\n    const payload = {\n      user: {\n        id: result.insertId,\n        name: user.name\n      }\n    };\n    _jsonwebtoken.default.sign(payload, process.env.TOKEN, {\n      expiresIn: \"1 day\"\n    }, (err, token) => {\n      if (err) {\n        console.error(err);\n        return res.status(500).json({\n          message: \"Error signing the token\"\n        });\n      }\n      res.status(201).json({\n        message: \"success\",\n        accessToken: token\n      });\n    });\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Server Error\");\n  }\n};\nexports.registerUser = registerUser;\nconst login = async (req, res) => {\n  try {\n    const {\n      mail,\n      password\n    } = req.body;\n    const user = {\n      mail: mail,\n      password: password\n    };\n    const params = {\n      mail: user.mail,\n      password: user.password\n    };\n    if (!mail || !password) {\n      return res.status(400).json({\n        error: \"El correo y la contraseña son campos requeridos, intentelo de nuevo\"\n      });\n    }\n    const existingUser = await (0, _index.executeQuery)(_index.queries.userExist, params);\n    console.log(existingUser);\n    // console.log(existingUser.password);\n\n    if (existingUser.recordset.length === 0) {\n      console.warn(\"Error al intentar el inicio de sesion, intentelo de nuevo\");\n      return res.status(401).json({\n        error: \"xd\"\n      });\n    }\n    const _user = existingUser.recordset[0];\n    console.log(_user.password);\n    if (await _bcrypt.default.compare(password, _user.password)) {\n      res.cookie(\"session\", \"secure-session-token\", {\n        httpOnly: true,\n        secure: true\n        // sameSite: \"strict\",\n      });\n      console.log(`User ${mail} logged in successfully`);\n      const accessToken = _jsonwebtoken.default.sign({\n        userId: _user.id,\n        name: _user.name\n      }, process.env.TOKEN, {\n        //verificar \n        expiresIn: \"1h\"\n      });\n      res.json({\n        accessToken\n      });\n    } else {\n      console.warn(`Failed login attempt for correo ${mail}`);\n      response.status(401).json({\n        error: \"Invalid credentials\"\n      });\n    }\n  } catch (err) {\n    console.error(err.message);\n    throw err;\n  }\n};\nexports.login = login;\nconst updateCredentials = async (req, res) => {\n  console.log(req.body);\n  console.log(req.files);\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    name,\n    lastname,\n    mail,\n    password,\n    pfp\n  } = req.body;\n  try {\n    const existingUser = await (0, _index.executeQuery)(_index.queries.userExist, {\n      mail\n    });\n    if (existingUser.recordset.length === 0) {\n      return res.status(400).json({\n        message: `No existe el usuario ${mail}`\n      });\n    }\n    const salt = await _bcrypt.default.genSalt(10);\n    const hashedPassword = await _bcrypt.default.hash(password, salt);\n    console.log(salt);\n    const updatedUser = {\n      name,\n      lastname,\n      password: hashedPassword,\n      pfp\n    };\n    const params = {\n      name: updatedUser.name,\n      lastname: updatedUser.lastname,\n      password: updatedUser.password,\n      mail,\n      pfp: updatedUser.pfp ? updatedUser.pfp.buffer : Buffer.from(\"\")\n    };\n    const result = await (0, _index.executeQuery)(_index.queries.updateUser, params);\n    console.log(result);\n    res.status(200).send(\"User updated\");\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Server Error\");\n  }\n};\nexports.updateCredentials = updateCredentials;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYmNyeXB0IiwiX2V4cHJlc3NWYWxpZGF0b3IiLCJfaW5kZXgiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJyZWdpc3RlclVzZXIiLCJyZXEiLCJyZXMiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsImZpbGVzIiwiZXJyb3JzIiwidmFsaWRhdGlvblJlc3VsdCIsImlzRW1wdHkiLCJzdGF0dXMiLCJqc29uIiwiYXJyYXkiLCJuYW1lIiwibGFzdG5hbWUiLCJtYWlsIiwicGFzc3dvcmQiLCJwZnAiLCJleGlzdGluZ1VzZXIiLCJleGVjdXRlUXVlcnkiLCJxdWVyaWVzIiwidXNlckV4aXN0IiwicmVjb3Jkc2V0IiwibGVuZ3RoIiwibWVzc2FnZSIsInNhbHQiLCJiY3J5cHQiLCJnZW5TYWx0IiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwidXNlciIsInBhcmFtcyIsImJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJyZXN1bHQiLCJpbnNlcnRVc2VyIiwicGF5bG9hZCIsImlkIiwiaW5zZXJ0SWQiLCJqd3QiLCJzaWduIiwicHJvY2VzcyIsImVudiIsIlRPS0VOIiwiZXhwaXJlc0luIiwiZXJyIiwidG9rZW4iLCJlcnJvciIsImFjY2Vzc1Rva2VuIiwic2VuZCIsImV4cG9ydHMiLCJsb2dpbiIsIndhcm4iLCJfdXNlciIsImNvbXBhcmUiLCJjb29raWUiLCJodHRwT25seSIsInNlY3VyZSIsInVzZXJJZCIsInJlc3BvbnNlIiwidXBkYXRlQ3JlZGVudGlhbHMiLCJ1cGRhdGVkVXNlciIsInVwZGF0ZVVzZXIiXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXEJsb2dfQmFja1xcc3JjXFxjb250cm9sbGVyc1xcIiwic291cmNlcyI6WyJ1c2VyQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcbmltcG9ydCB7IHZhbGlkYXRpb25SZXN1bHQgfSBmcm9tIFwiZXhwcmVzcy12YWxpZGF0b3JcIjtcclxuaW1wb3J0IHsgdXNlckV4aXN0LCBleGVjdXRlUXVlcnksIHF1ZXJpZXMgfSBmcm9tIFwiLi4vLi4vZGF0YWJhc2UvaW5kZXhcIjtcclxuXHJcbmV4cG9ydCBjb25zdCByZWdpc3RlclVzZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zb2xlLmxvZyhyZXEuYm9keSk7XHJcbiAgY29uc29sZS5sb2cocmVxLmZpbGVzKTtcclxuICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XHJcbiAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgeyBuYW1lLCBsYXN0bmFtZSwgbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnN0IHBmcCA9IHJlcS5maWxlcyAmJiByZXEuZmlsZXMucGZwID8gcmVxLmZpbGVzLnBmcFswXSA6IG51bGw7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBleGVjdXRlUXVlcnkocXVlcmllcy51c2VyRXhpc3QsIHsgbWFpbCB9KTtcclxuICAgIGlmIChleGlzdGluZ1VzZXIucmVjb3Jkc2V0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJFbCBjb3JyZW8geWEgZXN0w6EgZW4gdXNvXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEwKTtcclxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQpO1xyXG4gICAgY29uc29sZS5sb2coc2FsdCk7XHJcblxyXG4gICAgY29uc3QgdXNlciA9IHtcclxuICAgICAgbmFtZSxcclxuICAgICAgbGFzdG5hbWUsXHJcbiAgICAgIG1haWwsXHJcbiAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcclxuICAgICAgcGZwLFxyXG4gICAgICBzdGF0dXM6IHRydWUsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgICBsYXN0bmFtZTogdXNlci5sYXN0bmFtZSxcclxuICAgICAgbWFpbDogdXNlci5tYWlsLFxyXG4gICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZCxcclxuICAgICAgcGZwOiB1c2VyLnBmcCA/IHVzZXIucGZwLmJ1ZmZlciA6IEJ1ZmZlci5mcm9tKFwiXCIpLFxyXG4gICAgICBzdGF0dXM6IHVzZXIuc3RhdHVzLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVRdWVyeShxdWVyaWVzLmluc2VydFVzZXIsIHBhcmFtcyk7XHJcblxyXG4gICAgY29uc3QgcGF5bG9hZCA9IHtcclxuICAgICAgdXNlcjoge1xyXG4gICAgICAgIGlkOiByZXN1bHQuaW5zZXJ0SWQsXHJcbiAgICAgICAgbmFtZTogdXNlci5uYW1lXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIGp3dC5zaWduKFxyXG4gICAgICBwYXlsb2FkLFxyXG4gICAgICBwcm9jZXNzLmVudi5UT0tFTixcclxuICAgICAgeyBleHBpcmVzSW46IFwiMSBkYXlcIiB9LFxyXG4gICAgICAoZXJyLCB0b2tlbikgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyb3Igc2lnbmluZyB0aGUgdG9rZW5cIiB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcInN1Y2Nlc3NcIiwgYWNjZXNzVG9rZW46IHRva2VuIH0pO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIlNlcnZlciBFcnJvclwiKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgbG9naW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgY29uc3QgdXNlciA9IHtcclxuICAgICAgbWFpbDogbWFpbCxcclxuICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgIG1haWw6IHVzZXIubWFpbCxcclxuICAgICAgcGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQsXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICghbWFpbCB8fCAhcGFzc3dvcmQpIHtcclxuICAgICAgcmV0dXJuIHJlc1xyXG4gICAgICAgIC5zdGF0dXMoNDAwKVxyXG4gICAgICAgIC5qc29uKHtcclxuICAgICAgICAgIGVycm9yOlxyXG4gICAgICAgICAgICBcIkVsIGNvcnJlbyB5IGxhIGNvbnRyYXNlw7FhIHNvbiBjYW1wb3MgcmVxdWVyaWRvcywgaW50ZW50ZWxvIGRlIG51ZXZvXCIsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHF1ZXJpZXMudXNlckV4aXN0LCBwYXJhbXMpO1xyXG4gICAgY29uc29sZS5sb2coZXhpc3RpbmdVc2VyKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKGV4aXN0aW5nVXNlci5wYXNzd29yZCk7XHJcblxyXG4gICAgaWYgKGV4aXN0aW5nVXNlci5yZWNvcmRzZXQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIGFsIGludGVudGFyIGVsIGluaWNpbyBkZSBzZXNpb24sIGludGVudGVsbyBkZSBudWV2b1wiKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwieGRcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBfdXNlciA9IGV4aXN0aW5nVXNlci5yZWNvcmRzZXRbMF07XHJcblxyXG4gICAgY29uc29sZS5sb2coX3VzZXIucGFzc3dvcmQpO1xyXG5cclxuICAgIGlmIChhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgX3VzZXIucGFzc3dvcmQpKSB7XHJcbiAgICAgIHJlcy5jb29raWUoXCJzZXNzaW9uXCIsIFwic2VjdXJlLXNlc3Npb24tdG9rZW5cIiwge1xyXG4gICAgICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgICAgIHNlY3VyZTogdHJ1ZSxcclxuICAgICAgICAvLyBzYW1lU2l0ZTogXCJzdHJpY3RcIixcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgVXNlciAke21haWx9IGxvZ2dlZCBpbiBzdWNjZXNzZnVsbHlgKTtcclxuXHJcbiAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gand0LnNpZ24oeyB1c2VySWQ6IF91c2VyLmlkICwgbmFtZTogX3VzZXIubmFtZSB9LCBwcm9jZXNzLmVudi5UT0tFTiwgeyAvL3ZlcmlmaWNhciBcclxuICAgICAgICBleHBpcmVzSW46IFwiMWhcIixcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXMuanNvbih7YWNjZXNzVG9rZW59KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIGxvZ2luIGF0dGVtcHQgZm9yIGNvcnJlbyAke21haWx9YCk7XHJcbiAgICAgIHJlc3BvbnNlLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIGNyZWRlbnRpYWxzXCIgfSk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcclxuICAgIHRocm93IGVycjtcclxuICB9XHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IHVwZGF0ZUNyZWRlbnRpYWxzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcblxyXG4gIGNvbnNvbGUubG9nKHJlcS5ib2R5KTtcclxuICBjb25zb2xlLmxvZyhyZXEuZmlsZXMpO1xyXG4gIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcclxuXHJcbiAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcclxuXHJcbiAgfVxyXG5cclxuICBjb25zdCB7IG5hbWUsIGxhc3RuYW1lLCBtYWlsLCBwYXNzd29yZCwgcGZwIH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuXHJcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBleGVjdXRlUXVlcnkocXVlcmllcy51c2VyRXhpc3QsIHsgbWFpbCB9KTtcclxuICAgIGlmIChleGlzdGluZ1VzZXIucmVjb3Jkc2V0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBgTm8gZXhpc3RlIGVsIHVzdWFyaW8gJHttYWlsfWAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEwKTtcclxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQpO1xyXG4gICAgY29uc29sZS5sb2coc2FsdCk7XHJcblxyXG4gICAgY29uc3QgdXBkYXRlZFVzZXIgPSB7XHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIGxhc3RuYW1lLFxyXG4gICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsIFxyXG4gICAgICBwZnAgXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICBuYW1lOiB1cGRhdGVkVXNlci5uYW1lLFxyXG4gICAgICBsYXN0bmFtZTogdXBkYXRlZFVzZXIubGFzdG5hbWUsXHJcbiAgICAgIHBhc3N3b3JkOiB1cGRhdGVkVXNlci5wYXNzd29yZCxcclxuICAgICAgbWFpbCxcclxuICAgICAgcGZwOiB1cGRhdGVkVXNlci5wZnAgPyB1cGRhdGVkVXNlci5wZnAuYnVmZmVyIDogQnVmZmVyLmZyb20oXCJcIiksXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHF1ZXJpZXMudXBkYXRlVXNlciwgcGFyYW1zKTtcclxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChcIlVzZXIgdXBkYXRlZFwiKTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcblxyXG4gICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIlNlcnZlciBFcnJvclwiKTtcclxuXHJcbiAgfVxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLGlCQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxNQUFBLEdBQUFILE9BQUE7QUFBd0UsU0FBQUQsdUJBQUFLLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFF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","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_bcrypt","_expressValidator","_index","e","__esModule","default","registerUser","req","res","console","log","body","files","errors","validationResult","isEmpty","status","json","array","name","lastname","mail","password","pfp","existingUser","executeQuery","queries","userExist","recordset","length","message","salt","bcrypt","genSalt","hashedPassword","hash","user","params","buffer","Buffer","from","result","insertUser","payload","id","insertId","jwt","sign","process","env","TOKEN","expiresIn","err","token","error","accessToken","send","exports","login","warn","_user","compare","cookie","httpOnly","secure","userId","response","updateCredentials","updatedUser","updateUser"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\src\\controllers\\","sources":["userController.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\r\nimport bcrypt from \"bcrypt\";\r\nimport { validationResult } from \"express-validator\";\r\nimport { userExist, executeQuery, queries } from \"../../database/index\";\r\n\r\nexport const registerUser = async (req, res) => {\r\n  console.log(req.body);\r\n  console.log(req.files);\r\n  const errors = validationResult(req);\r\n  if (!errors.isEmpty()) {\r\n    return res.status(400).json({ errors: errors.array() });\r\n  }\r\n\r\n  const { name, lastname, mail, password } = req.body;\r\n  const pfp = req.files && req.files.pfp ? req.files.pfp[0] : null;\r\n\r\n  try {\r\n    const existingUser = await executeQuery(queries.userExist, { mail });\r\n    if (existingUser.recordset.length > 0) {\r\n      return res.status(400).json({ message: \"El correo ya está en uso\" });\r\n    }\r\n\r\n    const salt = await bcrypt.genSalt(10);\r\n    const hashedPassword = await bcrypt.hash(password, salt);\r\n    console.log(salt);\r\n\r\n    const user = {\r\n      name,\r\n      lastname,\r\n      mail,\r\n      password: hashedPassword,\r\n      pfp,\r\n      status: true,\r\n    };\r\n\r\n    const params = {\r\n      name: user.name,\r\n      lastname: user.lastname,\r\n      mail: user.mail,\r\n      password: user.password,\r\n      pfp: user.pfp ? user.pfp.buffer : Buffer.from(\"\"),\r\n      status: user.status,\r\n    };\r\n    const result = await executeQuery(queries.insertUser, params);\r\n\r\n    const payload = {\r\n      user: {\r\n        id: result.insertId,\r\n        name: user.name\r\n      },\r\n    };\r\n\r\n    jwt.sign(\r\n      payload,\r\n      process.env.TOKEN,\r\n      { expiresIn: \"1 day\" },\r\n      (err, token) => {\r\n        if (err) {\r\n          console.error(err);\r\n          return res.status(500).json({ message: \"Error signing the token\" });\r\n        }\r\n        res.status(201).json({ message: \"success\", accessToken: token });\r\n      }\r\n    );\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    res.status(500).send(\"Server Error\");\r\n  }\r\n};\r\n\r\nexport const login = async (req, res) => {\r\n  try {\r\n    const { mail, password } = req.body;\r\n\r\n    const user = {\r\n      mail: mail,\r\n      password: password,\r\n    };\r\n\r\n    const params = {\r\n      mail: user.mail,\r\n      password: user.password,\r\n    };\r\n\r\n    if (!mail || !password) {\r\n      return res\r\n        .status(400)\r\n        .json({\r\n          error:\r\n            \"El correo y la contraseña son campos requeridos, intentelo de nuevo\",\r\n        });\r\n    }\r\n\r\n    const existingUser = await executeQuery(queries.userExist, params);\r\n    console.log(existingUser);\r\n    // console.log(existingUser.password);\r\n\r\n    if (existingUser.recordset.length === 0) {\r\n      console.warn(\"Error al intentar el inicio de sesion, intentelo de nuevo\");\r\n      return res.status(401).json({ error: \"xd\" });\r\n    }\r\n\r\n    const _user = existingUser.recordset[0];\r\n\r\n    console.log(_user.password);\r\n\r\n    if (await bcrypt.compare(password, _user.password)) {\r\n      res.cookie(\"session\", \"secure-session-token\", {\r\n        httpOnly: true,\r\n        secure: true,\r\n        // sameSite: \"strict\",\r\n      });\r\n\r\n      console.log(`User ${mail} logged in successfully`);\r\n\r\n      const accessToken = jwt.sign({ userId: _user.id , name: _user.name }, process.env.TOKEN, { //verificar \r\n        expiresIn: \"1h\",\r\n      });\r\n\r\n      res.json({accessToken});\r\n    } else {\r\n      console.warn(`Failed login attempt for correo ${mail}`);\r\n      response.status(401).json({ error: \"Invalid credentials\" });\r\n    }\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    throw err;\r\n  }\r\n};\r\n\r\n\r\nexport const updateCredentials = async (req, res) => {\r\n\r\n  console.log(req.body);\r\n  console.log(req.files);\r\n  const errors = validationResult(req);\r\n\r\n  if (!errors.isEmpty()) {\r\n\r\n    return res.status(400).json({ errors: errors.array() });\r\n\r\n  }\r\n\r\n  const { name, lastname, mail, password, pfp } = req.body;\r\n\r\n  try {\r\n\r\n    const existingUser = await executeQuery(queries.userExist, { mail });\r\n    if (existingUser.recordset.length === 0) {\r\n      return res.status(400).json({ message: `No existe el usuario ${mail}` });\r\n    }\r\n\r\n    const salt = await bcrypt.genSalt(10);\r\n    const hashedPassword = await bcrypt.hash(password, salt);\r\n    console.log(salt);\r\n\r\n    const updatedUser = {\r\n      name,\r\n      lastname,\r\n      password: hashedPassword, \r\n      pfp \r\n    }\r\n\r\n    const params = {\r\n      name: updatedUser.name,\r\n      lastname: updatedUser.lastname,\r\n      password: updatedUser.password,\r\n      mail,\r\n      pfp: updatedUser.pfp ? updatedUser.pfp.buffer : Buffer.from(\"\"),\r\n    };\r\n    const result = await executeQuery(queries.updateUser, params);\r\n    console.log(result);\r\n    res.status(200).send(\"User updated\");\r\n\r\n  } catch (err) {\r\n\r\n    console.error(err.message);\r\n    res.status(500).send(\"Server Error\");\r\n\r\n  }\r\n};\r\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,iBAAA,GAAAF,OAAA;AACA,IAAAG,MAAA,GAAAH,OAAA;AAAwE,SAAAD,uBAAAK,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEjE,MAAMG,YAAY,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;EAC9CC,OAAO,CAACC,GAAG,CAACH,GAAG,CAACI,IAAI,CAAC;EACrBF,OAAO,CAACC,GAAG,CAACH,GAAG,CAACK,KAAK,CAAC;EACtB,MAAMC,MAAM,GAAG,IAAAC,kCAAgB,EAACP,GAAG,CAAC;EACpC,IAAI,CAACM,MAAM,CAACE,OAAO,CAAC,CAAC,EAAE;IACrB,OAAOP,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEJ,MAAM,EAAEA,MAAM,CAACK,KAAK,CAAC;IAAE,CAAC,CAAC;EACzD;EAEA,MAAM;IAAEC,IAAI;IAAEC,QAAQ;IAAEC,IAAI;IAAEC;EAAS,CAAC,GAAGf,GAAG,CAACI,IAAI;EACnD,MAAMY,GAAG,GAAGhB,GAAG,CAACK,KAAK,IAAIL,GAAG,CAACK,KAAK,CAACW,GAAG,GAAGhB,GAAG,CAACK,KAAK,CAACW,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI;EAEhE,IAAI;IACF,MAAMC,YAAY,GAAG,MAAM,IAAAC,mBAAY,EAACC,cAAO,CAACC,SAAS,EAAE;MAAEN;IAAK,CAAC,CAAC;IACpE,IAAIG,YAAY,CAACI,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;MACrC,OAAOrB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEa,OAAO,EAAE;MAA2B,CAAC,CAAC;IACtE;IAEA,MAAMC,IAAI,GAAG,MAAMC,eAAM,CAACC,OAAO,CAAC,EAAE,CAAC;IACrC,MAAMC,cAAc,GAAG,MAAMF,eAAM,CAACG,IAAI,CAACb,QAAQ,EAAES,IAAI,CAAC;IACxDtB,OAAO,CAACC,GAAG,CAACqB,IAAI,CAAC;IAEjB,MAAMK,IAAI,GAAG;MACXjB,IAAI;MACJC,QAAQ;MACRC,IAAI;MACJC,QAAQ,EAAEY,cAAc;MACxBX,GAAG;MACHP,MAAM,EAAE;IACV,CAAC;IAED,MAAMqB,MAAM,GAAG;MACblB,IAAI,EAAEiB,IAAI,CAACjB,IAAI;MACfC,QAAQ,EAAEgB,IAAI,CAAChB,QAAQ;MACvBC,IAAI,EAAEe,IAAI,CAACf,IAAI;MACfC,QAAQ,EAAEc,IAAI,CAACd,QAAQ;MACvBC,GAAG,EAAEa,IAAI,CAACb,GAAG,GAAGa,IAAI,CAACb,GAAG,CAACe,MAAM,GAAGC,MAAM,CAACC,IAAI,CAAC,EAAE,CAAC;MACjDxB,MAAM,EAAEoB,IAAI,CAACpB;IACf,CAAC;IACD,MAAMyB,MAAM,GAAG,MAAM,IAAAhB,mBAAY,EAACC,cAAO,CAACgB,UAAU,EAAEL,MAAM,CAAC;IAE7D,MAAMM,OAAO,GAAG;MACdP,IAAI,EAAE;QACJQ,EAAE,EAAEH,MAAM,CAACI,QAAQ;QACnB1B,IAAI,EAAEiB,IAAI,CAACjB;MACb;IACF,CAAC;IAED2B,qBAAG,CAACC,IAAI,CACNJ,OAAO,EACPK,OAAO,CAACC,GAAG,CAACC,KAAK,EACjB;MAAEC,SAAS,EAAE;IAAQ,CAAC,EACtB,CAACC,GAAG,EAAEC,KAAK,KAAK;MACd,IAAID,GAAG,EAAE;QACP3C,OAAO,CAAC6C,KAAK,CAACF,GAAG,CAAC;QAClB,OAAO5C,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEa,OAAO,EAAE;QAA0B,CAAC,CAAC;MACrE;MACAtB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEa,OAAO,EAAE,SAAS;QAAEyB,WAAW,EAAEF;MAAM,CAAC,CAAC;IAClE,CACF,CAAC;EACH,CAAC,CAAC,OAAOD,GAAG,EAAE;IACZ3C,OAAO,CAAC6C,KAAK,CAACF,GAAG,CAACtB,OAAO,CAAC;IAC1BtB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACwC,IAAI,CAAC,cAAc,CAAC;EACtC;AACF,CAAC;AAACC,OAAA,CAAAnD,YAAA,GAAAA,YAAA;AAEK,MAAMoD,KAAK,GAAG,MAAAA,CAAOnD,GAAG,EAAEC,GAAG,KAAK;EACvC,IAAI;IACF,MAAM;MAAEa,IAAI;MAAEC;IAAS,CAAC,GAAGf,GAAG,CAACI,IAAI;IAEnC,MAAMyB,IAAI,GAAG;MACXf,IAAI,EAAEA,IAAI;MACVC,QAAQ,EAAEA;IACZ,CAAC;IAED,MAAMe,MAAM,GAAG;MACbhB,IAAI,EAAEe,IAAI,CAACf,IAAI;MACfC,QAAQ,EAAEc,IAAI,CAACd;IACjB,CAAC;IAED,IAAI,CAACD,IAAI,IAAI,CAACC,QAAQ,EAAE;MACtB,OAAOd,GAAG,CACPQ,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;QACJqC,KAAK,EACH;MACJ,CAAC,CAAC;IACN;IAEA,MAAM9B,YAAY,GAAG,MAAM,IAAAC,mBAAY,EAACC,cAAO,CAACC,SAAS,EAAEU,MAAM,CAAC;IAClE5B,OAAO,CAACC,GAAG,CAACc,YAAY,CAAC;IACzB;;IAEA,IAAIA,YAAY,CAACI,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE;MACvCpB,OAAO,CAACkD,IAAI,CAAC,2DAA2D,CAAC;MACzE,OAAOnD,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEqC,KAAK,EAAE;MAAK,CAAC,CAAC;IAC9C;IAEA,MAAMM,KAAK,GAAGpC,YAAY,CAACI,SAAS,CAAC,CAAC,CAAC;IAEvCnB,OAAO,CAACC,GAAG,CAACkD,KAAK,CAACtC,QAAQ,CAAC;IAE3B,IAAI,MAAMU,eAAM,CAAC6B,OAAO,CAACvC,QAAQ,EAAEsC,KAAK,CAACtC,QAAQ,CAAC,EAAE;MAClDd,GAAG,CAACsD,MAAM,CAAC,SAAS,EAAE,sBAAsB,EAAE;QAC5CC,QAAQ,EAAE,IAAI;QACdC,MAAM,EAAE;QACR;MACF,CAAC,CAAC;MAEFvD,OAAO,CAACC,GAAG,CAAC,QAAQW,IAAI,yBAAyB,CAAC;MAElD,MAAMkC,WAAW,GAAGT,qBAAG,CAACC,IAAI,CAAC;QAAEkB,MAAM,EAAEL,KAAK,CAAChB,EAAE;QAAGzB,IAAI,EAAEyC,KAAK,CAACzC;MAAK,CAAC,EAAE6B,OAAO,CAACC,GAAG,CAACC,KAAK,EAAE;QAAE;QACzFC,SAAS,EAAE;MACb,CAAC,CAAC;MAEF3C,GAAG,CAACS,IAAI,CAAC;QAACsC;MAAW,CAAC,CAAC;IACzB,CAAC,MAAM;MACL9C,OAAO,CAACkD,IAAI,CAAC,mCAAmCtC,IAAI,EAAE,CAAC;MACvD6C,QAAQ,CAAClD,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEqC,KAAK,EAAE;MAAsB,CAAC,CAAC;IAC7D;EACF,CAAC,CAAC,OAAOF,GAAG,EAAE;IACZ3C,OAAO,CAAC6C,KAAK,CAACF,GAAG,CAACtB,OAAO,CAAC;IAC1B,MAAMsB,GAAG;EACX;AACF,CAAC;AAACK,OAAA,CAAAC,KAAA,GAAAA,KAAA;AAGK,MAAMS,iBAAiB,GAAG,MAAAA,CAAO5D,GAAG,EAAEC,GAAG,KAAK;EAEnDC,OAAO,CAACC,GAAG,CAACH,GAAG,CAACI,IAAI,CAAC;EACrBF,OAAO,CAACC,GAAG,CAACH,GAAG,CAACK,KAAK,CAAC;EACtB,MAAMC,MAAM,GAAG,IAAAC,kCAAgB,EAACP,GAAG,CAAC;EAEpC,IAAI,CAACM,MAAM,CAACE,OAAO,CAAC,CAAC,EAAE;IAErB,OAAOP,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEJ,MAAM,EAAEA,MAAM,CAACK,KAAK,CAAC;IAAE,CAAC,CAAC;EAEzD;EAEA,MAAM;IAAEC,IAAI;IAAEC,QAAQ;IAAEC,IAAI;IAAEC,QAAQ;IAAEC;EAAI,CAAC,GAAGhB,GAAG,CAACI,IAAI;EAExD,IAAI;IAEF,MAAMa,YAAY,GAAG,MAAM,IAAAC,mBAAY,EAACC,cAAO,CAACC,SAAS,EAAE;MAAEN;IAAK,CAAC,CAAC;IACpE,IAAIG,YAAY,CAACI,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE;MACvC,OAAOrB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEa,OAAO,EAAE,wBAAwBT,IAAI;MAAG,CAAC,CAAC;IAC1E;IAEA,MAAMU,IAAI,GAAG,MAAMC,eAAM,CAACC,OAAO,CAAC,EAAE,CAAC;IACrC,MAAMC,cAAc,GAAG,MAAMF,eAAM,CAACG,IAAI,CAACb,QAAQ,EAAES,IAAI,CAAC;IACxDtB,OAAO,CAACC,GAAG,CAACqB,IAAI,CAAC;IAEjB,MAAMqC,WAAW,GAAG;MAClBjD,IAAI;MACJC,QAAQ;MACRE,QAAQ,EAAEY,cAAc;MACxBX;IACF,CAAC;IAED,MAAMc,MAAM,GAAG;MACblB,IAAI,EAAEiD,WAAW,CAACjD,IAAI;MACtBC,QAAQ,EAAEgD,WAAW,CAAChD,QAAQ;MAC9BE,QAAQ,EAAE8C,WAAW,CAAC9C,QAAQ;MAC9BD,IAAI;MACJE,GAAG,EAAE6C,WAAW,CAAC7C,GAAG,GAAG6C,WAAW,CAAC7C,GAAG,CAACe,MAAM,GAAGC,MAAM,CAACC,IAAI,CAAC,EAAE;IAChE,CAAC;IACD,MAAMC,MAAM,GAAG,MAAM,IAAAhB,mBAAY,EAACC,cAAO,CAAC2C,UAAU,EAAEhC,MAAM,CAAC;IAC7D5B,OAAO,CAACC,GAAG,CAAC+B,MAAM,CAAC;IACnBjC,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACwC,IAAI,CAAC,cAAc,CAAC;EAEtC,CAAC,CAAC,OAAOJ,GAAG,EAAE;IAEZ3C,OAAO,CAAC6C,KAAK,CAACF,GAAG,CAACtB,OAAO,CAAC;IAC1BtB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACwC,IAAI,CAAC,cAAc,CAAC;EAEtC;AACF,CAAC;AAACC,OAAA,CAAAU,iBAAA,GAAAA,iBAAA","ignoreList":[]}},"mtime":1718562942354},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\database\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.executeQuery = void 0;\nObject.defineProperty(exports, \"queries\", {\n  enumerable: true,\n  get: function () {\n    return _querys.queries;\n  }\n});\nvar _connection = require(\"./connection\");\nvar _mssql = _interopRequireDefault(require(\"mssql\"));\nvar _querys = require(\"./querys\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst executeQuery = async (query, params) => {\n  try {\n    const pool = await (0, _connection.getConnection)();\n    const request = pool.request();\n\n    // Añade cada parámetro al objeto de solicitud\n    for (let key in params) {\n      if (key === \"pfp\" && params[key] !== null) {\n        // Convierte 'pfp' a un Buffer antes de pasarlo a la consulta\n        request.input(key, _mssql.default.VarBinary(_mssql.default.MAX), Buffer.from(params[key].buffer));\n      } else if (key === \"picture\" && params[key] !== null) {\n        // Si 'picture' es un objeto con una propiedad 'buffer', conviértelo a un Buffer\n        // De lo contrario, asume que es un string y pásalo tal cual\n        if (params[key].buffer) {\n          request.input(key, _mssql.default.VarBinary(_mssql.default.MAX), Buffer.from(params[key].buffer));\n        } else {\n          request.input(key, params[key]);\n        }\n      } else {\n        // Agrega el parámetro como está si no es 'pfp' ni 'picture'\n        request.input(key, params[key]);\n      }\n    }\n    const result = await request.query(query);\n    return result;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n};\nexports.executeQuery = executeQuery;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29ubmVjdGlvbiIsInJlcXVpcmUiLCJfbXNzcWwiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3F1ZXJ5cyIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImV4ZWN1dGVRdWVyeSIsInF1ZXJ5IiwicGFyYW1zIiwicG9vbCIsImdldENvbm5lY3Rpb24iLCJyZXF1ZXN0Iiwia2V5IiwiaW5wdXQiLCJzcWwiLCJWYXJCaW5hcnkiLCJNQVgiLCJCdWZmZXIiLCJmcm9tIiwiYnVmZmVyIiwicmVzdWx0IiwiZXJyb3IiLCJjb25zb2xlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFVUTVxcOW5vXFxXZWJfSW50ZWdyYWxcXGJsb2dfYmFja1xcQmxvZ19CYWNrXFxkYXRhYmFzZVxcIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDb25uZWN0aW9uIH0gZnJvbSBcIi4vY29ubmVjdGlvblwiO1xyXG5pbXBvcnQgc3FsIGZyb20gXCJtc3NxbFwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGV4ZWN1dGVRdWVyeSA9IGFzeW5jIChxdWVyeSwgcGFyYW1zKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBvb2wgPSBhd2FpdCBnZXRDb25uZWN0aW9uKCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gcG9vbC5yZXF1ZXN0KCk7XHJcblxyXG4gICAgLy8gQcOxYWRlIGNhZGEgcGFyw6FtZXRybyBhbCBvYmpldG8gZGUgc29saWNpdHVkXHJcbiAgICBmb3IgKGxldCBrZXkgaW4gcGFyYW1zKSB7XHJcbiAgICAgIGlmIChrZXkgPT09IFwicGZwXCIgJiYgcGFyYW1zW2tleV0gIT09IG51bGwpIHtcclxuICAgICAgICAvLyBDb252aWVydGUgJ3BmcCcgYSB1biBCdWZmZXIgYW50ZXMgZGUgcGFzYXJsbyBhIGxhIGNvbnN1bHRhXHJcbiAgICAgICAgcmVxdWVzdC5pbnB1dChrZXksIHNxbC5WYXJCaW5hcnkoc3FsLk1BWCksIEJ1ZmZlci5mcm9tKHBhcmFtc1trZXldLmJ1ZmZlcikpO1xyXG4gICAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJwaWN0dXJlXCIgJiYgcGFyYW1zW2tleV0gIT09IG51bGwpIHtcclxuICAgICAgICAvLyBTaSAncGljdHVyZScgZXMgdW4gb2JqZXRvIGNvbiB1bmEgcHJvcGllZGFkICdidWZmZXInLCBjb252acOpcnRlbG8gYSB1biBCdWZmZXJcclxuICAgICAgICAvLyBEZSBsbyBjb250cmFyaW8sIGFzdW1lIHF1ZSBlcyB1biBzdHJpbmcgeSBww6FzYWxvIHRhbCBjdWFsXHJcbiAgICAgICAgaWYgKHBhcmFtc1trZXldLmJ1ZmZlcikge1xyXG4gICAgICAgICAgcmVxdWVzdC5pbnB1dChrZXksIHNxbC5WYXJCaW5hcnkoc3FsLk1BWCksIEJ1ZmZlci5mcm9tKHBhcmFtc1trZXldLmJ1ZmZlcikpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXF1ZXN0LmlucHV0KGtleSwgcGFyYW1zW2tleV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBBZ3JlZ2EgZWwgcGFyw6FtZXRybyBjb21vIGVzdMOhIHNpIG5vIGVzICdwZnAnIG5pICdwaWN0dXJlJ1xyXG4gICAgICAgIHJlcXVlc3QuaW5wdXQoa2V5LCBwYXJhbXNba2V5XSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXF1ZXN0LnF1ZXJ5KHF1ZXJ5KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbmV4cG9ydCB7IHF1ZXJpZXMgfSBmcm9tIFwiLi9xdWVyeXNcIjtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxXQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFtQ0EsSUFBQUcsT0FBQSxHQUFBSCxPQUFBO0FBQW1DLFNBQUFFLHVCQUFBRSxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBakM1QixNQUFNRyxZQUFZLEdBQUcsTUFBQUEsQ0FBT0MsS0FBSyxFQUFFQyxNQUFNLEtBQUs7RUFDbkQsSUFBSTtJQUNGLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFDLHlCQUFhLEVBQUMsQ0FBQztJQUNsQyxNQUFNQyxPQUFPLEdBQUdGLElBQUksQ0FBQ0UsT0FBTyxDQUFDLENBQUM7O0lBRTlCO0lBQ0EsS0FBSyxJQUFJQyxHQUFHLElBQUlKLE1BQU0sRUFBRTtNQUN0QixJQUFJSSxHQUFHLEtBQUssS0FBSyxJQUFJSixNQUFNLENBQUNJLEdBQUcsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUN6QztRQUNBRCxPQUFPLENBQUNFLEtBQUssQ0FBQ0QsR0FBRyxFQUFFRSxjQUFHLENBQUNDLFNBQVMsQ0FBQ0QsY0FBRyxDQUFDRSxHQUFHLENBQUMsRUFBRUMsTUFBTSxDQUFDQyxJQUFJLENBQUNWLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLENBQUNPLE1BQU0sQ0FBQyxDQUFDO01BQzdFLENBQUMsTUFBTSxJQUFJUCxHQUFHLEtBQUssU0FBUyxJQUFJSixNQUFNLENBQUNJLEdBQUcsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNwRDtRQUNBO1FBQ0EsSUFBSUosTUFBTSxDQUFDSSxHQUFHLENBQUMsQ0FBQ08sTUFBTSxFQUFFO1VBQ3RCUixPQUFPLENBQUNFLEtBQUssQ0FBQ0QsR0FBRyxFQUFFRSxjQUFHLENBQUNDLFNBQVMsQ0FBQ0QsY0FBRyxDQUFDRSxHQUFHLENBQUMsRUFBRUMsTUFBTSxDQUFDQyxJQUFJLENBQUNWLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLENBQUNPLE1BQU0sQ0FBQyxDQUFDO1FBQzdFLENBQUMsTUFBTTtVQUNMUixPQUFPLENBQUNFLEtBQUssQ0FBQ0QsR0FBRyxFQUFFSixNQUFNLENBQUNJLEdBQUcsQ0FBQyxDQUFDO1FBQ2pDO01BQ0YsQ0FBQyxNQUFNO1FBQ0w7UUFDQUQsT0FBTyxDQUFDRSxLQUFLLENBQUNELEdBQUcsRUFBRUosTUFBTSxDQUFDSSxHQUFHLENBQUMsQ0FBQztNQUNqQztJQUNGO0lBRUEsTUFBTVEsTUFBTSxHQUFHLE1BQU1ULE9BQU8sQ0FBQ0osS0FBSyxDQUFDQSxLQUFLLENBQUM7SUFDekMsT0FBT2EsTUFBTTtFQUNmLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFDZEMsT0FBTyxDQUFDRCxLQUFLLENBQUNBLEtBQUssQ0FBQztJQUNwQixNQUFNQSxLQUFLO0VBQ2I7QUFDRixDQUFDO0FBQUNFLE9BQUEsQ0FBQWpCLFlBQUEsR0FBQUEsWUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_connection","require","_mssql","_interopRequireDefault","_querys","e","__esModule","default","executeQuery","query","params","pool","getConnection","request","key","input","sql","VarBinary","MAX","Buffer","from","buffer","result","error","console","exports"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\database\\","sources":["index.js"],"sourcesContent":["import { getConnection } from \"./connection\";\r\nimport sql from \"mssql\";\r\n\r\nexport const executeQuery = async (query, params) => {\r\n  try {\r\n    const pool = await getConnection();\r\n    const request = pool.request();\r\n\r\n    // Añade cada parámetro al objeto de solicitud\r\n    for (let key in params) {\r\n      if (key === \"pfp\" && params[key] !== null) {\r\n        // Convierte 'pfp' a un Buffer antes de pasarlo a la consulta\r\n        request.input(key, sql.VarBinary(sql.MAX), Buffer.from(params[key].buffer));\r\n      } else if (key === \"picture\" && params[key] !== null) {\r\n        // Si 'picture' es un objeto con una propiedad 'buffer', conviértelo a un Buffer\r\n        // De lo contrario, asume que es un string y pásalo tal cual\r\n        if (params[key].buffer) {\r\n          request.input(key, sql.VarBinary(sql.MAX), Buffer.from(params[key].buffer));\r\n        } else {\r\n          request.input(key, params[key]);\r\n        }\r\n      } else {\r\n        // Agrega el parámetro como está si no es 'pfp' ni 'picture'\r\n        request.input(key, params[key]);\r\n      }\r\n    }\r\n\r\n    const result = await request.query(query);\r\n    return result;\r\n  } catch (error) {\r\n    console.error(error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n\r\nexport { queries } from \"./querys\";\r\n"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,WAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAC,sBAAA,CAAAF,OAAA;AAmCA,IAAAG,OAAA,GAAAH,OAAA;AAAmC,SAAAE,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAjC5B,MAAMG,YAAY,GAAG,MAAAA,CAAOC,KAAK,EAAEC,MAAM,KAAK;EACnD,IAAI;IACF,MAAMC,IAAI,GAAG,MAAM,IAAAC,yBAAa,EAAC,CAAC;IAClC,MAAMC,OAAO,GAAGF,IAAI,CAACE,OAAO,CAAC,CAAC;;IAE9B;IACA,KAAK,IAAIC,GAAG,IAAIJ,MAAM,EAAE;MACtB,IAAII,GAAG,KAAK,KAAK,IAAIJ,MAAM,CAACI,GAAG,CAAC,KAAK,IAAI,EAAE;QACzC;QACAD,OAAO,CAACE,KAAK,CAACD,GAAG,EAAEE,cAAG,CAACC,SAAS,CAACD,cAAG,CAACE,GAAG,CAAC,EAAEC,MAAM,CAACC,IAAI,CAACV,MAAM,CAACI,GAAG,CAAC,CAACO,MAAM,CAAC,CAAC;MAC7E,CAAC,MAAM,IAAIP,GAAG,KAAK,SAAS,IAAIJ,MAAM,CAACI,GAAG,CAAC,KAAK,IAAI,EAAE;QACpD;QACA;QACA,IAAIJ,MAAM,CAACI,GAAG,CAAC,CAACO,MAAM,EAAE;UACtBR,OAAO,CAACE,KAAK,CAACD,GAAG,EAAEE,cAAG,CAACC,SAAS,CAACD,cAAG,CAACE,GAAG,CAAC,EAAEC,MAAM,CAACC,IAAI,CAACV,MAAM,CAACI,GAAG,CAAC,CAACO,MAAM,CAAC,CAAC;QAC7E,CAAC,MAAM;UACLR,OAAO,CAACE,KAAK,CAACD,GAAG,EAAEJ,MAAM,CAACI,GAAG,CAAC,CAAC;QACjC;MACF,CAAC,MAAM;QACL;QACAD,OAAO,CAACE,KAAK,CAACD,GAAG,EAAEJ,MAAM,CAACI,GAAG,CAAC,CAAC;MACjC;IACF;IAEA,MAAMQ,MAAM,GAAG,MAAMT,OAAO,CAACJ,KAAK,CAACA,KAAK,CAAC;IACzC,OAAOa,MAAM;EACf,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACpB,MAAMA,KAAK;EACb;AACF,CAAC;AAACE,OAAA,CAAAjB,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1718402302502},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\database\\\\connection.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getConnection = getConnection;\nObject.defineProperty(exports, \"sql\", {\n  enumerable: true,\n  get: function () {\n    return _mssql.default;\n  }\n});\nvar _mssql = _interopRequireDefault(require(\"mssql\"));\nvar _config = _interopRequireDefault(require(\"../config\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst sqlConfig = {\n  user: _config.default.dbUser,\n  password: _config.default.dbPassword,\n  server: _config.default.dbServer,\n  database: _config.default.dbDatabase,\n  options: {\n    encrypt: true,\n    trustServerCertificate: true\n  }\n};\nasync function getConnection() {\n  try {\n    const pool = await _mssql.default.connect(sqlConfig);\n    return pool;\n  } catch (e) {\n    console.log(e);\n    throw e;\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbXNzcWwiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jb25maWciLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJzcWxDb25maWciLCJ1c2VyIiwiY29uZmlnIiwiZGJVc2VyIiwicGFzc3dvcmQiLCJkYlBhc3N3b3JkIiwic2VydmVyIiwiZGJTZXJ2ZXIiLCJkYXRhYmFzZSIsImRiRGF0YWJhc2UiLCJvcHRpb25zIiwiZW5jcnlwdCIsInRydXN0U2VydmVyQ2VydGlmaWNhdGUiLCJnZXRDb25uZWN0aW9uIiwicG9vbCIsInNxbCIsImNvbm5lY3QiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiJEOlxcVVRNXFw5bm9cXFdlYl9JbnRlZ3JhbFxcYmxvZ19iYWNrXFxCbG9nX0JhY2tcXGRhdGFiYXNlXFwiLCJzb3VyY2VzIjpbImNvbm5lY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNxbCBmcm9tICdtc3NxbCc7XHJcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnJ1xyXG5cclxuY29uc3Qgc3FsQ29uZmlnID0ge1xyXG4gICAgdXNlcjogY29uZmlnLmRiVXNlcixcclxuICAgIHBhc3N3b3JkOiBjb25maWcuZGJQYXNzd29yZCxcclxuICAgIHNlcnZlcjogY29uZmlnLmRiU2VydmVyLFxyXG4gICAgZGF0YWJhc2U6IGNvbmZpZy5kYkRhdGFiYXNlLFxyXG4gICAgb3B0aW9uczoge1xyXG4gICAgICAgIGVuY3J5cHQ6IHRydWUsXHJcbiAgICAgICAgdHJ1c3RTZXJ2ZXJDZXJ0aWZpY2F0ZTogdHJ1ZVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbm5lY3Rpb24oKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBvb2wgPSBhd2FpdCBzcWwuY29ubmVjdChzcWxDb25maWcpO1xyXG4gICAgICAgIHJldHVybiBwb29sO1xyXG4gICAgICAgIFxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7c3FsfSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQThCLFNBQUFELHVCQUFBRyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRTlCLE1BQU1HLFNBQVMsR0FBRztFQUNkQyxJQUFJLEVBQUVDLGVBQU0sQ0FBQ0MsTUFBTTtFQUNuQkMsUUFBUSxFQUFFRixlQUFNLENBQUNHLFVBQVU7RUFDM0JDLE1BQU0sRUFBRUosZUFBTSxDQUFDSyxRQUFRO0VBQ3ZCQyxRQUFRLEVBQUVOLGVBQU0sQ0FBQ08sVUFBVTtFQUMzQkMsT0FBTyxFQUFFO0lBQ0xDLE9BQU8sRUFBRSxJQUFJO0lBQ2JDLHNCQUFzQixFQUFFO0VBQzVCO0FBQ0osQ0FBQztBQUdNLGVBQWVDLGFBQWFBLENBQUEsRUFBRztFQUNsQyxJQUFJO0lBQ0EsTUFBTUMsSUFBSSxHQUFHLE1BQU1DLGNBQUcsQ0FBQ0MsT0FBTyxDQUFDaEIsU0FBUyxDQUFDO0lBQ3pDLE9BQU9jLElBQUk7RUFFZixDQUFDLENBQUMsT0FBT2pCLENBQUMsRUFBRTtJQUNSb0IsT0FBTyxDQUFDQyxHQUFHLENBQUNyQixDQUFDLENBQUM7SUFDZCxNQUFNQSxDQUFDO0VBQ1g7QUFDSiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_mssql","_interopRequireDefault","require","_config","e","__esModule","default","sqlConfig","user","config","dbUser","password","dbPassword","server","dbServer","database","dbDatabase","options","encrypt","trustServerCertificate","getConnection","pool","sql","connect","console","log"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\database\\","sources":["connection.js"],"sourcesContent":["import sql from 'mssql';\r\nimport config from '../config'\r\n\r\nconst sqlConfig = {\r\n    user: config.dbUser,\r\n    password: config.dbPassword,\r\n    server: config.dbServer,\r\n    database: config.dbDatabase,\r\n    options: {\r\n        encrypt: true,\r\n        trustServerCertificate: true\r\n    }\r\n}\r\n\r\n\r\nexport async function getConnection() {\r\n    try {\r\n        const pool = await sql.connect(sqlConfig);\r\n        return pool;\r\n        \r\n    } catch (e) {\r\n        console.log(e);\r\n        throw e;\r\n    }\r\n}\r\n\r\nexport {sql}"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA8B,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE9B,MAAMG,SAAS,GAAG;EACdC,IAAI,EAAEC,eAAM,CAACC,MAAM;EACnBC,QAAQ,EAAEF,eAAM,CAACG,UAAU;EAC3BC,MAAM,EAAEJ,eAAM,CAACK,QAAQ;EACvBC,QAAQ,EAAEN,eAAM,CAACO,UAAU;EAC3BC,OAAO,EAAE;IACLC,OAAO,EAAE,IAAI;IACbC,sBAAsB,EAAE;EAC5B;AACJ,CAAC;AAGM,eAAeC,aAAaA,CAAA,EAAG;EAClC,IAAI;IACA,MAAMC,IAAI,GAAG,MAAMC,cAAG,CAACC,OAAO,CAAChB,SAAS,CAAC;IACzC,OAAOc,IAAI;EAEf,CAAC,CAAC,OAAOjB,CAAC,EAAE;IACRoB,OAAO,CAACC,GAAG,CAACrB,CAAC,CAAC;IACd,MAAMA,CAAC;EACX;AACJ","ignoreList":[]}},"mtime":1718224475630},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\middleware\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\middleware\\\\authMiddleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.authenticateToken = void 0;\nvar _jsonwebtoken = require(\"jsonwebtoken\");\nconst authenticateToken = (req, res, next) => {\n  const authHeader = req.headers['authorization'];\n  const token = authHeader && authHeader.split(' ')[1];\n  if (token == null) {\n    return res.sendStatus(401);\n  }\n  (0, _jsonwebtoken.verify)(token, process.env.TOKEN, (err, user) => {\n    if (err) {\n      return res.sendStatus(403);\n    }\n    req.user = user;\n    next();\n  });\n};\nexports.authenticateToken = authenticateToken;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwicmVxdWlyZSIsImF1dGhlbnRpY2F0ZVRva2VuIiwicmVxIiwicmVzIiwibmV4dCIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwidG9rZW4iLCJzcGxpdCIsInNlbmRTdGF0dXMiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiVE9LRU4iLCJlcnIiLCJ1c2VyIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFVUTVxcOW5vXFxXZWJfSW50ZWdyYWxcXGJsb2dfYmFja1xcQmxvZ19CYWNrXFxzcmNcXG1pZGRsZXdhcmVcXCIsInNvdXJjZXMiOlsiYXV0aE1pZGRsZXdhcmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmVyaWZ5IH0gZnJvbSAnanNvbndlYnRva2VuJztcclxuXHJcbmV4cG9ydCBjb25zdCAgYXV0aGVudGljYXRlVG9rZW4gPSAocmVxLCByZXMsIG5leHQpID0+e1xyXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzWydhdXRob3JpemF0aW9uJ107XHJcbiAgICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIgJiYgYXV0aEhlYWRlci5zcGxpdCgnICcpWzFdO1xyXG5cclxuICAgIGlmICh0b2tlbiA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDQwMSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5UT0tFTiwgKGVyciwgdXNlcikgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDQwMylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlcS51c2VyID0gdXNlcjtcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICB9KTtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLGFBQUEsR0FBQUMsT0FBQTtBQUVPLE1BQU9DLGlCQUFpQixHQUFHQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFJO0VBQ2pELE1BQU1DLFVBQVUsR0FBR0gsR0FBRyxDQUFDSSxPQUFPLENBQUMsZUFBZSxDQUFDO0VBQy9DLE1BQU1DLEtBQUssR0FBR0YsVUFBVSxJQUFJQSxVQUFVLENBQUNHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFFcEQsSUFBSUQsS0FBSyxJQUFJLElBQUksRUFBRTtJQUNmLE9BQU9KLEdBQUcsQ0FBQ00sVUFBVSxDQUFDLEdBQUcsQ0FBQztFQUM5QjtFQUVBLElBQUFDLG9CQUFNLEVBQUNILEtBQUssRUFBRUksT0FBTyxDQUFDQyxHQUFHLENBQUNDLEtBQUssRUFBRSxDQUFDQyxHQUFHLEVBQUVDLElBQUksS0FBSztJQUM1QyxJQUFJRCxHQUFHLEVBQUU7TUFDTCxPQUFPWCxHQUFHLENBQUNNLFVBQVUsQ0FBQyxHQUFHLENBQUM7SUFDOUI7SUFFQVAsR0FBRyxDQUFDYSxJQUFJLEdBQUdBLElBQUk7SUFDZlgsSUFBSSxDQUFDLENBQUM7RUFDVixDQUFDLENBQUM7QUFDTixDQUFDO0FBQUFZLE9BQUEsQ0FBQWYsaUJBQUEsR0FBQUEsaUJBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_jsonwebtoken","require","authenticateToken","req","res","next","authHeader","headers","token","split","sendStatus","verify","process","env","TOKEN","err","user","exports"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\src\\middleware\\","sources":["authMiddleware.js"],"sourcesContent":["import { verify } from 'jsonwebtoken';\r\n\r\nexport const  authenticateToken = (req, res, next) =>{\r\n    const authHeader = req.headers['authorization'];\r\n    const token = authHeader && authHeader.split(' ')[1];\r\n\r\n    if (token == null) {\r\n        return res.sendStatus(401);\r\n    }\r\n\r\n    verify(token, process.env.TOKEN, (err, user) => {\r\n        if (err) {\r\n            return res.sendStatus(403)\r\n        }\r\n\r\n        req.user = user;\r\n        next();\r\n    });\r\n}\r\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,OAAA;AAEO,MAAOC,iBAAiB,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EACjD,MAAMC,UAAU,GAAGH,GAAG,CAACI,OAAO,CAAC,eAAe,CAAC;EAC/C,MAAMC,KAAK,GAAGF,UAAU,IAAIA,UAAU,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAEpD,IAAID,KAAK,IAAI,IAAI,EAAE;IACf,OAAOJ,GAAG,CAACM,UAAU,CAAC,GAAG,CAAC;EAC9B;EAEA,IAAAC,oBAAM,EAACH,KAAK,EAAEI,OAAO,CAACC,GAAG,CAACC,KAAK,EAAE,CAACC,GAAG,EAAEC,IAAI,KAAK;IAC5C,IAAID,GAAG,EAAE;MACL,OAAOX,GAAG,CAACM,UAAU,CAAC,GAAG,CAAC;IAC9B;IAEAP,GAAG,CAACa,IAAI,GAAGA,IAAI;IACfX,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;AACN,CAAC;AAAAY,OAAA,CAAAf,iBAAA,GAAAA,iBAAA","ignoreList":[]}},"mtime":1718563035370},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\database\\\\querys.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.queries = void 0;\nconst queries = exports.queries = {\n  //querys de los usuarios\n  getUser: \"SELECT name, lastname, mail, pfp FROM Usuario\",\n  insertUser: \"INSERT INTO Usuario (name, lastname, mail, password, pfp, status) VALUES (@name, @lastname, @mail, @password, @pfp, @status)\",\n  userExist: \"SELECT * FROM Usuario WHERE mail = @mail\",\n  updateUser: \"UPDATE Usuario SET name = @name, lastname = @lastname, password = @password, pfp = @pfp WHERE mail = @mail\",\n  //querys de los posts\n  insertPost: \"INSERT INTO Posts (tittle, textDescrip, picture) OUTPUT INSERTED.id VALUES (@tittle, @textDescrip, @picture)\",\n  updatePost: \"UPDATE Posts SET tittle = @tittle, textDescrip = @textDescrip, picture = @picture WHERE id = @id\",\n  deletePost: \"DELETE FROM Posts WHERE id = @id\",\n  getPost: \"SELECT * FROM Posts WHERE id = @id\",\n  getPosts: \"SELECT * FROM Posts\",\n  //este no requiere token\n  getUserPosts: \"SELECT * FROM Posts INNER JOIN UserPosts ON posts.id = userPosts.idPost WHERE UserPosts.idUser = @idUser\",\n  //querys tabla UsuarioPost\n  insertUserPost: \"INSERT INTO UserPosts (idUser, idPost) VALUES (@idUser, @idPost)\"\n  // getUserPost: \"SELECT * FROM UsuarioPost WHERE id_user = @id_user\",\n  // deleteUserPost: \"DELETE FROM UsuarioPost WHERE id_user = @id_user AND id_post = @id_post\",\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJxdWVyaWVzIiwiZXhwb3J0cyIsImdldFVzZXIiLCJpbnNlcnRVc2VyIiwidXNlckV4aXN0IiwidXBkYXRlVXNlciIsImluc2VydFBvc3QiLCJ1cGRhdGVQb3N0IiwiZGVsZXRlUG9zdCIsImdldFBvc3QiLCJnZXRQb3N0cyIsImdldFVzZXJQb3N0cyIsImluc2VydFVzZXJQb3N0Il0sInNvdXJjZVJvb3QiOiJEOlxcVVRNXFw5bm9cXFdlYl9JbnRlZ3JhbFxcYmxvZ19iYWNrXFxCbG9nX0JhY2tcXGRhdGFiYXNlXFwiLCJzb3VyY2VzIjpbInF1ZXJ5cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZXhwb3J0IGNvbnN0IHF1ZXJpZXMgPSB7XHJcblxyXG4gICAgLy9xdWVyeXMgZGUgbG9zIHVzdWFyaW9zXHJcbiAgICBnZXRVc2VyOiBcIlNFTEVDVCBuYW1lLCBsYXN0bmFtZSwgbWFpbCwgcGZwIEZST00gVXN1YXJpb1wiLFxyXG4gICAgaW5zZXJ0VXNlcjogXCJJTlNFUlQgSU5UTyBVc3VhcmlvIChuYW1lLCBsYXN0bmFtZSwgbWFpbCwgcGFzc3dvcmQsIHBmcCwgc3RhdHVzKSBWQUxVRVMgKEBuYW1lLCBAbGFzdG5hbWUsIEBtYWlsLCBAcGFzc3dvcmQsIEBwZnAsIEBzdGF0dXMpXCIsXHJcbiAgICB1c2VyRXhpc3Q6IFwiU0VMRUNUICogRlJPTSBVc3VhcmlvIFdIRVJFIG1haWwgPSBAbWFpbFwiLFxyXG4gICAgdXBkYXRlVXNlcjogXCJVUERBVEUgVXN1YXJpbyBTRVQgbmFtZSA9IEBuYW1lLCBsYXN0bmFtZSA9IEBsYXN0bmFtZSwgcGFzc3dvcmQgPSBAcGFzc3dvcmQsIHBmcCA9IEBwZnAgV0hFUkUgbWFpbCA9IEBtYWlsXCIsXHJcblxyXG5cclxuXHJcbiAgICAvL3F1ZXJ5cyBkZSBsb3MgcG9zdHNcclxuICAgIGluc2VydFBvc3Q6IFwiSU5TRVJUIElOVE8gUG9zdHMgKHRpdHRsZSwgdGV4dERlc2NyaXAsIHBpY3R1cmUpIE9VVFBVVCBJTlNFUlRFRC5pZCBWQUxVRVMgKEB0aXR0bGUsIEB0ZXh0RGVzY3JpcCwgQHBpY3R1cmUpXCIsXHJcbiAgICB1cGRhdGVQb3N0OiBcIlVQREFURSBQb3N0cyBTRVQgdGl0dGxlID0gQHRpdHRsZSwgdGV4dERlc2NyaXAgPSBAdGV4dERlc2NyaXAsIHBpY3R1cmUgPSBAcGljdHVyZSBXSEVSRSBpZCA9IEBpZFwiLFxyXG4gICAgZGVsZXRlUG9zdDogXCJERUxFVEUgRlJPTSBQb3N0cyBXSEVSRSBpZCA9IEBpZFwiLFxyXG4gICAgZ2V0UG9zdDogXCJTRUxFQ1QgKiBGUk9NIFBvc3RzIFdIRVJFIGlkID0gQGlkXCIsXHJcbiAgICBnZXRQb3N0czogXCJTRUxFQ1QgKiBGUk9NIFBvc3RzXCIsIC8vZXN0ZSBubyByZXF1aWVyZSB0b2tlblxyXG4gICAgZ2V0VXNlclBvc3RzOiBcIlNFTEVDVCAqIEZST00gUG9zdHMgSU5ORVIgSk9JTiBVc2VyUG9zdHMgT04gcG9zdHMuaWQgPSB1c2VyUG9zdHMuaWRQb3N0IFdIRVJFIFVzZXJQb3N0cy5pZFVzZXIgPSBAaWRVc2VyXCIsXHJcblxyXG4gICAgLy9xdWVyeXMgdGFibGEgVXN1YXJpb1Bvc3RcclxuICAgIGluc2VydFVzZXJQb3N0OiBcIklOU0VSVCBJTlRPIFVzZXJQb3N0cyAoaWRVc2VyLCBpZFBvc3QpIFZBTFVFUyAoQGlkVXNlciwgQGlkUG9zdClcIixcclxuICAgIC8vIGdldFVzZXJQb3N0OiBcIlNFTEVDVCAqIEZST00gVXN1YXJpb1Bvc3QgV0hFUkUgaWRfdXNlciA9IEBpZF91c2VyXCIsXHJcbiAgICAvLyBkZWxldGVVc2VyUG9zdDogXCJERUxFVEUgRlJPTSBVc3VhcmlvUG9zdCBXSEVSRSBpZF91c2VyID0gQGlkX3VzZXIgQU5EIGlkX3Bvc3QgPSBAaWRfcG9zdFwiLFxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ08sTUFBTUEsT0FBTyxHQUFBQyxPQUFBLENBQUFELE9BQUEsR0FBRztFQUVuQjtFQUNBRSxPQUFPLEVBQUUsK0NBQStDO0VBQ3hEQyxVQUFVLEVBQUUsOEhBQThIO0VBQzFJQyxTQUFTLEVBQUUsMENBQTBDO0VBQ3JEQyxVQUFVLEVBQUUsNEdBQTRHO0VBSXhIO0VBQ0FDLFVBQVUsRUFBRSw4R0FBOEc7RUFDMUhDLFVBQVUsRUFBRSxrR0FBa0c7RUFDOUdDLFVBQVUsRUFBRSxrQ0FBa0M7RUFDOUNDLE9BQU8sRUFBRSxvQ0FBb0M7RUFDN0NDLFFBQVEsRUFBRSxxQkFBcUI7RUFBRTtFQUNqQ0MsWUFBWSxFQUFFLDBHQUEwRztFQUV4SDtFQUNBQyxjQUFjLEVBQUU7RUFDaEI7RUFDQTtBQUNKLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["queries","exports","getUser","insertUser","userExist","updateUser","insertPost","updatePost","deletePost","getPost","getPosts","getUserPosts","insertUserPost"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\database\\","sources":["querys.js"],"sourcesContent":["\r\nexport const queries = {\r\n\r\n    //querys de los usuarios\r\n    getUser: \"SELECT name, lastname, mail, pfp FROM Usuario\",\r\n    insertUser: \"INSERT INTO Usuario (name, lastname, mail, password, pfp, status) VALUES (@name, @lastname, @mail, @password, @pfp, @status)\",\r\n    userExist: \"SELECT * FROM Usuario WHERE mail = @mail\",\r\n    updateUser: \"UPDATE Usuario SET name = @name, lastname = @lastname, password = @password, pfp = @pfp WHERE mail = @mail\",\r\n\r\n\r\n\r\n    //querys de los posts\r\n    insertPost: \"INSERT INTO Posts (tittle, textDescrip, picture) OUTPUT INSERTED.id VALUES (@tittle, @textDescrip, @picture)\",\r\n    updatePost: \"UPDATE Posts SET tittle = @tittle, textDescrip = @textDescrip, picture = @picture WHERE id = @id\",\r\n    deletePost: \"DELETE FROM Posts WHERE id = @id\",\r\n    getPost: \"SELECT * FROM Posts WHERE id = @id\",\r\n    getPosts: \"SELECT * FROM Posts\", //este no requiere token\r\n    getUserPosts: \"SELECT * FROM Posts INNER JOIN UserPosts ON posts.id = userPosts.idPost WHERE UserPosts.idUser = @idUser\",\r\n\r\n    //querys tabla UsuarioPost\r\n    insertUserPost: \"INSERT INTO UserPosts (idUser, idPost) VALUES (@idUser, @idPost)\",\r\n    // getUserPost: \"SELECT * FROM UsuarioPost WHERE id_user = @id_user\",\r\n    // deleteUserPost: \"DELETE FROM UsuarioPost WHERE id_user = @id_user AND id_post = @id_post\",\r\n}\r\n"],"mappings":";;;;;;AACO,MAAMA,OAAO,GAAAC,OAAA,CAAAD,OAAA,GAAG;EAEnB;EACAE,OAAO,EAAE,+CAA+C;EACxDC,UAAU,EAAE,8HAA8H;EAC1IC,SAAS,EAAE,0CAA0C;EACrDC,UAAU,EAAE,4GAA4G;EAIxH;EACAC,UAAU,EAAE,8GAA8G;EAC1HC,UAAU,EAAE,kGAAkG;EAC9GC,UAAU,EAAE,kCAAkC;EAC9CC,OAAO,EAAE,oCAAoC;EAC7CC,QAAQ,EAAE,qBAAqB;EAAE;EACjCC,YAAY,EAAE,0GAA0G;EAExH;EACAC,cAAc,EAAE;EAChB;EACA;AACJ,CAAC","ignoreList":[]}},"mtime":1718588038768},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\middleware\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\middleware\\\\authMiddleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.authenticateToken = void 0;\nvar _jsonwebtoken = require(\"jsonwebtoken\");\nconst authenticateToken = (req, res, next) => {\n  const authHeader = req.headers['authorization'];\n  const token = authHeader && authHeader.split(' ')[1];\n  if (token == null) {\n    return res.sendStatus(401);\n  }\n  (0, _jsonwebtoken.verify)(token, process.env.TOKEN, (err, user) => {\n    if (err) {\n      return res.sendStatus(403);\n    }\n    req.user = user;\n    next();\n  });\n};\nexports.authenticateToken = authenticateToken;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwicmVxdWlyZSIsImF1dGhlbnRpY2F0ZVRva2VuIiwicmVxIiwicmVzIiwibmV4dCIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwidG9rZW4iLCJzcGxpdCIsInNlbmRTdGF0dXMiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiVE9LRU4iLCJlcnIiLCJ1c2VyIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFVUTVxcOW5vXFxXZWJfSW50ZWdyYWxcXGJsb2dfYmFja1xcQmxvZ19CYWNrXFxzcmNcXG1pZGRsZXdhcmVcXCIsInNvdXJjZXMiOlsiYXV0aE1pZGRsZXdhcmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmVyaWZ5IH0gZnJvbSAnanNvbndlYnRva2VuJztcclxuXHJcbmV4cG9ydCBjb25zdCAgYXV0aGVudGljYXRlVG9rZW4gPSAocmVxLCByZXMsIG5leHQpID0+e1xyXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzWydhdXRob3JpemF0aW9uJ107XHJcbiAgICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIgJiYgYXV0aEhlYWRlci5zcGxpdCgnICcpWzFdO1xyXG5cclxuICAgIGlmICh0b2tlbiA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDQwMSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5UT0tFTiwgKGVyciwgdXNlcikgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDQwMylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlcS51c2VyID0gdXNlcjtcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICB9KTtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLGFBQUEsR0FBQUMsT0FBQTtBQUVPLE1BQU9DLGlCQUFpQixHQUFHQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFJO0VBQ2pELE1BQU1DLFVBQVUsR0FBR0gsR0FBRyxDQUFDSSxPQUFPLENBQUMsZUFBZSxDQUFDO0VBQy9DLE1BQU1DLEtBQUssR0FBR0YsVUFBVSxJQUFJQSxVQUFVLENBQUNHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFFcEQsSUFBSUQsS0FBSyxJQUFJLElBQUksRUFBRTtJQUNmLE9BQU9KLEdBQUcsQ0FBQ00sVUFBVSxDQUFDLEdBQUcsQ0FBQztFQUM5QjtFQUVBLElBQUFDLG9CQUFNLEVBQUNILEtBQUssRUFBRUksT0FBTyxDQUFDQyxHQUFHLENBQUNDLEtBQUssRUFBRSxDQUFDQyxHQUFHLEVBQUVDLElBQUksS0FBSztJQUM1QyxJQUFJRCxHQUFHLEVBQUU7TUFDTCxPQUFPWCxHQUFHLENBQUNNLFVBQVUsQ0FBQyxHQUFHLENBQUM7SUFDOUI7SUFFQVAsR0FBRyxDQUFDYSxJQUFJLEdBQUdBLElBQUk7SUFDZlgsSUFBSSxDQUFDLENBQUM7RUFDVixDQUFDLENBQUM7QUFDTixDQUFDO0FBQUFZLE9BQUEsQ0FBQWYsaUJBQUEsR0FBQUEsaUJBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_jsonwebtoken","require","authenticateToken","req","res","next","authHeader","headers","token","split","sendStatus","verify","process","env","TOKEN","err","user","exports"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\src\\middleware\\","sources":["authMiddleware.js"],"sourcesContent":["import { verify } from 'jsonwebtoken';\r\n\r\nexport const  authenticateToken = (req, res, next) =>{\r\n    const authHeader = req.headers['authorization'];\r\n    const token = authHeader && authHeader.split(' ')[1];\r\n\r\n    if (token == null) {\r\n        return res.sendStatus(401);\r\n    }\r\n\r\n    verify(token, process.env.TOKEN, (err, user) => {\r\n        if (err) {\r\n            return res.sendStatus(403)\r\n        }\r\n\r\n        req.user = user;\r\n        next();\r\n    });\r\n}\r\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,OAAA;AAEO,MAAOC,iBAAiB,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EACjD,MAAMC,UAAU,GAAGH,GAAG,CAACI,OAAO,CAAC,eAAe,CAAC;EAC/C,MAAMC,KAAK,GAAGF,UAAU,IAAIA,UAAU,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAEpD,IAAID,KAAK,IAAI,IAAI,EAAE;IACf,OAAOJ,GAAG,CAACM,UAAU,CAAC,GAAG,CAAC;EAC9B;EAEA,IAAAC,oBAAM,EAACH,KAAK,EAAEI,OAAO,CAACC,GAAG,CAACC,KAAK,EAAE,CAACC,GAAG,EAAEC,IAAI,KAAK;IAC5C,IAAID,GAAG,EAAE;MACL,OAAOX,GAAG,CAACM,UAAU,CAAC,GAAG,CAAC;IAC9B;IAEAP,GAAG,CAACa,IAAI,GAAGA,IAAI;IACfX,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;AACN,CAAC;AAAAY,OAAA,CAAAf,iBAAA,GAAAA,iBAAA","ignoreList":[]}},"mtime":1718588431709},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = require(\"dotenv\");\n(0, _dotenv.config)();\nvar _default = exports.default = {\n  dbUser: process.env.DB_USER || '',\n  dbPassword: process.env.DB_PASSWORD || '',\n  dbServer: process.env.DB_SERVER || '',\n  dbDatabase: process.env.DB_NAME || ''\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZG90ZW52IiwicmVxdWlyZSIsImNvbmZpZyIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJkYlVzZXIiLCJwcm9jZXNzIiwiZW52IiwiREJfVVNFUiIsImRiUGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRiU2VydmVyIiwiREJfU0VSVkVSIiwiZGJEYXRhYmFzZSIsIkRCX05BTUUiXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXEJsb2dfQmFja1xcIiwic291cmNlcyI6WyJjb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnZG90ZW52J1xyXG5jb25maWcoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIGRiVXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAnJyxcclxuICAgIGRiUGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8ICcnLFxyXG4gICAgZGJTZXJ2ZXI6IHByb2Nlc3MuZW52LkRCX1NFUlZFUiB8fCAnJyxcclxuICAgIGRiRGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX05BTUUgfHwgJydcclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsY0FBTSxFQUFDLENBQUM7QUFBQyxJQUFBQyxRQUFBLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUVNO0VBQ1hDLE1BQU0sRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU8sSUFBSSxFQUFFO0VBQ2pDQyxVQUFVLEVBQUVILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxXQUFXLElBQUksRUFBRTtFQUN6Q0MsUUFBUSxFQUFFTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0ssU0FBUyxJQUFJLEVBQUU7RUFDckNDLFVBQVUsRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPLE9BQU8sSUFBSTtBQUN2QyxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_dotenv","require","config","_default","exports","default","dbUser","process","env","DB_USER","dbPassword","DB_PASSWORD","dbServer","DB_SERVER","dbDatabase","DB_NAME"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\","sources":["config.js"],"sourcesContent":["import { config } from 'dotenv'\r\nconfig();\r\n\r\nexport default {\r\n    dbUser: process.env.DB_USER || '',\r\n    dbPassword: process.env.DB_PASSWORD || '',\r\n    dbServer: process.env.DB_SERVER || '',\r\n    dbDatabase: process.env.DB_NAME || ''\r\n}"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,cAAM,EAAC,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEM;EACXC,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO,IAAI,EAAE;EACjCC,UAAU,EAAEH,OAAO,CAACC,GAAG,CAACG,WAAW,IAAI,EAAE;EACzCC,QAAQ,EAAEL,OAAO,CAACC,GAAG,CAACK,SAAS,IAAI,EAAE;EACrCC,UAAU,EAAEP,OAAO,CAACC,GAAG,CAACO,OAAO,IAAI;AACvC,CAAC","ignoreList":[]}},"mtime":1718369365840},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = require(\"dotenv\");\n(0, _dotenv.config)();\nvar _default = exports.default = {\n  dbUser: process.env.DB_USER || '',\n  dbPassword: process.env.DB_PASSWORD || '',\n  dbServer: process.env.DB_SERVER || '',\n  dbDatabase: process.env.DB_NAME || ''\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZG90ZW52IiwicmVxdWlyZSIsImNvbmZpZyIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJkYlVzZXIiLCJwcm9jZXNzIiwiZW52IiwiREJfVVNFUiIsImRiUGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRiU2VydmVyIiwiREJfU0VSVkVSIiwiZGJEYXRhYmFzZSIsIkRCX05BTUUiXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXEJsb2dfQmFja1xcIiwic291cmNlcyI6WyJjb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnZG90ZW52J1xyXG5jb25maWcoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIGRiVXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAnJyxcclxuICAgIGRiUGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8ICcnLFxyXG4gICAgZGJTZXJ2ZXI6IHByb2Nlc3MuZW52LkRCX1NFUlZFUiB8fCAnJyxcclxuICAgIGRiRGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX05BTUUgfHwgJydcclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsY0FBTSxFQUFDLENBQUM7QUFBQyxJQUFBQyxRQUFBLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUVNO0VBQ1hDLE1BQU0sRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU8sSUFBSSxFQUFFO0VBQ2pDQyxVQUFVLEVBQUVILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxXQUFXLElBQUksRUFBRTtFQUN6Q0MsUUFBUSxFQUFFTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0ssU0FBUyxJQUFJLEVBQUU7RUFDckNDLFVBQVUsRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPLE9BQU8sSUFBSTtBQUN2QyxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_dotenv","require","config","_default","exports","default","dbUser","process","env","DB_USER","dbPassword","DB_PASSWORD","dbServer","DB_SERVER","dbDatabase","DB_NAME"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\","sources":["config.js"],"sourcesContent":["import { config } from 'dotenv'\r\nconfig();\r\n\r\nexport default {\r\n    dbUser: process.env.DB_USER || '',\r\n    dbPassword: process.env.DB_PASSWORD || '',\r\n    dbServer: process.env.DB_SERVER || '',\r\n    dbDatabase: process.env.DB_NAME || ''\r\n}"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,cAAM,EAAC,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEM;EACXC,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO,IAAI,EAAE;EACjCC,UAAU,EAAEH,OAAO,CAACC,GAAG,CAACG,WAAW,IAAI,EAAE;EACzCC,QAAQ,EAAEL,OAAO,CAACC,GAAG,CAACK,SAAS,IAAI,EAAE;EACrCC,UAAU,EAAEP,OAAO,CAACC,GAAG,CAACO,OAAO,IAAI;AACvC,CAAC","ignoreList":[]}},"mtime":1718369365840},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireWildcard(require(\"express\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _user = _interopRequireDefault(require(\"./routes/user.routes\"));\nvar _multer = _interopRequireDefault(require(\"multer\"));\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\nvar _authMiddleware = require(\"./middleware/authMiddleware\");\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n_dotenv.default.config();\nconst app = (0, _express.default)();\nconst upload = (0, _multer.default)();\napp.use((0, _cors.default)({\n  origin: \"*\"\n}));\napp.use(upload.fields([{\n  name: 'pfp',\n  maxCount: 1\n}]));\napp.use(_express.default.json());\nconst PORT = process.env.PORT || 3000;\nconst publicRoutes = ['/api/user/login', '/api/user/registerUser'];\napp.use((req, res, next) => {\n  if (publicRoutes.includes(req.path)) {\n    return next();\n  }\n  ;\n  (0, _authMiddleware.authenticateToken)(req, res, next);\n});\napp.listen(PORT, () => console.log(`App listening on port ${PORT}`));\napp.use(_user.default);\nvar _default = exports.default = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9jb3JzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl91c2VyIiwiX211bHRlciIsIl9ib2R5UGFyc2VyIiwiX2F1dGhNaWRkbGV3YXJlIiwiX2RvdGVudiIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIldlYWtNYXAiLCJyIiwidCIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsImRvdGVudiIsImNvbmZpZyIsImFwcCIsImV4cHJlc3MiLCJ1cGxvYWQiLCJtdWx0ZXIiLCJ1c2UiLCJjb3JzIiwib3JpZ2luIiwiZmllbGRzIiwibmFtZSIsIm1heENvdW50IiwianNvbiIsIlBPUlQiLCJwcm9jZXNzIiwiZW52IiwicHVibGljUm91dGVzIiwicmVxIiwicmVzIiwibmV4dCIsImluY2x1ZGVzIiwicGF0aCIsImF1dGhlbnRpY2F0ZVRva2VuIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsInVzZXJSb3V0ZXMiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFxVVE1cXEluZ2VuaWVyaWFcXDlub1xcV2ViX0ludGVncmFsXFxCbG9nX0JhY2tcXHNyY1xcIiwic291cmNlcyI6WyJhcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MsIHtqc29ufSBmcm9tICdleHByZXNzJztcclxuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcclxuaW1wb3J0IHVzZXJSb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvdXNlci5yb3V0ZXMnO1xyXG5pbXBvcnQgbXVsdGVyIGZyb20gXCJtdWx0ZXJcIjtcclxuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInXHJcbmltcG9ydCB7IGF1dGhlbnRpY2F0ZVRva2VuIH0gZnJvbSAnLi9taWRkbGV3YXJlL2F1dGhNaWRkbGV3YXJlJztcclxuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xyXG5cclxuZG90ZW52LmNvbmZpZygpO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuY29uc3QgdXBsb2FkID0gbXVsdGVyKCk7XHJcblxyXG5hcHAudXNlKGNvcnMoeyBvcmlnaW46IFwiKlwifSkpO1xyXG5cclxuYXBwLnVzZSh1cGxvYWQuZmllbGRzKFt7IG5hbWU6ICdwZnAnLCBtYXhDb3VudDogMX1dKSk7XHJcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xyXG5cclxuY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMDtcclxuXHJcbmNvbnN0IHB1YmxpY1JvdXRlcyA9IFtcclxuICAgICcvYXBpL3VzZXIvbG9naW4nLFxyXG4gICAgJy9hcGkvdXNlci9yZWdpc3RlclVzZXInLFxyXG5dO1xyXG5cclxuXHJcbmFwcC51c2UoKCByZXEsIHJlcywgbmV4dCApID0+IHtcclxuICAgIGlmKHB1YmxpY1JvdXRlcy5pbmNsdWRlcyhyZXEucGF0aCkpIHtcclxuICAgICAgICByZXR1cm4gbmV4dCgpO1xyXG4gICAgfTtcclxuICAgIGF1dGhlbnRpY2F0ZVRva2VuKHJlcSwgcmVzLCBuZXh0KTtcclxufSk7XHJcblxyXG5cclxuYXBwLmxpc3RlbihQT1JULCAoKSA9PiBjb25zb2xlLmxvZyhgQXBwIGxpc3RlbmluZyBvbiBwb3J0ICR7UE9SVH1gKSk7XHJcbmFwcC51c2UodXNlclJvdXRlcyk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhcHA7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxLQUFB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","map":{"version":3,"names":["_express","_interopRequireWildcard","require","_cors","_interopRequireDefault","_user","_multer","_bodyParser","_authMiddleware","_dotenv","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","dotenv","config","app","express","upload","multer","use","cors","origin","fields","name","maxCount","json","PORT","process","env","publicRoutes","req","res","next","includes","path","authenticateToken","listen","console","log","userRoutes","_default","exports"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\src\\","sources":["app.js"],"sourcesContent":["import express, {json} from 'express';\r\nimport cors from \"cors\";\r\nimport userRoutes from './routes/user.routes';\r\nimport multer from \"multer\";\r\nimport bodyParser from 'body-parser'\r\nimport { authenticateToken } from './middleware/authMiddleware';\r\nimport dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nconst app = express();\r\n\r\nconst upload = multer();\r\n\r\napp.use(cors({ origin: \"*\"}));\r\n\r\napp.use(upload.fields([{ name: 'pfp', maxCount: 1}]));\r\napp.use(express.json());\r\n\r\nconst PORT = process.env.PORT || 3000;\r\n\r\nconst publicRoutes = [\r\n    '/api/user/login',\r\n    '/api/user/registerUser',\r\n];\r\n\r\n\r\napp.use(( req, res, next ) => {\r\n    if(publicRoutes.includes(req.path)) {\r\n        return next();\r\n    };\r\n    authenticateToken(req, res, next);\r\n});\r\n\r\n\r\napp.listen(PORT, () => console.log(`App listening on port ${PORT}`));\r\napp.use(userRoutes);\r\n\r\nexport default app;"],"mappings":"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","ignoreList":[]}},"mtime":1718231130839},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\routes\\\\user.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _userController = require(\"../controllers/userController\");\nconst router = (0, _express.Router)();\nrouter.post('/api/user/registerUser', _userController.registerUser);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsInJlcXVpcmUiLCJfdXNlckNvbnRyb2xsZXIiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwicmVnaXN0ZXJVc2VyIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiQzpcXFVUTVxcSW5nZW5pZXJpYVxcOW5vXFxXZWJfSW50ZWdyYWxcXEJsb2dfQmFja1xcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsidXNlci5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbmltcG9ydCB7IHJlZ2lzdGVyVXNlciB9IGZyb20gXCIuLi9jb250cm9sbGVycy91c2VyQ29udHJvbGxlclwiO1xyXG5cclxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2FwaS91c2VyL3JlZ2lzdGVyVXNlcicsIHJlZ2lzdGVyVXNlcik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFFQSxJQUFBQyxlQUFBLEdBQUFELE9BQUE7QUFFQSxNQUFNRSxNQUFNLEdBQUcsSUFBQUMsZUFBTSxFQUFDLENBQUM7QUFFdkJELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLHdCQUF3QixFQUFFQyw0QkFBWSxDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FFckNOLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_express","require","_userController","router","Router","post","registerUser","_default","exports","default"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\src\\routes\\","sources":["user.routes.js"],"sourcesContent":["import { Router } from \"express\";\r\n\r\nimport { registerUser } from \"../controllers/userController\";\r\n\r\nconst router = Router();\r\n\r\nrouter.post('/api/user/registerUser', registerUser);\r\n\r\nexport default router;"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAEA,IAAAC,eAAA,GAAAD,OAAA;AAEA,MAAME,MAAM,GAAG,IAAAC,eAAM,EAAC,CAAC;AAEvBD,MAAM,CAACE,IAAI,CAAC,wBAAwB,EAAEC,4BAAY,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAErCN,MAAM","ignoreList":[]}},"mtime":1718150459753},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\controllers\\\\userController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerUser = exports.login = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _expressValidator = require(\"express-validator\");\nvar _index = require(\"../../database/index\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst registerUser = async (req, res) => {\n  console.log(req.body);\n  console.log(req.files);\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    name,\n    lastname,\n    mail,\n    password,\n    status\n  } = req.body;\n  const pfp = req.files && req.files.pfp ? req.files.pfp[0] : null;\n  try {\n    const salt = await _bcrypt.default.genSalt(10);\n    const hashedPassword = await _bcrypt.default.hash(password, salt);\n    console.log(salt);\n    const user = {\n      name,\n      lastname,\n      mail,\n      password: hashedPassword,\n      pfp,\n      status\n    };\n    const params = {\n      name: user.name,\n      lastname: user.lastname,\n      mail: user.mail,\n      password: user.password,\n      pfp: user.pfp,\n      status: user.status\n    };\n    const result = await (0, _index.executeQuery)(_index.queries.insertUser, params);\n    const payload = {\n      user: {\n        id: result.insertId\n      }\n    };\n    _jsonwebtoken.default.sign(payload, process.env.TOKEN, {\n      expiresIn: '1 day'\n    }, (err, token) => {\n      if (err) {\n        console.error(err);\n        return res.status(500).json({\n          message: 'Error signing the token'\n        });\n      }\n      res.status(201).json({\n        message: 'success',\n        token: token\n      });\n    });\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Server Error\");\n  }\n};\nexports.registerUser = registerUser;\nconst login = async (req, res) => {\n  try {\n    const {\n      mail,\n      password\n    } = req.body;\n    if (!mail || !password) {\n      return res.status(400).json({\n        error: 'El correo y la contraseña son campos requeridos, intentelo de nuevo'\n      });\n    }\n    const userExist = await userExist(mail);\n    if (!userExist) {\n      console.warn('Error al intentar el inicio de sesion, intentelo de nuevo');\n      return res.status(401).json({\n        error: 'xd'\n      });\n    }\n    const user = userExist[0];\n    if (await _bcrypt.default.compare(password, user.password)) {\n      res.cookie('session', 'secure-session-token', {\n        httpOnly: true,\n        secure: true,\n        sameSite: 'strict'\n      });\n      console.log(`User ${mail} logged in successfully`);\n      const accessToken = _jsonwebtoken.default.sign({\n        userId: user.id\n      }, process.env.TOKEN, {\n        expiresIn: '1h'\n      });\n      res.json(accessToken);\n    } else {\n      console.warn(`Failed login attempt for correo ${mail}`);\n      response.status(401).json({\n        error: 'Invalid credentials'\n      });\n    }\n  } catch (err) {\n    console.error(err.message);\n    throw err;\n  }\n};\nexports.login = login;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYmNyeXB0IiwiX2V4cHJlc3NWYWxpZGF0b3IiLCJfaW5kZXgiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJyZWdpc3RlclVzZXIiLCJyZXEiLCJyZXMiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsImZpbGVzIiwiZXJyb3JzIiwidmFsaWRhdGlvblJlc3VsdCIsImlzRW1wdHkiLCJzdGF0dXMiLCJqc29uIiwiYXJyYXkiLCJuYW1lIiwibGFzdG5hbWUiLCJtYWlsIiwicGFzc3dvcmQiLCJwZnAiLCJzYWx0IiwiYmNyeXB0IiwiZ2VuU2FsdCIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaCIsInVzZXIiLCJwYXJhbXMiLCJyZXN1bHQiLCJleGVjdXRlUXVlcnkiLCJxdWVyaWVzIiwiaW5zZXJ0VXNlciIsInBheWxvYWQiLCJpZCIsImluc2VydElkIiwiand0Iiwic2lnbiIsInByb2Nlc3MiLCJlbnYiLCJUT0tFTiIsImV4cGlyZXNJbiIsImVyciIsInRva2VuIiwiZXJyb3IiLCJtZXNzYWdlIiwic2VuZCIsImV4cG9ydHMiLCJsb2dpbiIsInVzZXJFeGlzdCIsIndhcm4iLCJjb21wYXJlIiwiY29va2llIiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJzYW1lU2l0ZSIsImFjY2Vzc1Rva2VuIiwidXNlcklkIiwicmVzcG9uc2UiXSwic291cmNlUm9vdCI6IkM6XFxVVE1cXEluZ2VuaWVyaWFcXDlub1xcV2ViX0ludGVncmFsXFxCbG9nX0JhY2tcXHNyY1xcY29udHJvbGxlcnNcXCIsInNvdXJjZXMiOlsidXNlckNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcbmltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xyXG5pbXBvcnQgeyB2YWxpZGF0aW9uUmVzdWx0IH0gZnJvbSBcImV4cHJlc3MtdmFsaWRhdG9yXCI7XHJcbmltcG9ydCB7IHVzZXJFeGlzdCwgZXhlY3V0ZVF1ZXJ5LCBxdWVyaWVzIH0gZnJvbSBcIi4uLy4uL2RhdGFiYXNlL2luZGV4XCI7XHJcblxyXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJVc2VyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc29sZS5sb2cocmVxLmJvZHkpO1xyXG4gIGNvbnNvbGUubG9nKHJlcS5maWxlcyk7XHJcbiAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xyXG4gIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHsgbmFtZSwgbGFzdG5hbWUsIG1haWwsIHBhc3N3b3JkLCBzdGF0dXMgfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnN0IHBmcCA9IHJlcS5maWxlcyAmJiByZXEuZmlsZXMucGZwID8gcmVxLmZpbGVzLnBmcFswXSA6IG51bGw7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdCgxMCk7XHJcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0KTtcclxuICAgIGNvbnNvbGUubG9nKHNhbHQpO1xyXG5cclxuICAgIGNvbnN0IHVzZXIgPSB7XHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIGxhc3RuYW1lLFxyXG4gICAgICBtYWlsLFxyXG4gICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXHJcbiAgICAgIHBmcCxcclxuICAgICAgc3RhdHVzLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgbGFzdG5hbWU6IHVzZXIubGFzdG5hbWUsXHJcbiAgICAgIG1haWw6IHVzZXIubWFpbCxcclxuICAgICAgcGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQsXHJcbiAgICAgIHBmcDogdXNlci5wZnAsXHJcbiAgICAgIHN0YXR1czogdXNlci5zdGF0dXMsXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHF1ZXJpZXMuaW5zZXJ0VXNlciwgcGFyYW1zKTtcclxuXHJcbiAgICBjb25zdCBwYXlsb2FkID0ge1xyXG4gICAgICB1c2VyOiB7XHJcbiAgICAgICAgaWQ6IHJlc3VsdC5pbnNlcnRJZCxcclxuICAgICAgfSxcclxuICAgIH07XHJcblxyXG4gICAgand0LnNpZ24oXHJcbiAgICAgIHBheWxvYWQsXHJcbiAgICAgIHByb2Nlc3MuZW52LlRPS0VOLFxyXG4gICAgICB7IGV4cGlyZXNJbjogJzEgZGF5JyB9LFxyXG4gICAgICAoZXJyLCB0b2tlbikgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciBzaWduaW5nIHRoZSB0b2tlbicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ3N1Y2Nlc3MnLCB0b2tlbjogdG9rZW4gfSk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIlNlcnZlciBFcnJvclwiKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgbG9naW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuXHJcbiAgdHJ5IHtcclxuXHJcbiAgICBjb25zdCB7IG1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIW1haWwgfHwgIXBhc3N3b3JkKSB7XHJcblxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0VsIGNvcnJlbyB5IGxhIGNvbnRyYXNlw7FhIHNvbiBjYW1wb3MgcmVxdWVyaWRvcywgaW50ZW50ZWxvIGRlIG51ZXZvJyB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlckV4aXN0ID0gYXdhaXQgdXNlckV4aXN0KG1haWwpO1xyXG5cclxuICAgIGlmICghdXNlckV4aXN0KSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignRXJyb3IgYWwgaW50ZW50YXIgZWwgaW5pY2lvIGRlIHNlc2lvbiwgaW50ZW50ZWxvIGRlIG51ZXZvJyk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAneGQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSB1c2VyRXhpc3RbMF07XHJcblxyXG4gICAgaWYgKGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKSkge1xyXG5cclxuICAgICAgcmVzLmNvb2tpZSgnc2Vzc2lvbicsICdzZWN1cmUtc2Vzc2lvbi10b2tlbicsIHtcclxuICAgICAgICBodHRwT25seTogdHJ1ZSxcclxuICAgICAgICBzZWN1cmU6IHRydWUsXHJcbiAgICAgICAgc2FtZVNpdGU6ICdzdHJpY3QnXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coYFVzZXIgJHttYWlsfSBsb2dnZWQgaW4gc3VjY2Vzc2Z1bGx5YCk7XHJcblxyXG4gICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGp3dC5zaWduKHsgdXNlcklkOiB1c2VyLmlkIH0sIHByb2Nlc3MuZW52LlRPS0VOLCB7XHJcbiAgICAgICAgZXhwaXJlc0luOiAnMWgnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJlcy5qc29uKGFjY2Vzc1Rva2VuKTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCBsb2dpbiBhdHRlbXB0IGZvciBjb3JyZW8gJHttYWlsfWApO1xyXG4gICAgICByZXNwb25zZS5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGNyZWRlbnRpYWxzJyB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gIH0gY2F0Y2ggKGVycikge1xyXG5cclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xyXG4gICAgdGhyb3cgZXJyO1xyXG5cclxuICB9XHJcblxyXG5cclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsYUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsaUJBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLE1BQUEsR0FBQUgsT0FBQTtBQUF3RSxTQUFBRCx1QkFBQUssQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUVqRSxNQUFNRyxZQUFZLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDOUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSCxHQUFHLENBQUNJLElBQUksQ0FBQztFQUNyQkYsT0FBTyxDQUFDQyxHQUFHLENBQUNILEdBQUcsQ0FBQ0ssS0FBSyxDQUFDO0VBQ3RCLE1BQU1DLE1BQU0sR0FBRyxJQUFBQyxrQ0FBZ0IsRUFBQ1AsR0FBRyxDQUFDO0VBQ3BDLElBQUksQ0FBQ00sTUFBTSxDQUFDRSxPQUFPLENBQUMsQ0FBQyxFQUFFO0lBQ3JCLE9BQU9QLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUosTUFBTSxFQUFFQSxNQUFNLENBQUNLLEtBQUssQ0FBQztJQUFFLENBQUMsQ0FBQztFQUN6RDtFQUVBLE1BQU07SUFBRUMsSUFBSTtJQUFFQyxRQUFRO0lBQUVDLElBQUk7SUFBRUMs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","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_bcrypt","_expressValidator","_index","e","__esModule","default","registerUser","req","res","console","log","body","files","errors","validationResult","isEmpty","status","json","array","name","lastname","mail","password","pfp","salt","bcrypt","genSalt","hashedPassword","hash","user","params","result","executeQuery","queries","insertUser","payload","id","insertId","jwt","sign","process","env","TOKEN","expiresIn","err","token","error","message","send","exports","login","userExist","warn","compare","cookie","httpOnly","secure","sameSite","accessToken","userId","response"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\src\\controllers\\","sources":["userController.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\r\nimport bcrypt from \"bcrypt\";\r\nimport { validationResult } from \"express-validator\";\r\nimport { userExist, executeQuery, queries } from \"../../database/index\";\r\n\r\nexport const registerUser = async (req, res) => {\r\n  console.log(req.body);\r\n  console.log(req.files);\r\n  const errors = validationResult(req);\r\n  if (!errors.isEmpty()) {\r\n    return res.status(400).json({ errors: errors.array() });\r\n  }\r\n\r\n  const { name, lastname, mail, password, status } = req.body;\r\n  const pfp = req.files && req.files.pfp ? req.files.pfp[0] : null;\r\n  try {\r\n    const salt = await bcrypt.genSalt(10);\r\n    const hashedPassword = await bcrypt.hash(password, salt);\r\n    console.log(salt);\r\n\r\n    const user = {\r\n      name,\r\n      lastname,\r\n      mail,\r\n      password: hashedPassword,\r\n      pfp,\r\n      status,\r\n    };\r\n\r\n    const params = {\r\n      name: user.name,\r\n      lastname: user.lastname,\r\n      mail: user.mail,\r\n      password: user.password,\r\n      pfp: user.pfp,\r\n      status: user.status,\r\n    };\r\n    const result = await executeQuery(queries.insertUser, params);\r\n\r\n    const payload = {\r\n      user: {\r\n        id: result.insertId,\r\n      },\r\n    };\r\n\r\n    jwt.sign(\r\n      payload,\r\n      process.env.TOKEN,\r\n      { expiresIn: '1 day' },\r\n      (err, token) => {\r\n        if (err) {\r\n          console.error(err);\r\n          return res.status(500).json({ message: 'Error signing the token' });\r\n        }\r\n        res.status(201).json({ message: 'success', token: token });\r\n      }\r\n    );\r\n\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    res.status(500).send(\"Server Error\");\r\n  }\r\n};\r\n\r\nexport const login = async (req, res) => {\r\n\r\n  try {\r\n\r\n    const { mail, password } = req.body;\r\n\r\n    if (!mail || !password) {\r\n\r\n      return res.status(400).json({ error: 'El correo y la contraseña son campos requeridos, intentelo de nuevo' });\r\n\r\n    }\r\n\r\n    const userExist = await userExist(mail);\r\n\r\n    if (!userExist) {\r\n      console.warn('Error al intentar el inicio de sesion, intentelo de nuevo');\r\n      return res.status(401).json({ error: 'xd' });\r\n    }\r\n\r\n    const user = userExist[0];\r\n\r\n    if (await bcrypt.compare(password, user.password)) {\r\n\r\n      res.cookie('session', 'secure-session-token', {\r\n        httpOnly: true,\r\n        secure: true,\r\n        sameSite: 'strict'\r\n      });\r\n\r\n      console.log(`User ${mail} logged in successfully`);\r\n\r\n      const accessToken = jwt.sign({ userId: user.id }, process.env.TOKEN, {\r\n        expiresIn: '1h',\r\n      });\r\n\r\n      res.json(accessToken);\r\n\r\n    } else {\r\n      console.warn(`Failed login attempt for correo ${mail}`);\r\n      response.status(401).json({ error: 'Invalid credentials' });\r\n    }\r\n\r\n\r\n  } catch (err) {\r\n\r\n    console.error(err.message);\r\n    throw err;\r\n\r\n  }\r\n\r\n\r\n}"],"mappings":"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","ignoreList":[]}},"mtime":1718236964217},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\database\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.executeQuery = void 0;\nObject.defineProperty(exports, \"queries\", {\n  enumerable: true,\n  get: function () {\n    return _querys.queries;\n  }\n});\nvar _connection = require(\"./connection\");\nvar _mssql = _interopRequireDefault(require(\"mssql\"));\nvar _querys = require(\"./querys\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst executeQuery = async (query, params) => {\n  try {\n    const pool = await (0, _connection.getConnection)();\n    const request = pool.request();\n\n    // Añade cada parámetro al objeto de solicitud\n    for (let key in params) {\n      if (key === 'pfp' && params[key] !== null) {\n        // Convierte 'pfp' a un Buffer antes de pasarlo a la consulta\n        request.input(key, _mssql.default.VarBinary(_mssql.default.MAX), Buffer.from(params[key].buffer));\n      } else {\n        request.input(key, params[key]);\n      }\n    }\n    const result = await request.query(query);\n    return result;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n};\nexports.executeQuery = executeQuery;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29ubmVjdGlvbiIsInJlcXVpcmUiLCJfbXNzcWwiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3F1ZXJ5cyIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImV4ZWN1dGVRdWVyeSIsInF1ZXJ5IiwicGFyYW1zIiwicG9vbCIsImdldENvbm5lY3Rpb24iLCJyZXF1ZXN0Iiwia2V5IiwiaW5wdXQiLCJzcWwiLCJWYXJCaW5hcnkiLCJNQVgiLCJCdWZmZXIiLCJmcm9tIiwiYnVmZmVyIiwicmVzdWx0IiwiZXJyb3IiLCJjb25zb2xlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXFVUTVxcSW5nZW5pZXJpYVxcOW5vXFxXZWJfSW50ZWdyYWxcXEJsb2dfQmFja1xcZGF0YWJhc2VcXCIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICB7Z2V0Q29ubmVjdGlvbix9IGZyb20gJy4vY29ubmVjdGlvbic7XHJcbmltcG9ydCBzcWwgZnJvbSAnbXNzcWwnO1xyXG5leHBvcnQgY29uc3QgZXhlY3V0ZVF1ZXJ5ID0gYXN5bmMgKHF1ZXJ5LCBwYXJhbXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcG9vbCA9IGF3YWl0IGdldENvbm5lY3Rpb24oKTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gcG9vbC5yZXF1ZXN0KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQcOxYWRlIGNhZGEgcGFyw6FtZXRybyBhbCBvYmpldG8gZGUgc29saWNpdHVkXHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHBhcmFtcykge1xyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAncGZwJyAmJiBwYXJhbXNba2V5XSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ29udmllcnRlICdwZnAnIGEgdW4gQnVmZmVyIGFudGVzIGRlIHBhc2FybG8gYSBsYSBjb25zdWx0YVxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5pbnB1dChrZXksIHNxbC5WYXJCaW5hcnkoc3FsLk1BWCksIEJ1ZmZlci5mcm9tKHBhcmFtc1trZXldLmJ1ZmZlcikpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5pbnB1dChrZXksIHBhcmFtc1trZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXF1ZXN0LnF1ZXJ5KHF1ZXJ5KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IHsgcXVlcmllcyB9IGZyb20gJy4vcXVlcnlzJzsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLElBQUFBLFdBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQXlCQSxJQUFBRyxPQUFBLEdBQUFILE9BQUE7QUFBbUMsU0FBQUUsdUJBQUFFLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUF4QjVCLE1BQU1HLFlBQVksR0FBRyxNQUFBQSxDQUFPQyxLQUFLLEVBQUVDLE1BQU0sS0FBSztFQUNqRCxJQUFJO0lBQ0EsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUMseUJBQWEsRUFBQyxDQUFDO0lBQ2xDLE1BQU1DLE9BQU8sR0FBR0YsSUFBSSxDQUFDRSxPQUFPLENBQUMsQ0FBQzs7SUFFOUI7SUFDQSxLQUFLLElBQUlDLEdBQUcsSUFBSUosTUFBTSxFQUFFO01BQ3BCLElBQUlJLEdBQUcsS0FBSyxLQUFLLElBQUlKLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ3ZDO1FBQ0FELE9BQU8sQ0FBQ0UsS0FBSyxDQUFDRCxHQUFHLEVBQUVFLGNBQUcsQ0FBQ0MsU0FBUyxDQUFDRCxjQUFHLENBQUNFLEdBQUcsQ0FBQyxFQUFFQyxNQUFNLENBQUNDLElBQUksQ0FBQ1YsTUFBTSxDQUFDSSxHQUFHLENBQUMsQ0FBQ08sTUFBTSxDQUFDLENBQUM7TUFDL0UsQ0FBQyxNQUFNO1FBQ0hSLE9BQU8sQ0FBQ0UsS0FBSyxDQUFDRCxHQUFHLEVBQUVKLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLENBQUM7TUFDbkM7SUFDSjtJQUVBLE1BQU1RLE1BQU0sR0FBRyxNQUFNVCxPQUFPLENBQUNKLEtBQUssQ0FBQ0EsS0FBSyxDQUFDO0lBQ3pDLE9BQU9hLE1BQU07RUFFakIsQ0FBQyxDQUFDLE9BQU9DLEtBQUssRUFBRTtJQUNaQyxPQUFPLENBQUNELEtBQUssQ0FBQ0EsS0FBSyxDQUFDO0lBQ3BCLE1BQU1BLEtBQUs7RUFDZjtBQUNKLENBQUM7QUFBQ0UsT0FBQSxDQUFBakIsWUFBQSxHQUFBQSxZQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_connection","require","_mssql","_interopRequireDefault","_querys","e","__esModule","default","executeQuery","query","params","pool","getConnection","request","key","input","sql","VarBinary","MAX","Buffer","from","buffer","result","error","console","exports"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\database\\","sources":["index.js"],"sourcesContent":["import  {getConnection,} from './connection';\r\nimport sql from 'mssql';\r\nexport const executeQuery = async (query, params) => {\r\n    try {\r\n        const pool = await getConnection();\r\n        const request = pool.request();\r\n        \r\n        // Añade cada parámetro al objeto de solicitud\r\n        for (let key in params) {\r\n            if (key === 'pfp' && params[key] !== null) {\r\n                // Convierte 'pfp' a un Buffer antes de pasarlo a la consulta\r\n                request.input(key, sql.VarBinary(sql.MAX), Buffer.from(params[key].buffer));\r\n            } else {\r\n                request.input(key, params[key]);\r\n            }\r\n        }\r\n        \r\n        const result = await request.query(query);\r\n        return result;\r\n        \r\n    } catch (error) {\r\n        console.error(error)\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport { queries } from './querys';"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,WAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAC,sBAAA,CAAAF,OAAA;AAyBA,IAAAG,OAAA,GAAAH,OAAA;AAAmC,SAAAE,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAxB5B,MAAMG,YAAY,GAAG,MAAAA,CAAOC,KAAK,EAAEC,MAAM,KAAK;EACjD,IAAI;IACA,MAAMC,IAAI,GAAG,MAAM,IAAAC,yBAAa,EAAC,CAAC;IAClC,MAAMC,OAAO,GAAGF,IAAI,CAACE,OAAO,CAAC,CAAC;;IAE9B;IACA,KAAK,IAAIC,GAAG,IAAIJ,MAAM,EAAE;MACpB,IAAII,GAAG,KAAK,KAAK,IAAIJ,MAAM,CAACI,GAAG,CAAC,KAAK,IAAI,EAAE;QACvC;QACAD,OAAO,CAACE,KAAK,CAACD,GAAG,EAAEE,cAAG,CAACC,SAAS,CAACD,cAAG,CAACE,GAAG,CAAC,EAAEC,MAAM,CAACC,IAAI,CAACV,MAAM,CAACI,GAAG,CAAC,CAACO,MAAM,CAAC,CAAC;MAC/E,CAAC,MAAM;QACHR,OAAO,CAACE,KAAK,CAACD,GAAG,EAAEJ,MAAM,CAACI,GAAG,CAAC,CAAC;MACnC;IACJ;IAEA,MAAMQ,MAAM,GAAG,MAAMT,OAAO,CAACJ,KAAK,CAACA,KAAK,CAAC;IACzC,OAAOa,MAAM;EAEjB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACpB,MAAMA,KAAK;EACf;AACJ,CAAC;AAACE,OAAA,CAAAjB,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1718231070681},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\database\\\\connection.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getConnection = getConnection;\nObject.defineProperty(exports, \"sql\", {\n  enumerable: true,\n  get: function () {\n    return _mssql.default;\n  }\n});\nvar _mssql = _interopRequireDefault(require(\"mssql\"));\nvar _config = _interopRequireDefault(require(\"../config\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst sqlConfig = {\n  user: _config.default.dbUser,\n  password: _config.default.dbPassword,\n  server: _config.default.dbServer,\n  database: _config.default.dbDatabase,\n  options: {\n    encrypt: true,\n    trustServerCertificate: true\n  }\n};\nasync function getConnection() {\n  try {\n    const pool = await _mssql.default.connect(sqlConfig);\n    return pool;\n  } catch (e) {\n    console.log(e);\n    throw e;\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbXNzcWwiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jb25maWciLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJzcWxDb25maWciLCJ1c2VyIiwiY29uZmlnIiwiZGJVc2VyIiwicGFzc3dvcmQiLCJkYlBhc3N3b3JkIiwic2VydmVyIiwiZGJTZXJ2ZXIiLCJkYXRhYmFzZSIsImRiRGF0YWJhc2UiLCJvcHRpb25zIiwiZW5jcnlwdCIsInRydXN0U2VydmVyQ2VydGlmaWNhdGUiLCJnZXRDb25uZWN0aW9uIiwicG9vbCIsInNxbCIsImNvbm5lY3QiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiJDOlxcVVRNXFxJbmdlbmllcmlhXFw5bm9cXFdlYl9JbnRlZ3JhbFxcQmxvZ19CYWNrXFxkYXRhYmFzZVxcIiwic291cmNlcyI6WyJjb25uZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzcWwgZnJvbSAnbXNzcWwnO1xyXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZydcclxuXHJcbmNvbnN0IHNxbENvbmZpZyA9IHtcclxuICAgIHVzZXI6IGNvbmZpZy5kYlVzZXIsXHJcbiAgICBwYXNzd29yZDogY29uZmlnLmRiUGFzc3dvcmQsXHJcbiAgICBzZXJ2ZXI6IGNvbmZpZy5kYlNlcnZlcixcclxuICAgIGRhdGFiYXNlOiBjb25maWcuZGJEYXRhYmFzZSxcclxuICAgIG9wdGlvbnM6IHtcclxuICAgICAgICBlbmNyeXB0OiB0cnVlLFxyXG4gICAgICAgIHRydXN0U2VydmVyQ2VydGlmaWNhdGU6IHRydWVcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb25uZWN0aW9uKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwb29sID0gYXdhaXQgc3FsLmNvbm5lY3Qoc3FsQ29uZmlnKTtcclxuICAgICAgICByZXR1cm4gcG9vbDtcclxuICAgICAgICBcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge3NxbH0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUE4QixTQUFBRCx1QkFBQUcsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUU5QixNQUFNRyxTQUFTLEdBQUc7RUFDZEMsSUFBSSxFQUFFQyxlQUFNLENBQUNDLE1BQU07RUFDbkJDLFFBQVEsRUFBRUYsZUFBTSxDQUFDRyxVQUFVO0VBQzNCQyxNQUFNLEVBQUVKLGVBQU0sQ0FBQ0ssUUFBUTtFQUN2QkMsUUFBUSxFQUFFTixlQUFNLENBQUNPLFVBQVU7RUFDM0JDLE9BQU8sRUFBRTtJQUNMQyxPQUFPLEVBQUUsSUFBSTtJQUNiQyxzQkFBc0IsRUFBRTtFQUM1QjtBQUNKLENBQUM7QUFHTSxlQUFlQyxhQUFhQSxDQUFBLEVBQUc7RUFDbEMsSUFBSTtJQUNBLE1BQU1DLElBQUksR0FBRyxNQUFNQyxjQUFHLENBQUNDLE9BQU8sQ0FBQ2hCLFNBQVMsQ0FBQztJQUN6QyxPQUFPYyxJQUFJO0VBRWYsQ0FBQyxDQUFDLE9BQU9qQixDQUFDLEVBQUU7SUFDUm9CLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDckIsQ0FBQyxDQUFDO0lBQ2QsTUFBTUEsQ0FBQztFQUNYO0FBQ0oiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_mssql","_interopRequireDefault","require","_config","e","__esModule","default","sqlConfig","user","config","dbUser","password","dbPassword","server","dbServer","database","dbDatabase","options","encrypt","trustServerCertificate","getConnection","pool","sql","connect","console","log"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\database\\","sources":["connection.js"],"sourcesContent":["import sql from 'mssql';\r\nimport config from '../config'\r\n\r\nconst sqlConfig = {\r\n    user: config.dbUser,\r\n    password: config.dbPassword,\r\n    server: config.dbServer,\r\n    database: config.dbDatabase,\r\n    options: {\r\n        encrypt: true,\r\n        trustServerCertificate: true\r\n    }\r\n}\r\n\r\n\r\nexport async function getConnection() {\r\n    try {\r\n        const pool = await sql.connect(sqlConfig);\r\n        return pool;\r\n        \r\n    } catch (e) {\r\n        console.log(e);\r\n        throw e;\r\n    }\r\n}\r\n\r\nexport {sql}"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA8B,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE9B,MAAMG,SAAS,GAAG;EACdC,IAAI,EAAEC,eAAM,CAACC,MAAM;EACnBC,QAAQ,EAAEF,eAAM,CAACG,UAAU;EAC3BC,MAAM,EAAEJ,eAAM,CAACK,QAAQ;EACvBC,QAAQ,EAAEN,eAAM,CAACO,UAAU;EAC3BC,OAAO,EAAE;IACLC,OAAO,EAAE,IAAI;IACbC,sBAAsB,EAAE;EAC5B;AACJ,CAAC;AAGM,eAAeC,aAAaA,CAAA,EAAG;EAClC,IAAI;IACA,MAAMC,IAAI,GAAG,MAAMC,cAAG,CAACC,OAAO,CAAChB,SAAS,CAAC;IACzC,OAAOc,IAAI;EAEf,CAAC,CAAC,OAAOjB,CAAC,EAAE;IACRoB,OAAO,CAACC,GAAG,CAACrB,CAAC,CAAC;IACd,MAAMA,CAAC;EACX;AACJ","ignoreList":[]}},"mtime":1718221789993},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = require(\"dotenv\");\n(0, _dotenv.config)();\nvar _default = exports.default = {\n  dbUser: process.env.DB_USER || 'sa',\n  dbPassword: process.env.DB_PASSWORD || 'R0ckt@v10',\n  dbServer: process.env.DB_SERVER || 'localhost',\n  dbDatabase: process.env.DB_NAME || 'blog'\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZG90ZW52IiwicmVxdWlyZSIsImNvbmZpZyIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJkYlVzZXIiLCJwcm9jZXNzIiwiZW52IiwiREJfVVNFUiIsImRiUGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRiU2VydmVyIiwiREJfU0VSVkVSIiwiZGJEYXRhYmFzZSIsIkRCX05BTUUiXSwic291cmNlUm9vdCI6IkM6XFxVVE1cXEluZ2VuaWVyaWFcXDlub1xcV2ViX0ludGVncmFsXFxCbG9nX0JhY2tcXCIsInNvdXJjZXMiOlsiY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbmZpZyB9IGZyb20gJ2RvdGVudidcclxuY29uZmlnKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBkYlVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgJ3NhJyxcclxuICAgIGRiUGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8ICdSMGNrdEB2MTAnLFxyXG4gICAgZGJTZXJ2ZXI6IHByb2Nlc3MuZW52LkRCX1NFUlZFUiB8fCAnbG9jYWxob3N0JyxcclxuICAgIGRiRGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX05BTUUgfHwgJ2Jsb2cnXHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGNBQU0sRUFBQyxDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FFTTtFQUNYQyxNQUFNLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxPQUFPLElBQUksSUFBSTtFQUNuQ0MsVUFBVSxFQUFFSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csV0FBVyxJQUFJLFdBQVc7RUFDbERDLFFBQVEsRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLFNBQVMsSUFBSSxXQUFXO0VBQzlDQyxVQUFVLEVBQUVQLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDTyxPQUFPLElBQUk7QUFDdkMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_dotenv","require","config","_default","exports","default","dbUser","process","env","DB_USER","dbPassword","DB_PASSWORD","dbServer","DB_SERVER","dbDatabase","DB_NAME"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\","sources":["config.js"],"sourcesContent":["import { config } from 'dotenv'\r\nconfig();\r\n\r\nexport default {\r\n    dbUser: process.env.DB_USER || 'sa',\r\n    dbPassword: process.env.DB_PASSWORD || 'R0ckt@v10',\r\n    dbServer: process.env.DB_SERVER || 'localhost',\r\n    dbDatabase: process.env.DB_NAME || 'blog'\r\n}"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,cAAM,EAAC,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEM;EACXC,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO,IAAI,IAAI;EACnCC,UAAU,EAAEH,OAAO,CAACC,GAAG,CAACG,WAAW,IAAI,WAAW;EAClDC,QAAQ,EAAEL,OAAO,CAACC,GAAG,CAACK,SAAS,IAAI,WAAW;EAC9CC,UAAU,EAAEP,OAAO,CAACC,GAAG,CAACO,OAAO,IAAI;AACvC,CAAC","ignoreList":[]}},"mtime":1718231070671},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\database\\\\querys.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.queries = void 0;\nconst queries = exports.queries = {\n  getUser: \"SELECT name, lastname, mail, pfp FROM Usuario\",\n  insertUser: \"INSERT INTO Usuario (name, lastname, mail, password, pfp, status) VALUES (@name, @lastname, @mail, @password, @pfp, @status)\",\n  userExist: \"SELECT * FROM Usuario WHERE mail = @mail\"\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJxdWVyaWVzIiwiZXhwb3J0cyIsImdldFVzZXIiLCJpbnNlcnRVc2VyIiwidXNlckV4aXN0Il0sInNvdXJjZVJvb3QiOiJDOlxcVVRNXFxJbmdlbmllcmlhXFw5bm9cXFdlYl9JbnRlZ3JhbFxcQmxvZ19CYWNrXFxkYXRhYmFzZVxcIiwic291cmNlcyI6WyJxdWVyeXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbmV4cG9ydCBjb25zdCBxdWVyaWVzID0ge1xyXG4gICAgZ2V0VXNlcjogXCJTRUxFQ1QgbmFtZSwgbGFzdG5hbWUsIG1haWwsIHBmcCBGUk9NIFVzdWFyaW9cIixcclxuICAgIGluc2VydFVzZXI6IFwiSU5TRVJUIElOVE8gVXN1YXJpbyAobmFtZSwgbGFzdG5hbWUsIG1haWwsIHBhc3N3b3JkLCBwZnAsIHN0YXR1cykgVkFMVUVTIChAbmFtZSwgQGxhc3RuYW1lLCBAbWFpbCwgQHBhc3N3b3JkLCBAcGZwLCBAc3RhdHVzKVwiLFxyXG4gICAgdXNlckV4aXN0OiBcIlNFTEVDVCAqIEZST00gVXN1YXJpbyBXSEVSRSBtYWlsID0gQG1haWxcIlxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ08sTUFBTUEsT0FBTyxHQUFBQyxPQUFBLENBQUFELE9BQUEsR0FBRztFQUNuQkUsT0FBTyxFQUFFLCtDQUErQztFQUN4REMsVUFBVSxFQUFFLDhIQUE4SDtFQUMxSUMsU0FBUyxFQUFFO0FBQ2YsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["queries","exports","getUser","insertUser","userExist"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\database\\","sources":["querys.js"],"sourcesContent":["\r\nexport const queries = {\r\n    getUser: \"SELECT name, lastname, mail, pfp FROM Usuario\",\r\n    insertUser: \"INSERT INTO Usuario (name, lastname, mail, password, pfp, status) VALUES (@name, @lastname, @mail, @password, @pfp, @status)\",\r\n    userExist: \"SELECT * FROM Usuario WHERE mail = @mail\"\r\n}\r\n"],"mappings":";;;;;;AACO,MAAMA,OAAO,GAAAC,OAAA,CAAAD,OAAA,GAAG;EACnBE,OAAO,EAAE,+CAA+C;EACxDC,UAAU,EAAE,8HAA8H;EAC1IC,SAAS,EAAE;AACf,CAAC","ignoreList":[]}},"mtime":1718237440500},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\middleware\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\middleware\\\\authMiddleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.authenticateToken = void 0;\nvar _jsonwebtoken = require(\"jsonwebtoken\");\nconst authenticateToken = (req, res, next) => {\n  const authHeader = req.headers['authorization'];\n  const token = authHeader && authHeader.split(' ')[1];\n  if (token == null) {\n    return res.sendStatus(401);\n  }\n  (0, _jsonwebtoken.verify)(token, process.env.TOKEN, (err, user) => {\n    if (err) {\n      return response.sendStatus(403);\n    }\n    request.user = user;\n    next();\n  });\n};\nexports.authenticateToken = authenticateToken;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwicmVxdWlyZSIsImF1dGhlbnRpY2F0ZVRva2VuIiwicmVxIiwicmVzIiwibmV4dCIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwidG9rZW4iLCJzcGxpdCIsInNlbmRTdGF0dXMiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiVE9LRU4iLCJlcnIiLCJ1c2VyIiwicmVzcG9uc2UiLCJyZXF1ZXN0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXFVUTVxcSW5nZW5pZXJpYVxcOW5vXFxXZWJfSW50ZWdyYWxcXEJsb2dfQmFja1xcc3JjXFxtaWRkbGV3YXJlXFwiLCJzb3VyY2VzIjpbImF1dGhNaWRkbGV3YXJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZlcmlmeSB9IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcblxyXG5leHBvcnQgY29uc3QgIGF1dGhlbnRpY2F0ZVRva2VuID0gKHJlcSwgcmVzLCBuZXh0KSA9PntcclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddO1xyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyICYmIGF1dGhIZWFkZXIuc3BsaXQoJyAnKVsxXTtcclxuXHJcbiAgICBpZiAodG9rZW4gPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg0MDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuVE9LRU4sIChlcnIsIHVzZXIpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5zZW5kU3RhdHVzKDQwMylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlcXVlc3QudXNlciA9IHVzZXI7XHJcbiAgICAgICAgbmV4dCgpO1xyXG4gICAgfSk7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxhQUFBLEdBQUFDLE9BQUE7QUFFTyxNQUFPQyxpQkFBaUIsR0FBR0EsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSTtFQUNqRCxNQUFNQyxVQUFVLEdBQUdILEdBQUcsQ0FBQ0ksT0FBTyxDQUFDLGVBQWUsQ0FBQztFQUMvQyxNQUFNQyxLQUFLLEdBQUdGLFVBQVUsSUFBSUEsVUFBVSxDQUFDRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBRXBELElBQUlELEtBQUssSUFBSSxJQUFJLEVBQUU7SUFDZixPQUFPSixHQUFHLENBQUNNLFVBQVUsQ0FBQyxHQUFHLENBQUM7RUFDOUI7RUFFQSxJQUFBQyxvQkFBTSxFQUFDSCxLQUFLLEVBQUVJLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxLQUFLLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxJQUFJLEtBQUs7SUFDNUMsSUFBSUQsR0FBRyxFQUFFO01BQ0wsT0FBT0UsUUFBUSxDQUFDUCxVQUFVLENBQUMsR0FBRyxDQUFDO0lBQ25DO0lBRUFRLE9BQU8sQ0FBQ0YsSUFBSSxHQUFHQSxJQUFJO0lBQ25CWCxJQUFJLENBQUMsQ0FBQztFQUNWLENBQUMsQ0FBQztBQUNOLENBQUM7QUFBQWMsT0FBQSxDQUFBakIsaUJBQUEsR0FBQUEsaUJBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_jsonwebtoken","require","authenticateToken","req","res","next","authHeader","headers","token","split","sendStatus","verify","process","env","TOKEN","err","user","response","request","exports"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\src\\middleware\\","sources":["authMiddleware.js"],"sourcesContent":["import { verify } from 'jsonwebtoken';\r\n\r\nexport const  authenticateToken = (req, res, next) =>{\r\n    const authHeader = req.headers['authorization'];\r\n    const token = authHeader && authHeader.split(' ')[1];\r\n\r\n    if (token == null) {\r\n        return res.sendStatus(401);\r\n    }\r\n\r\n    verify(token, process.env.TOKEN, (err, user) => {\r\n        if (err) {\r\n            return response.sendStatus(403)\r\n        }\r\n\r\n        request.user = user;\r\n        next();\r\n    });\r\n}\r\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,OAAA;AAEO,MAAOC,iBAAiB,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EACjD,MAAMC,UAAU,GAAGH,GAAG,CAACI,OAAO,CAAC,eAAe,CAAC;EAC/C,MAAMC,KAAK,GAAGF,UAAU,IAAIA,UAAU,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAEpD,IAAID,KAAK,IAAI,IAAI,EAAE;IACf,OAAOJ,GAAG,CAACM,UAAU,CAAC,GAAG,CAAC;EAC9B;EAEA,IAAAC,oBAAM,EAACH,KAAK,EAAEI,OAAO,CAACC,GAAG,CAACC,KAAK,EAAE,CAACC,GAAG,EAAEC,IAAI,KAAK;IAC5C,IAAID,GAAG,EAAE;MACL,OAAOE,QAAQ,CAACP,UAAU,CAAC,GAAG,CAAC;IACnC;IAEAQ,OAAO,CAACF,IAAI,GAAGA,IAAI;IACnBX,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;AACN,CAAC;AAAAc,OAAA,CAAAjB,iBAAA,GAAAA,iBAAA","ignoreList":[]}},"mtime":1718221790131},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\routes\\\\user.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _userController = require(\"../controllers/userController\");\nconst router = (0, _express.Router)();\nrouter.post('/api/user/registerUser', _userController.registerUser);\nrouter.post('/api/user/login', _userController.login);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsInJlcXVpcmUiLCJfdXNlckNvbnRyb2xsZXIiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwicmVnaXN0ZXJVc2VyIiwibG9naW4iLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiJDOlxcVVRNXFxJbmdlbmllcmlhXFw5bm9cXFdlYl9JbnRlZ3JhbFxcQmxvZ19CYWNrXFxzcmNcXHJvdXRlc1xcIiwic291cmNlcyI6WyJ1c2VyLnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5cclxuaW1wb3J0IHsgbG9naW4sIHJlZ2lzdGVyVXNlciB9IGZyb20gXCIuLi9jb250cm9sbGVycy91c2VyQ29udHJvbGxlclwiO1xyXG5cclxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2FwaS91c2VyL3JlZ2lzdGVyVXNlcicsIHJlZ2lzdGVyVXNlcik7XHJcbnJvdXRlci5wb3N0KCcvYXBpL3VzZXIvbG9naW4nLCBsb2dpbik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFFQSxJQUFBQyxlQUFBLEdBQUFELE9BQUE7QUFFQSxNQUFNRSxNQUFNLEdBQUcsSUFBQUMsZUFBTSxFQUFDLENBQUM7QUFFdkJELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLHdCQUF3QixFQUFFQyw0QkFBWSxDQUFDO0FBQ25ESCxNQUFNLENBQUNFLElBQUksQ0FBQyxpQkFBaUIsRUFBRUUscUJBQUssQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRXZCUCxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_express","require","_userController","router","Router","post","registerUser","login","_default","exports","default"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\src\\routes\\","sources":["user.routes.js"],"sourcesContent":["import { Router } from \"express\";\r\n\r\nimport { login, registerUser } from \"../controllers/userController\";\r\n\r\nconst router = Router();\r\n\r\nrouter.post('/api/user/registerUser', registerUser);\r\nrouter.post('/api/user/login', login);\r\n\r\nexport default router;"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAEA,IAAAC,eAAA,GAAAD,OAAA;AAEA,MAAME,MAAM,GAAG,IAAAC,eAAM,EAAC,CAAC;AAEvBD,MAAM,CAACE,IAAI,CAAC,wBAAwB,EAAEC,4BAAY,CAAC;AACnDH,MAAM,CAACE,IAAI,CAAC,iBAAiB,EAAEE,qBAAK,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEvBP,MAAM","ignoreList":[]}},"mtime":1718237173222},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\controllers\\\\userController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerUser = exports.login = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _expressValidator = require(\"express-validator\");\nvar _index = require(\"../../database/index\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst registerUser = async (req, res) => {\n  console.log(req.body);\n  console.log(req.files);\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    name,\n    lastname,\n    mail,\n    password,\n    status\n  } = req.body;\n  const pfp = req.files && req.files.pfp ? req.files.pfp[0] : null;\n  try {\n    const salt = await _bcrypt.default.genSalt(10);\n    const hashedPassword = await _bcrypt.default.hash(password, salt);\n    console.log(salt);\n    const user = {\n      name,\n      lastname,\n      mail,\n      password: hashedPassword,\n      pfp,\n      status\n    };\n    const params = {\n      name: user.name,\n      lastname: user.lastname,\n      mail: user.mail,\n      password: user.password,\n      pfp: user.pfp,\n      status: user.status\n    };\n    const result = await (0, _index.executeQuery)(_index.queries.insertUser, params);\n    const payload = {\n      user: {\n        id: result.insertId\n      }\n    };\n    _jsonwebtoken.default.sign(payload, process.env.TOKEN, {\n      expiresIn: '1 day'\n    }, (err, token) => {\n      if (err) {\n        console.error(err);\n        return res.status(500).json({\n          message: 'Error signing the token'\n        });\n      }\n      res.status(201).json({\n        message: 'success',\n        token: token\n      });\n    });\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Server Error\");\n  }\n};\nexports.registerUser = registerUser;\nconst login = async (req, res) => {\n  try {\n    const {\n      mail,\n      password\n    } = req.body;\n    const user = {\n      mail: mail,\n      password: password\n    };\n    const params = {\n      mail: user.mail,\n      password: user.password\n    };\n    if (!mail || !password) {\n      return res.status(400).json({\n        error: 'El correo y la contraseña son campos requeridos, intentelo de nuevo'\n      });\n    }\n    const existingUser = await (0, _index.executeQuery)(_index.queries.userExist, params);\n    console.log(existingUser);\n    // console.log(existingUser.password);\n\n    if (existingUser.recordset.length === 0) {\n      console.warn('Error al intentar el inicio de sesion, intentelo de nuevo');\n      return res.status(401).json({\n        error: 'xd'\n      });\n    }\n    const _user = existingUser.recordset[0];\n    console.log(_user.password);\n    if (await _bcrypt.default.compare(password, _user.password)) {\n      res.cookie('session', 'secure-session-token', {\n        httpOnly: true,\n        secure: true,\n        sameSite: 'strict'\n      });\n      console.log(`User ${mail} logged in successfully`);\n      const accessToken = _jsonwebtoken.default.sign({\n        userId: _user.id\n      }, process.env.TOKEN, {\n        expiresIn: '1h'\n      });\n      res.json(accessToken);\n    } else {\n      console.warn(`Failed login attempt for correo ${mail}`);\n      response.status(401).json({\n        error: 'Invalid credentials'\n      });\n    }\n  } catch (err) {\n    console.error(err.message);\n    throw err;\n  }\n};\n\n// export const login = async (req, res) => {\n//   try {\n//     const { mail, password } = req.body;\n\n//     if (!mail || !password) {\n//       return res.status(400).json({ error: 'El correo y la contraseña son campos requeridos, intentelo de nuevo' });\n//     }\n\n//     const params = { mail, password };\n\n//     const existingUser = await executeQuery(queries.userExist, params);\n\n//     if (!existingUser) {\n//       console.warn('Error al intentar el inicio de sesion, intentelo de nuevo');\n//       return res.status(401).json({ error: 'xd' });\n//     }\n\n//     const _user = existingUser[0];\n\n//     if (await bcrypt.compare(password, _user.password)) {\n//       res.cookie('session', 'secure-session-token', {\n//         httpOnly: true,\n//         secure: true,\n//         sameSite: 'strict'\n//       });\n\n//       console.log(`User ${mail} logged in successfully`);\n\n//       const accessToken = jwt.sign({ userId: _user.id }, process.env.TOKEN, {  // Aquí cambiamos user.id por _user.id\n//         expiresIn: '1h',\n//       });\n\n//       res.json(accessToken);\n\n//     } else {\n//       console.warn(`Failed login attempt for correo ${mail}`);\n//       res.status(401).json({ error: 'Invalid credentials' });  // Aquí cambiamos response por res\n//     }\n\n//   } catch (err) {\n//     console.error(err.message);\n//     res.status(500).json({ error: err.message });  // Aquí enviamos una respuesta en caso de error\n//   }\n// }\nexports.login = login;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYmNyeXB0IiwiX2V4cHJlc3NWYWxpZGF0b3IiLCJfaW5kZXgiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJyZWdpc3RlclVzZXIiLCJyZXEiLCJyZXMiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsImZpbGVzIiwiZXJyb3JzIiwidmFsaWRhdGlvblJlc3VsdCIsImlzRW1wdHkiLCJzdGF0dXMiLCJqc29uIiwiYXJyYXkiLCJuYW1lIiwibGFzdG5hbWUiLCJtYWlsIiwicGFzc3dvcmQiLCJwZnAiLCJzYWx0IiwiYmNyeXB0IiwiZ2VuU2FsdCIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaCIsInVzZXIiLCJwYXJhbXMiLCJyZXN1bHQiLCJleGVjdXRlUXVlcnkiLCJxdWVyaWVzIiwiaW5zZXJ0VXNlciIsInBheWxvYWQiLCJpZCIsImluc2VydElkIiwiand0Iiwic2lnbiIsInByb2Nlc3MiLCJlbnYiLCJUT0tFTiIsImV4cGlyZXNJbiIsImVyciIsInRva2VuIiwiZXJyb3IiLCJtZXNzYWdlIiwic2VuZCIsImV4cG9ydHMiLCJsb2dpbiIsImV4aXN0aW5nVXNlciIsInVzZXJFeGlzdCIsInJlY29yZHNldCIsImxlbmd0aCIsIndhcm4iLCJfdXNlciIsImNvbXBhcmUiLCJjb29raWUiLCJodHRwT25seSIsInNlY3VyZSIsInNhbWVTaXRlIiwiYWNjZXNzVG9rZW4iLCJ1c2VySWQiLCJyZXNwb25zZSJdLCJzb3VyY2VSb290IjoiQzpcXFVUTVxcSW5nZW5pZXJpYVxcOW5vXFxXZWJfSW50ZWdyYWxcXEJsb2dfQmFja1xcc3JjXFxjb250cm9sbGVyc1xcIiwic291cmNlcyI6WyJ1c2VyQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcbmltcG9ydCB7IHZhbGlkYXRpb25SZXN1bHQgfSBmcm9tIFwiZXhwcmVzcy12YWxpZGF0b3JcIjtcclxuaW1wb3J0IHsgdXNlckV4aXN0LCBleGVjdXRlUXVlcnksIHF1ZXJpZXMgfSBmcm9tIFwiLi4vLi4vZGF0YWJhc2UvaW5kZXhcIjtcclxuXHJcbmV4cG9ydCBjb25zdCByZWdpc3RlclVzZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zb2xlLmxvZyhyZXEuYm9keSk7XHJcbiAgY29uc29sZS5sb2cocmVxLmZpbGVzKTtcclxuICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XHJcbiAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgeyBuYW1lLCBsYXN0bmFtZSwgbWFpbCwgcGFzc3dvcmQsIHN0YXR1cyB9ID0gcmVxLmJvZHk7XHJcbiAgY29uc3QgcGZwID0gcmVxLmZpbGVzICYmIHJlcS5maWxlcy5wZnAgPyByZXEuZmlsZXMucGZwWzBdIDogbnVsbDtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEwKTtcclxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQpO1xyXG4gICAgY29uc29sZS5sb2coc2FsdCk7XHJcblxyXG4gICAgY29uc3QgdXNlciA9IHtcclxuICAgICAgbmFtZSxcclxuICAgICAgbGFzdG5hbWUsXHJcbiAgICAgIG1haWwsXHJcbiAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcclxuICAgICAgcGZwLFxyXG4gICAgICBzdGF0dXMsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgICBsYXN0bmFtZTogdXNlci5sYXN0bmFtZSxcclxuICAgICAgbWFpbDogdXNlci5tYWlsLFxyXG4gICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZCxcclxuICAgICAgcGZwOiB1c2VyLnBmcCxcclxuICAgICAgc3RhdHVzOiB1c2VyLnN0YXR1cyxcclxuICAgIH07XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleGVjdXRlUXVlcnkocXVlcmllcy5pbnNlcnRVc2VyLCBwYXJhbXMpO1xyXG5cclxuICAgIGNvbnN0IHBheWxvYWQgPSB7XHJcbiAgICAgIHVzZXI6IHtcclxuICAgICAgICBpZDogcmVzdWx0Lmluc2VydElkLFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuXHJcbiAgICBqd3Quc2lnbihcclxuICAgICAgcGF5bG9hZCxcclxuICAgICAgcHJvY2Vzcy5lbnYuVE9LRU4sXHJcbiAgICAgIHsgZXhwaXJlc0luOiAnMSBkYXknIH0sXHJcbiAgICAgIChlcnIsIHRva2VuKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIHNpZ25pbmcgdGhlIHRva2VuJyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAnc3VjY2VzcycsIHRva2VuOiB0b2tlbiB9KTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiU2VydmVyIEVycm9yXCIpO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBsb2dpbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG5cclxuICB0cnkge1xyXG5cclxuICAgIGNvbnN0IHsgbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGNvbnN0IHVzZXIgPSB7XHJcbiAgICAgIG1haWw6IG1haWwsXHJcbiAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgbWFpbDogdXNlci5tYWlsLFxyXG4gICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZFxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoIW1haWwgfHwgIXBhc3N3b3JkKSB7XHJcblxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0VsIGNvcnJlbyB5IGxhIGNvbnRyYXNlw7FhIHNvbiBjYW1wb3MgcmVxdWVyaWRvcywgaW50ZW50ZWxvIGRlIG51ZXZvJyB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHF1ZXJpZXMudXNlckV4aXN0LCBwYXJhbXMpO1xyXG4gICAgY29uc29sZS5sb2coZXhpc3RpbmdVc2VyKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKGV4aXN0aW5nVXNlci5wYXNzd29yZCk7XHJcbiAgICBcclxuICAgIGlmIChleGlzdGluZ1VzZXIucmVjb3Jkc2V0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGFsIGludGVudGFyIGVsIGluaWNpbyBkZSBzZXNpb24sIGludGVudGVsbyBkZSBudWV2bycpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ3hkJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBfdXNlciA9IGV4aXN0aW5nVXNlci5yZWNvcmRzZXRbMF07XHJcblxyXG4gICAgY29uc29sZS5sb2coX3VzZXIucGFzc3dvcmQpO1xyXG5cclxuICAgIGlmIChhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgX3VzZXIucGFzc3dvcmQpKSB7XHJcblxyXG4gICAgICByZXMuY29va2llKCdzZXNzaW9uJywgJ3NlY3VyZS1zZXNzaW9uLXRva2VuJywge1xyXG4gICAgICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgICAgIHNlY3VyZTogdHJ1ZSxcclxuICAgICAgICBzYW1lU2l0ZTogJ3N0cmljdCdcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgVXNlciAke21haWx9IGxvZ2dlZCBpbiBzdWNjZXNzZnVsbHlgKTtcclxuXHJcbiAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gand0LnNpZ24oeyB1c2VySWQ6IF91c2VyLmlkIH0sIHByb2Nlc3MuZW52LlRPS0VOLCB7XHJcbiAgICAgICAgZXhwaXJlc0luOiAnMWgnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJlcy5qc29uKGFjY2Vzc1Rva2VuKTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCBsb2dpbiBhdHRlbXB0IGZvciBjb3JyZW8gJHttYWlsfWApO1xyXG4gICAgICByZXNwb25zZS5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGNyZWRlbnRpYWxzJyB9KTtcclxuICAgIH1cclxuXHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcblxyXG4gICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgICB0aHJvdyBlcnI7XHJcblxyXG4gIH1cclxuXHJcbn1cclxuXHJcbi8vIGV4cG9ydCBjb25zdCBsb2dpbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCB7IG1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbi8vICAgICBpZiAoIW1haWwgfHwgIXBhc3N3b3JkKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRWwgY29ycmVvIHkgbGEgY29udHJhc2XDsWEgc29uIGNhbXBvcyByZXF1ZXJpZG9zLCBpbnRlbnRlbG8gZGUgbnVldm8nIH0pO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGNvbnN0IHBhcmFtcyA9IHsgbWFpbCwgcGFzc3dvcmQgfTtcclxuXHJcbi8vICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBleGVjdXRlUXVlcnkocXVlcmllcy51c2VyRXhpc3QsIHBhcmFtcyk7XHJcblxyXG4vLyAgICAgaWYgKCFleGlzdGluZ1VzZXIpIHtcclxuLy8gICAgICAgY29uc29sZS53YXJuKCdFcnJvciBhbCBpbnRlbnRhciBlbCBpbmljaW8gZGUgc2VzaW9uLCBpbnRlbnRlbG8gZGUgbnVldm8nKTtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICd4ZCcgfSk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgY29uc3QgX3VzZXIgPSBleGlzdGluZ1VzZXJbMF07XHJcblxyXG4vLyAgICAgaWYgKGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBfdXNlci5wYXNzd29yZCkpIHtcclxuLy8gICAgICAgcmVzLmNvb2tpZSgnc2Vzc2lvbicsICdzZWN1cmUtc2Vzc2lvbi10b2tlbicsIHtcclxuLy8gICAgICAgICBodHRwT25seTogdHJ1ZSxcclxuLy8gICAgICAgICBzZWN1cmU6IHRydWUsXHJcbi8vICAgICAgICAgc2FtZVNpdGU6ICdzdHJpY3QnXHJcbi8vICAgICAgIH0pO1xyXG5cclxuLy8gICAgICAgY29uc29sZS5sb2coYFVzZXIgJHttYWlsfSBsb2dnZWQgaW4gc3VjY2Vzc2Z1bGx5YCk7XHJcblxyXG4vLyAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGp3dC5zaWduKHsgdXNlcklkOiBfdXNlci5pZCB9LCBwcm9jZXNzLmVudi5UT0tFTiwgeyAgLy8gQXF1w60gY2FtYmlhbW9zIHVzZXIuaWQgcG9yIF91c2VyLmlkXHJcbi8vICAgICAgICAgZXhwaXJlc0luOiAnMWgnLFxyXG4vLyAgICAgICB9KTtcclxuXHJcbi8vICAgICAgIHJlcy5qc29uKGFjY2Vzc1Rva2VuKTtcclxuXHJcbi8vICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCBsb2dpbiBhdHRlbXB0IGZvciBjb3JyZW8gJHttYWlsfWApO1xyXG4vLyAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnSW52YWxpZCBjcmVkZW50aWFscycgfSk7ICAvLyBBcXXDrSBjYW1iaWFtb3MgcmVzcG9uc2UgcG9yIHJlc1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICB9IGNhdGNoIChlcnIpIHtcclxuLy8gICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xyXG4vLyAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyLm1lc3NhZ2UgfSk7ICAvLyBBcXXDrSBlbnZpYW1vcyB1bmEgcmVzcHVlc3RhIGVuIGNhc28gZGUgZXJyb3JcclxuLy8gICB9XHJcbi8vIH0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLGlCQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxNQUFBLEdBQUFILE9BQUE7QUFBd0UsU0FBQUQsdUJBQUFLLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFFakUsTUFBTUcsWUFBWSxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzlDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0gsR0FBRyxDQUFDSSxJQUFJLENBQUM7RUFDckJGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSCxHQUFHLENBQUNLLEtBQUssQ0FBQztFQUN0QixNQUFNQyxNQUFNLEdBQUcsSUFBQUMsa0NBQWdCLEVBQUNQLEdBQUcsQ0FBQztFQUNwQyxJQUFJLENBQUNNLE1BQU0sQ0FBQ0UsT0FB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","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_bcrypt","_expressValidator","_index","e","__esModule","default","registerUser","req","res","console","log","body","files","errors","validationResult","isEmpty","status","json","array","name","lastname","mail","password","pfp","salt","bcrypt","genSalt","hashedPassword","hash","user","params","result","executeQuery","queries","insertUser","payload","id","insertId","jwt","sign","process","env","TOKEN","expiresIn","err","token","error","message","send","exports","login","existingUser","userExist","recordset","length","warn","_user","compare","cookie","httpOnly","secure","sameSite","accessToken","userId","response"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\src\\controllers\\","sources":["userController.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\r\nimport bcrypt from \"bcrypt\";\r\nimport { validationResult } from \"express-validator\";\r\nimport { userExist, executeQuery, queries } from \"../../database/index\";\r\n\r\nexport const registerUser = async (req, res) => {\r\n  console.log(req.body);\r\n  console.log(req.files);\r\n  const errors = validationResult(req);\r\n  if (!errors.isEmpty()) {\r\n    return res.status(400).json({ errors: errors.array() });\r\n  }\r\n\r\n  const { name, lastname, mail, password, status } = req.body;\r\n  const pfp = req.files && req.files.pfp ? req.files.pfp[0] : null;\r\n  try {\r\n    const salt = await bcrypt.genSalt(10);\r\n    const hashedPassword = await bcrypt.hash(password, salt);\r\n    console.log(salt);\r\n\r\n    const user = {\r\n      name,\r\n      lastname,\r\n      mail,\r\n      password: hashedPassword,\r\n      pfp,\r\n      status,\r\n    };\r\n\r\n    const params = {\r\n      name: user.name,\r\n      lastname: user.lastname,\r\n      mail: user.mail,\r\n      password: user.password,\r\n      pfp: user.pfp,\r\n      status: user.status,\r\n    };\r\n    const result = await executeQuery(queries.insertUser, params);\r\n\r\n    const payload = {\r\n      user: {\r\n        id: result.insertId,\r\n      },\r\n    };\r\n\r\n    jwt.sign(\r\n      payload,\r\n      process.env.TOKEN,\r\n      { expiresIn: '1 day' },\r\n      (err, token) => {\r\n        if (err) {\r\n          console.error(err);\r\n          return res.status(500).json({ message: 'Error signing the token' });\r\n        }\r\n        res.status(201).json({ message: 'success', token: token });\r\n      }\r\n    );\r\n\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    res.status(500).send(\"Server Error\");\r\n  }\r\n};\r\n\r\nexport const login = async (req, res) => {\r\n\r\n  try {\r\n\r\n    const { mail, password } = req.body;\r\n\r\n    const user = {\r\n      mail: mail,\r\n      password: password\r\n    }\r\n\r\n    const params = {\r\n      mail: user.mail,\r\n      password: user.password\r\n    };\r\n\r\n    if (!mail || !password) {\r\n\r\n      return res.status(400).json({ error: 'El correo y la contraseña son campos requeridos, intentelo de nuevo' });\r\n\r\n    }\r\n\r\n    const existingUser = await executeQuery(queries.userExist, params);\r\n    console.log(existingUser);\r\n    // console.log(existingUser.password);\r\n    \r\n    if (existingUser.recordset.length === 0) {\r\n      console.warn('Error al intentar el inicio de sesion, intentelo de nuevo');\r\n      return res.status(401).json({ error: 'xd' });\r\n    }\r\n\r\n    const _user = existingUser.recordset[0];\r\n\r\n    console.log(_user.password);\r\n\r\n    if (await bcrypt.compare(password, _user.password)) {\r\n\r\n      res.cookie('session', 'secure-session-token', {\r\n        httpOnly: true,\r\n        secure: true,\r\n        sameSite: 'strict'\r\n      });\r\n\r\n      console.log(`User ${mail} logged in successfully`);\r\n\r\n      const accessToken = jwt.sign({ userId: _user.id }, process.env.TOKEN, {\r\n        expiresIn: '1h',\r\n      });\r\n\r\n      res.json(accessToken);\r\n\r\n    } else {\r\n      console.warn(`Failed login attempt for correo ${mail}`);\r\n      response.status(401).json({ error: 'Invalid credentials' });\r\n    }\r\n\r\n  } catch (err) {\r\n\r\n    console.error(err.message);\r\n    throw err;\r\n\r\n  }\r\n\r\n}\r\n\r\n// export const login = async (req, res) => {\r\n//   try {\r\n//     const { mail, password } = req.body;\r\n\r\n//     if (!mail || !password) {\r\n//       return res.status(400).json({ error: 'El correo y la contraseña son campos requeridos, intentelo de nuevo' });\r\n//     }\r\n\r\n//     const params = { mail, password };\r\n\r\n//     const existingUser = await executeQuery(queries.userExist, params);\r\n\r\n//     if (!existingUser) {\r\n//       console.warn('Error al intentar el inicio de sesion, intentelo de nuevo');\r\n//       return res.status(401).json({ error: 'xd' });\r\n//     }\r\n\r\n//     const _user = existingUser[0];\r\n\r\n//     if (await bcrypt.compare(password, _user.password)) {\r\n//       res.cookie('session', 'secure-session-token', {\r\n//         httpOnly: true,\r\n//         secure: true,\r\n//         sameSite: 'strict'\r\n//       });\r\n\r\n//       console.log(`User ${mail} logged in successfully`);\r\n\r\n//       const accessToken = jwt.sign({ userId: _user.id }, process.env.TOKEN, {  // Aquí cambiamos user.id por _user.id\r\n//         expiresIn: '1h',\r\n//       });\r\n\r\n//       res.json(accessToken);\r\n\r\n//     } else {\r\n//       console.warn(`Failed login attempt for correo ${mail}`);\r\n//       res.status(401).json({ error: 'Invalid credentials' });  // Aquí cambiamos response por res\r\n//     }\r\n\r\n//   } catch (err) {\r\n//     console.error(err.message);\r\n//     res.status(500).json({ error: err.message });  // Aquí enviamos una respuesta en caso de error\r\n//   }\r\n// }"],"mappings":"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","ignoreList":[]}},"mtime":1718240455858},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\database\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.executeQuery = void 0;\nObject.defineProperty(exports, \"queries\", {\n  enumerable: true,\n  get: function () {\n    return _querys.queries;\n  }\n});\nvar _connection = require(\"./connection\");\nvar _mssql = _interopRequireDefault(require(\"mssql\"));\nvar _querys = require(\"./querys\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst executeQuery = async (query, params) => {\n  try {\n    const pool = await (0, _connection.getConnection)();\n    const request = pool.request();\n\n    // Añade cada parámetro al objeto de solicitud\n    for (let key in params) {\n      if (key === 'pfp' && params[key] !== null) {\n        // Convierte 'pfp' a un Buffer antes de pasarlo a la consulta\n        request.input(key, _mssql.default.VarBinary(_mssql.default.MAX), Buffer.from(params[key].buffer));\n      } else {\n        request.input(key, params[key]);\n      }\n    }\n    const result = await request.query(query);\n    return result;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n};\nexports.executeQuery = executeQuery;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29ubmVjdGlvbiIsInJlcXVpcmUiLCJfbXNzcWwiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3F1ZXJ5cyIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImV4ZWN1dGVRdWVyeSIsInF1ZXJ5IiwicGFyYW1zIiwicG9vbCIsImdldENvbm5lY3Rpb24iLCJyZXF1ZXN0Iiwia2V5IiwiaW5wdXQiLCJzcWwiLCJWYXJCaW5hcnkiLCJNQVgiLCJCdWZmZXIiLCJmcm9tIiwiYnVmZmVyIiwicmVzdWx0IiwiZXJyb3IiLCJjb25zb2xlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXFVUTVxcSW5nZW5pZXJpYVxcOW5vXFxXZWJfSW50ZWdyYWxcXEJsb2dfQmFja1xcZGF0YWJhc2VcXCIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICB7Z2V0Q29ubmVjdGlvbix9IGZyb20gJy4vY29ubmVjdGlvbic7XHJcbmltcG9ydCBzcWwgZnJvbSAnbXNzcWwnO1xyXG5leHBvcnQgY29uc3QgZXhlY3V0ZVF1ZXJ5ID0gYXN5bmMgKHF1ZXJ5LCBwYXJhbXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcG9vbCA9IGF3YWl0IGdldENvbm5lY3Rpb24oKTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gcG9vbC5yZXF1ZXN0KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQcOxYWRlIGNhZGEgcGFyw6FtZXRybyBhbCBvYmpldG8gZGUgc29saWNpdHVkXHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHBhcmFtcykge1xyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAncGZwJyAmJiBwYXJhbXNba2V5XSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ29udmllcnRlICdwZnAnIGEgdW4gQnVmZmVyIGFudGVzIGRlIHBhc2FybG8gYSBsYSBjb25zdWx0YVxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5pbnB1dChrZXksIHNxbC5WYXJCaW5hcnkoc3FsLk1BWCksIEJ1ZmZlci5mcm9tKHBhcmFtc1trZXldLmJ1ZmZlcikpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5pbnB1dChrZXksIHBhcmFtc1trZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXF1ZXN0LnF1ZXJ5KHF1ZXJ5KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IHsgcXVlcmllcyB9IGZyb20gJy4vcXVlcnlzJzsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLElBQUFBLFdBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQXlCQSxJQUFBRyxPQUFBLEdBQUFILE9BQUE7QUFBbUMsU0FBQUUsdUJBQUFFLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUF4QjVCLE1BQU1HLFlBQVksR0FBRyxNQUFBQSxDQUFPQyxLQUFLLEVBQUVDLE1BQU0sS0FBSztFQUNqRCxJQUFJO0lBQ0EsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUMseUJBQWEsRUFBQyxDQUFDO0lBQ2xDLE1BQU1DLE9BQU8sR0FBR0YsSUFBSSxDQUFDRSxPQUFPLENBQUMsQ0FBQzs7SUFFOUI7SUFDQSxLQUFLLElBQUlDLEdBQUcsSUFBSUosTUFBTSxFQUFFO01BQ3BCLElBQUlJLEdBQUcsS0FBSyxLQUFLLElBQUlKLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ3ZDO1FBQ0FELE9BQU8sQ0FBQ0UsS0FBSyxDQUFDRCxHQUFHLEVBQUVFLGNBQUcsQ0FBQ0MsU0FBUyxDQUFDRCxjQUFHLENBQUNFLEdBQUcsQ0FBQyxFQUFFQyxNQUFNLENBQUNDLElBQUksQ0FBQ1YsTUFBTSxDQUFDSSxHQUFHLENBQUMsQ0FBQ08sTUFBTSxDQUFDLENBQUM7TUFDL0UsQ0FBQyxNQUFNO1FBQ0hSLE9BQU8sQ0FBQ0UsS0FBSyxDQUFDRCxHQUFHLEVBQUVKLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLENBQUM7TUFDbkM7SUFDSjtJQUVBLE1BQU1RLE1BQU0sR0FBRyxNQUFNVCxPQUFPLENBQUNKLEtBQUssQ0FBQ0EsS0FBSyxDQUFDO0lBQ3pDLE9BQU9hLE1BQU07RUFFakIsQ0FBQyxDQUFDLE9BQU9DLEtBQUssRUFBRTtJQUNaQyxPQUFPLENBQUNELEtBQUssQ0FBQ0EsS0FBSyxDQUFDO0lBQ3BCLE1BQU1BLEtBQUs7RUFDZjtBQUNKLENBQUM7QUFBQ0UsT0FBQSxDQUFBakIsWUFBQSxHQUFBQSxZQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_connection","require","_mssql","_interopRequireDefault","_querys","e","__esModule","default","executeQuery","query","params","pool","getConnection","request","key","input","sql","VarBinary","MAX","Buffer","from","buffer","result","error","console","exports"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\database\\","sources":["index.js"],"sourcesContent":["import  {getConnection,} from './connection';\r\nimport sql from 'mssql';\r\nexport const executeQuery = async (query, params) => {\r\n    try {\r\n        const pool = await getConnection();\r\n        const request = pool.request();\r\n        \r\n        // Añade cada parámetro al objeto de solicitud\r\n        for (let key in params) {\r\n            if (key === 'pfp' && params[key] !== null) {\r\n                // Convierte 'pfp' a un Buffer antes de pasarlo a la consulta\r\n                request.input(key, sql.VarBinary(sql.MAX), Buffer.from(params[key].buffer));\r\n            } else {\r\n                request.input(key, params[key]);\r\n            }\r\n        }\r\n        \r\n        const result = await request.query(query);\r\n        return result;\r\n        \r\n    } catch (error) {\r\n        console.error(error)\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport { queries } from './querys';"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,WAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAC,sBAAA,CAAAF,OAAA;AAyBA,IAAAG,OAAA,GAAAH,OAAA;AAAmC,SAAAE,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAxB5B,MAAMG,YAAY,GAAG,MAAAA,CAAOC,KAAK,EAAEC,MAAM,KAAK;EACjD,IAAI;IACA,MAAMC,IAAI,GAAG,MAAM,IAAAC,yBAAa,EAAC,CAAC;IAClC,MAAMC,OAAO,GAAGF,IAAI,CAACE,OAAO,CAAC,CAAC;;IAE9B;IACA,KAAK,IAAIC,GAAG,IAAIJ,MAAM,EAAE;MACpB,IAAII,GAAG,KAAK,KAAK,IAAIJ,MAAM,CAACI,GAAG,CAAC,KAAK,IAAI,EAAE;QACvC;QACAD,OAAO,CAACE,KAAK,CAACD,GAAG,EAAEE,cAAG,CAACC,SAAS,CAACD,cAAG,CAACE,GAAG,CAAC,EAAEC,MAAM,CAACC,IAAI,CAACV,MAAM,CAACI,GAAG,CAAC,CAACO,MAAM,CAAC,CAAC;MAC/E,CAAC,MAAM;QACHR,OAAO,CAACE,KAAK,CAACD,GAAG,EAAEJ,MAAM,CAACI,GAAG,CAAC,CAAC;MACnC;IACJ;IAEA,MAAMQ,MAAM,GAAG,MAAMT,OAAO,CAACJ,KAAK,CAACA,KAAK,CAAC;IACzC,OAAOa,MAAM;EAEjB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACpB,MAAMA,KAAK;EACf;AACJ,CAAC;AAACE,OAAA,CAAAjB,YAAA,GAAAA,YAAA","ignoreList":[]}},"mtime":1718231070681},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\database\\\\connection.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getConnection = getConnection;\nObject.defineProperty(exports, \"sql\", {\n  enumerable: true,\n  get: function () {\n    return _mssql.default;\n  }\n});\nvar _mssql = _interopRequireDefault(require(\"mssql\"));\nvar _config = _interopRequireDefault(require(\"../config\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst sqlConfig = {\n  user: _config.default.dbUser,\n  password: _config.default.dbPassword,\n  server: _config.default.dbServer,\n  database: _config.default.dbDatabase,\n  options: {\n    encrypt: true,\n    trustServerCertificate: true\n  }\n};\nasync function getConnection() {\n  try {\n    const pool = await _mssql.default.connect(sqlConfig);\n    return pool;\n  } catch (e) {\n    console.log(e);\n    throw e;\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbXNzcWwiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jb25maWciLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJzcWxDb25maWciLCJ1c2VyIiwiY29uZmlnIiwiZGJVc2VyIiwicGFzc3dvcmQiLCJkYlBhc3N3b3JkIiwic2VydmVyIiwiZGJTZXJ2ZXIiLCJkYXRhYmFzZSIsImRiRGF0YWJhc2UiLCJvcHRpb25zIiwiZW5jcnlwdCIsInRydXN0U2VydmVyQ2VydGlmaWNhdGUiLCJnZXRDb25uZWN0aW9uIiwicG9vbCIsInNxbCIsImNvbm5lY3QiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiJDOlxcVVRNXFxJbmdlbmllcmlhXFw5bm9cXFdlYl9JbnRlZ3JhbFxcQmxvZ19CYWNrXFxkYXRhYmFzZVxcIiwic291cmNlcyI6WyJjb25uZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzcWwgZnJvbSAnbXNzcWwnO1xyXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZydcclxuXHJcbmNvbnN0IHNxbENvbmZpZyA9IHtcclxuICAgIHVzZXI6IGNvbmZpZy5kYlVzZXIsXHJcbiAgICBwYXNzd29yZDogY29uZmlnLmRiUGFzc3dvcmQsXHJcbiAgICBzZXJ2ZXI6IGNvbmZpZy5kYlNlcnZlcixcclxuICAgIGRhdGFiYXNlOiBjb25maWcuZGJEYXRhYmFzZSxcclxuICAgIG9wdGlvbnM6IHtcclxuICAgICAgICBlbmNyeXB0OiB0cnVlLFxyXG4gICAgICAgIHRydXN0U2VydmVyQ2VydGlmaWNhdGU6IHRydWVcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb25uZWN0aW9uKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwb29sID0gYXdhaXQgc3FsLmNvbm5lY3Qoc3FsQ29uZmlnKTtcclxuICAgICAgICByZXR1cm4gcG9vbDtcclxuICAgICAgICBcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge3NxbH0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUE4QixTQUFBRCx1QkFBQUcsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUU5QixNQUFNRyxTQUFTLEdBQUc7RUFDZEMsSUFBSSxFQUFFQyxlQUFNLENBQUNDLE1BQU07RUFDbkJDLFFBQVEsRUFBRUYsZUFBTSxDQUFDRyxVQUFVO0VBQzNCQyxNQUFNLEVBQUVKLGVBQU0sQ0FBQ0ssUUFBUTtFQUN2QkMsUUFBUSxFQUFFTixlQUFNLENBQUNPLFVBQVU7RUFDM0JDLE9BQU8sRUFBRTtJQUNMQyxPQUFPLEVBQUUsSUFBSTtJQUNiQyxzQkFBc0IsRUFBRTtFQUM1QjtBQUNKLENBQUM7QUFHTSxlQUFlQyxhQUFhQSxDQUFBLEVBQUc7RUFDbEMsSUFBSTtJQUNBLE1BQU1DLElBQUksR0FBRyxNQUFNQyxjQUFHLENBQUNDLE9BQU8sQ0FBQ2hCLFNBQVMsQ0FBQztJQUN6QyxPQUFPYyxJQUFJO0VBRWYsQ0FBQyxDQUFDLE9BQU9qQixDQUFDLEVBQUU7SUFDUm9CLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDckIsQ0FBQyxDQUFDO0lBQ2QsTUFBTUEsQ0FBQztFQUNYO0FBQ0oiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_mssql","_interopRequireDefault","require","_config","e","__esModule","default","sqlConfig","user","config","dbUser","password","dbPassword","server","dbServer","database","dbDatabase","options","encrypt","trustServerCertificate","getConnection","pool","sql","connect","console","log"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\database\\","sources":["connection.js"],"sourcesContent":["import sql from 'mssql';\r\nimport config from '../config'\r\n\r\nconst sqlConfig = {\r\n    user: config.dbUser,\r\n    password: config.dbPassword,\r\n    server: config.dbServer,\r\n    database: config.dbDatabase,\r\n    options: {\r\n        encrypt: true,\r\n        trustServerCertificate: true\r\n    }\r\n}\r\n\r\n\r\nexport async function getConnection() {\r\n    try {\r\n        const pool = await sql.connect(sqlConfig);\r\n        return pool;\r\n        \r\n    } catch (e) {\r\n        console.log(e);\r\n        throw e;\r\n    }\r\n}\r\n\r\nexport {sql}"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA8B,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE9B,MAAMG,SAAS,GAAG;EACdC,IAAI,EAAEC,eAAM,CAACC,MAAM;EACnBC,QAAQ,EAAEF,eAAM,CAACG,UAAU;EAC3BC,MAAM,EAAEJ,eAAM,CAACK,QAAQ;EACvBC,QAAQ,EAAEN,eAAM,CAACO,UAAU;EAC3BC,OAAO,EAAE;IACLC,OAAO,EAAE,IAAI;IACbC,sBAAsB,EAAE;EAC5B;AACJ,CAAC;AAGM,eAAeC,aAAaA,CAAA,EAAG;EAClC,IAAI;IACA,MAAMC,IAAI,GAAG,MAAMC,cAAG,CAACC,OAAO,CAAChB,SAAS,CAAC;IACzC,OAAOc,IAAI;EAEf,CAAC,CAAC,OAAOjB,CAAC,EAAE;IACRoB,OAAO,CAACC,GAAG,CAACrB,CAAC,CAAC;IACd,MAAMA,CAAC;EACX;AACJ","ignoreList":[]}},"mtime":1718221789993},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = require(\"dotenv\");\n(0, _dotenv.config)();\nvar _default = exports.default = {\n  dbUser: process.env.DB_USER || 'sa',\n  dbPassword: process.env.DB_PASSWORD || 'R0ckt@v10',\n  dbServer: process.env.DB_SERVER || 'localhost',\n  dbDatabase: process.env.DB_NAME || 'blog'\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZG90ZW52IiwicmVxdWlyZSIsImNvbmZpZyIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiLCJkYlVzZXIiLCJwcm9jZXNzIiwiZW52IiwiREJfVVNFUiIsImRiUGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRiU2VydmVyIiwiREJfU0VSVkVSIiwiZGJEYXRhYmFzZSIsIkRCX05BTUUiXSwic291cmNlUm9vdCI6IkM6XFxVVE1cXEluZ2VuaWVyaWFcXDlub1xcV2ViX0ludGVncmFsXFxCbG9nX0JhY2tcXCIsInNvdXJjZXMiOlsiY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbmZpZyB9IGZyb20gJ2RvdGVudidcclxuY29uZmlnKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBkYlVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgJ3NhJyxcclxuICAgIGRiUGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8ICdSMGNrdEB2MTAnLFxyXG4gICAgZGJTZXJ2ZXI6IHByb2Nlc3MuZW52LkRCX1NFUlZFUiB8fCAnbG9jYWxob3N0JyxcclxuICAgIGRiRGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX05BTUUgfHwgJ2Jsb2cnXHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGNBQU0sRUFBQyxDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FFTTtFQUNYQyxNQUFNLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxPQUFPLElBQUksSUFBSTtFQUNuQ0MsVUFBVSxFQUFFSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csV0FBVyxJQUFJLFdBQVc7RUFDbERDLFFBQVEsRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLFNBQVMsSUFBSSxXQUFXO0VBQzlDQyxVQUFVLEVBQUVQLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDTyxPQUFPLElBQUk7QUFDdkMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_dotenv","require","config","_default","exports","default","dbUser","process","env","DB_USER","dbPassword","DB_PASSWORD","dbServer","DB_SERVER","dbDatabase","DB_NAME"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\","sources":["config.js"],"sourcesContent":["import { config } from 'dotenv'\r\nconfig();\r\n\r\nexport default {\r\n    dbUser: process.env.DB_USER || 'sa',\r\n    dbPassword: process.env.DB_PASSWORD || 'R0ckt@v10',\r\n    dbServer: process.env.DB_SERVER || 'localhost',\r\n    dbDatabase: process.env.DB_NAME || 'blog'\r\n}"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,cAAM,EAAC,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEM;EACXC,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO,IAAI,IAAI;EACnCC,UAAU,EAAEH,OAAO,CAACC,GAAG,CAACG,WAAW,IAAI,WAAW;EAClDC,QAAQ,EAAEL,OAAO,CAACC,GAAG,CAACK,SAAS,IAAI,WAAW;EAC9CC,UAAU,EAAEP,OAAO,CAACC,GAAG,CAACO,OAAO,IAAI;AACvC,CAAC","ignoreList":[]}},"mtime":1718231070671},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\database\\\\querys.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.queries = void 0;\nconst queries = exports.queries = {\n  getUser: \"SELECT name, lastname, mail, pfp FROM Usuario\",\n  insertUser: \"INSERT INTO Usuario (name, lastname, mail, password, pfp, status) VALUES (@name, @lastname, @mail, @password, @pfp, @status)\",\n  userExist: \"SELECT * FROM Usuario WHERE mail = @mail\"\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJxdWVyaWVzIiwiZXhwb3J0cyIsImdldFVzZXIiLCJpbnNlcnRVc2VyIiwidXNlckV4aXN0Il0sInNvdXJjZVJvb3QiOiJDOlxcVVRNXFxJbmdlbmllcmlhXFw5bm9cXFdlYl9JbnRlZ3JhbFxcQmxvZ19CYWNrXFxkYXRhYmFzZVxcIiwic291cmNlcyI6WyJxdWVyeXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbmV4cG9ydCBjb25zdCBxdWVyaWVzID0ge1xyXG4gICAgZ2V0VXNlcjogXCJTRUxFQ1QgbmFtZSwgbGFzdG5hbWUsIG1haWwsIHBmcCBGUk9NIFVzdWFyaW9cIixcclxuICAgIGluc2VydFVzZXI6IFwiSU5TRVJUIElOVE8gVXN1YXJpbyAobmFtZSwgbGFzdG5hbWUsIG1haWwsIHBhc3N3b3JkLCBwZnAsIHN0YXR1cykgVkFMVUVTIChAbmFtZSwgQGxhc3RuYW1lLCBAbWFpbCwgQHBhc3N3b3JkLCBAcGZwLCBAc3RhdHVzKVwiLFxyXG4gICAgdXNlckV4aXN0OiBcIlNFTEVDVCAqIEZST00gVXN1YXJpbyBXSEVSRSBtYWlsID0gQG1haWxcIlxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ08sTUFBTUEsT0FBTyxHQUFBQyxPQUFBLENBQUFELE9BQUEsR0FBRztFQUNuQkUsT0FBTyxFQUFFLCtDQUErQztFQUN4REMsVUFBVSxFQUFFLDhIQUE4SDtFQUMxSUMsU0FBUyxFQUFFO0FBQ2YsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["queries","exports","getUser","insertUser","userExist"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\database\\","sources":["querys.js"],"sourcesContent":["\r\nexport const queries = {\r\n    getUser: \"SELECT name, lastname, mail, pfp FROM Usuario\",\r\n    insertUser: \"INSERT INTO Usuario (name, lastname, mail, password, pfp, status) VALUES (@name, @lastname, @mail, @password, @pfp, @status)\",\r\n    userExist: \"SELECT * FROM Usuario WHERE mail = @mail\"\r\n}\r\n"],"mappings":";;;;;;AACO,MAAMA,OAAO,GAAAC,OAAA,CAAAD,OAAA,GAAG;EACnBE,OAAO,EAAE,+CAA+C;EACxDC,UAAU,EAAE,8HAA8H;EAC1IC,SAAS,EAAE;AACf,CAAC","ignoreList":[]}},"mtime":1718237440500},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\middleware\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"filename\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\\\\src\\\\middleware\\\\authMiddleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\UTM\\\\Ingenieria\\\\9no\\\\Web_Integral\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.authenticateToken = void 0;\nvar _jsonwebtoken = require(\"jsonwebtoken\");\nconst authenticateToken = (req, res, next) => {\n  const authHeader = req.headers['authorization'];\n  const token = authHeader && authHeader.split(' ')[1];\n  if (token == null) {\n    return res.sendStatus(401);\n  }\n  (0, _jsonwebtoken.verify)(token, process.env.TOKEN, (err, user) => {\n    if (err) {\n      return response.sendStatus(403);\n    }\n    request.user = user;\n    next();\n  });\n};\nexports.authenticateToken = authenticateToken;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwicmVxdWlyZSIsImF1dGhlbnRpY2F0ZVRva2VuIiwicmVxIiwicmVzIiwibmV4dCIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwidG9rZW4iLCJzcGxpdCIsInNlbmRTdGF0dXMiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiVE9LRU4iLCJlcnIiLCJ1c2VyIiwicmVzcG9uc2UiLCJyZXF1ZXN0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXFVUTVxcSW5nZW5pZXJpYVxcOW5vXFxXZWJfSW50ZWdyYWxcXEJsb2dfQmFja1xcc3JjXFxtaWRkbGV3YXJlXFwiLCJzb3VyY2VzIjpbImF1dGhNaWRkbGV3YXJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZlcmlmeSB9IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcblxyXG5leHBvcnQgY29uc3QgIGF1dGhlbnRpY2F0ZVRva2VuID0gKHJlcSwgcmVzLCBuZXh0KSA9PntcclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddO1xyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyICYmIGF1dGhIZWFkZXIuc3BsaXQoJyAnKVsxXTtcclxuXHJcbiAgICBpZiAodG9rZW4gPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg0MDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuVE9LRU4sIChlcnIsIHVzZXIpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5zZW5kU3RhdHVzKDQwMylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlcXVlc3QudXNlciA9IHVzZXI7XHJcbiAgICAgICAgbmV4dCgpO1xyXG4gICAgfSk7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxhQUFBLEdBQUFDLE9BQUE7QUFFTyxNQUFPQyxpQkFBaUIsR0FBR0EsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSTtFQUNqRCxNQUFNQyxVQUFVLEdBQUdILEdBQUcsQ0FBQ0ksT0FBTyxDQUFDLGVBQWUsQ0FBQztFQUMvQyxNQUFNQyxLQUFLLEdBQUdGLFVBQVUsSUFBSUEsVUFBVSxDQUFDRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBRXBELElBQUlELEtBQUssSUFBSSxJQUFJLEVBQUU7SUFDZixPQUFPSixHQUFHLENBQUNNLFVBQVUsQ0FBQyxHQUFHLENBQUM7RUFDOUI7RUFFQSxJQUFBQyxvQkFBTSxFQUFDSCxLQUFLLEVBQUVJLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxLQUFLLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxJQUFJLEtBQUs7SUFDNUMsSUFBSUQsR0FBRyxFQUFFO01BQ0wsT0FBT0UsUUFBUSxDQUFDUCxVQUFVLENBQUMsR0FBRyxDQUFDO0lBQ25DO0lBRUFRLE9BQU8sQ0FBQ0YsSUFBSSxHQUFHQSxJQUFJO0lBQ25CWCxJQUFJLENBQUMsQ0FBQztFQUNWLENBQUMsQ0FBQztBQUNOLENBQUM7QUFBQWMsT0FBQSxDQUFBakIsaUJBQUEsR0FBQUEsaUJBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_jsonwebtoken","require","authenticateToken","req","res","next","authHeader","headers","token","split","sendStatus","verify","process","env","TOKEN","err","user","response","request","exports"],"sourceRoot":"C:\\UTM\\Ingenieria\\9no\\Web_Integral\\Blog_Back\\src\\middleware\\","sources":["authMiddleware.js"],"sourcesContent":["import { verify } from 'jsonwebtoken';\r\n\r\nexport const  authenticateToken = (req, res, next) =>{\r\n    const authHeader = req.headers['authorization'];\r\n    const token = authHeader && authHeader.split(' ')[1];\r\n\r\n    if (token == null) {\r\n        return res.sendStatus(401);\r\n    }\r\n\r\n    verify(token, process.env.TOKEN, (err, user) => {\r\n        if (err) {\r\n            return response.sendStatus(403)\r\n        }\r\n\r\n        request.user = user;\r\n        next();\r\n    });\r\n}\r\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,OAAA;AAEO,MAAOC,iBAAiB,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EACjD,MAAMC,UAAU,GAAGH,GAAG,CAACI,OAAO,CAAC,eAAe,CAAC;EAC/C,MAAMC,KAAK,GAAGF,UAAU,IAAIA,UAAU,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAEpD,IAAID,KAAK,IAAI,IAAI,EAAE;IACf,OAAOJ,GAAG,CAACM,UAAU,CAAC,GAAG,CAAC;EAC9B;EAEA,IAAAC,oBAAM,EAACH,KAAK,EAAEI,OAAO,CAACC,GAAG,CAACC,KAAK,EAAE,CAACC,GAAG,EAAEC,IAAI,KAAK;IAC5C,IAAID,GAAG,EAAE;MACL,OAAOE,QAAQ,CAACP,UAAU,CAAC,GAAG,CAAC;IACnC;IAEAQ,OAAO,CAACF,IAAI,GAAGA,IAAI;IACnBX,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;AACN,CAAC;AAAAc,OAAA,CAAAjB,iBAAA,GAAAA,iBAAA","ignoreList":[]}},"mtime":1718221790131},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\routes\\\\post.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _postsController = require(\"../controllers/postsController\");\nvar _authMiddleware = require(\"../middleware/authMiddleware\");\nconst router = (0, _express.Router)();\nrouter.post('/api/post/createPost', _authMiddleware.authenticateToken, _postsController.createPost);\nrouter.post('/api/post/updatePost', _authMiddleware.authenticateToken, _postsController.updatePost);\nrouter.delete('/api/post/deletePost', _authMiddleware.authenticateToken, _postsController.deltePost);\nrouter.get('/api/post/getPosts', _postsController.getPosts);\nrouter.get('/api/post/getUserPosts', _postsController.getUserPosts);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsInJlcXVpcmUiLCJfcG9zdHNDb250cm9sbGVyIiwiX2F1dGhNaWRkbGV3YXJlIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImF1dGhlbnRpY2F0ZVRva2VuIiwiY3JlYXRlUG9zdCIsInVwZGF0ZVBvc3QiLCJkZWxldGUiLCJkZWx0ZVBvc3QiLCJnZXQiLCJnZXRQb3N0cyIsImdldFVzZXJQb3N0cyIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXEJsb2dfQmFja1xcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsicG9zdC5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbmltcG9ydCB7IGNyZWF0ZVBvc3QsIGRlbHRlUG9zdCwgdXBkYXRlUG9zdCwgZ2V0UG9zdHMsIGdldFVzZXJQb3N0cyB9IGZyb20gXCIuLi9jb250cm9sbGVycy9wb3N0c0NvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgYXV0aGVudGljYXRlVG9rZW4gfSBmcm9tIFwiLi4vbWlkZGxld2FyZS9hdXRoTWlkZGxld2FyZVwiO1xyXG5cclxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2FwaS9wb3N0L2NyZWF0ZVBvc3QnLCBhdXRoZW50aWNhdGVUb2tlbiwgY3JlYXRlUG9zdCk7XHJcbnJvdXRlci5wb3N0KCcvYXBpL3Bvc3QvdXBkYXRlUG9zdCcsIGF1dGhlbnRpY2F0ZVRva2VuLCB1cGRhdGVQb3N0KTtcclxucm91dGVyLmRlbGV0ZSgnL2FwaS9wb3N0L2RlbGV0ZVBvc3QnLCBhdXRoZW50aWNhdGVUb2tlbiwgZGVsdGVQb3N0KTtcclxucm91dGVyLmdldCgnL2FwaS9wb3N0L2dldFBvc3RzJywgZ2V0UG9zdHMpO1xyXG5yb3V0ZXIuZ2V0KCcvYXBpL3Bvc3QvZ2V0VXNlclBvc3RzJywgZ2V0VXNlclBvc3RzKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUVBLElBQUFDLGdCQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxlQUFBLEdBQUFGLE9BQUE7QUFFQSxNQUFNRyxNQUFNLEdBQUcsSUFBQUMsZUFBTSxFQUFDLENBQUM7QUFFdkJELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLHNCQUFzQixFQUFFQyxpQ0FBaUIsRUFBRUMsMkJBQVUsQ0FBQztBQUNsRUosTUFBTSxDQUFDRSxJQUFJLENBQUMsc0JBQXNCLEVBQUVDLGlDQUFpQixFQUFFRSwyQkFBVSxDQUFDO0FBQ2xFTCxNQUFNLENBQUNNLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRUgsaUNBQWlCLEVBQUVJLDBCQUFTLENBQUM7QUFDbkVQLE1BQU0sQ0FBQ1EsR0FBRyxDQUFDLG9CQUFvQixFQUFFQyx5QkFBUSxDQUFDO0FBQzFDVCxNQUFNLENBQUNRLEdBQUcsQ0FBQyx3QkFBd0IsRUFBRUUsNkJBQVksQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRXBDYixNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_express","require","_postsController","_authMiddleware","router","Router","post","authenticateToken","createPost","updatePost","delete","deltePost","get","getPosts","getUserPosts","_default","exports","default"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\src\\routes\\","sources":["post.routes.js"],"sourcesContent":["import { Router } from \"express\";\r\n\r\nimport { createPost, deltePost, updatePost, getPosts, getUserPosts } from \"../controllers/postsController\";\r\nimport { authenticateToken } from \"../middleware/authMiddleware\";\r\n\r\nconst router = Router();\r\n\r\nrouter.post('/api/post/createPost', authenticateToken, createPost);\r\nrouter.post('/api/post/updatePost', authenticateToken, updatePost);\r\nrouter.delete('/api/post/deletePost', authenticateToken, deltePost);\r\nrouter.get('/api/post/getPosts', getPosts);\r\nrouter.get('/api/post/getUserPosts', getUserPosts);\r\n\r\nexport default router;"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAEA,IAAAC,gBAAA,GAAAD,OAAA;AACA,IAAAE,eAAA,GAAAF,OAAA;AAEA,MAAMG,MAAM,GAAG,IAAAC,eAAM,EAAC,CAAC;AAEvBD,MAAM,CAACE,IAAI,CAAC,sBAAsB,EAAEC,iCAAiB,EAAEC,2BAAU,CAAC;AAClEJ,MAAM,CAACE,IAAI,CAAC,sBAAsB,EAAEC,iCAAiB,EAAEE,2BAAU,CAAC;AAClEL,MAAM,CAACM,MAAM,CAAC,sBAAsB,EAAEH,iCAAiB,EAAEI,0BAAS,CAAC;AACnEP,MAAM,CAACQ,GAAG,CAAC,oBAAoB,EAAEC,yBAAQ,CAAC;AAC1CT,MAAM,CAACQ,GAAG,CAAC,wBAAwB,EAAEE,6BAAY,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEpCb,MAAM","ignoreList":[]}},"mtime":1718587179591},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\routes\\\\post.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _postsController = require(\"../controllers/postsController\");\nvar _authMiddleware = require(\"../middleware/authMiddleware\");\nconst router = (0, _express.Router)();\nrouter.post('/api/post/createPost', _authMiddleware.authenticateToken, _postsController.createPost);\nrouter.post('/api/post/updatePost', _authMiddleware.authenticateToken, _postsController.updatePost);\nrouter.delete('/api/post/deletePost', _authMiddleware.authenticateToken, _postsController.deltePost);\nrouter.get('/api/post/getPosts', _postsController.getPosts);\nrouter.get('/api/post/getUserPosts', _postsController.getUserPosts);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsInJlcXVpcmUiLCJfcG9zdHNDb250cm9sbGVyIiwiX2F1dGhNaWRkbGV3YXJlIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImF1dGhlbnRpY2F0ZVRva2VuIiwiY3JlYXRlUG9zdCIsInVwZGF0ZVBvc3QiLCJkZWxldGUiLCJkZWx0ZVBvc3QiLCJnZXQiLCJnZXRQb3N0cyIsImdldFVzZXJQb3N0cyIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXEJsb2dfQmFja1xcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsicG9zdC5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbmltcG9ydCB7IGNyZWF0ZVBvc3QsIGRlbHRlUG9zdCwgdXBkYXRlUG9zdCwgZ2V0UG9zdHMsIGdldFVzZXJQb3N0cyB9IGZyb20gXCIuLi9jb250cm9sbGVycy9wb3N0c0NvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgYXV0aGVudGljYXRlVG9rZW4gfSBmcm9tIFwiLi4vbWlkZGxld2FyZS9hdXRoTWlkZGxld2FyZVwiO1xyXG5cclxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdCgnL2FwaS9wb3N0L2NyZWF0ZVBvc3QnLCBhdXRoZW50aWNhdGVUb2tlbiwgY3JlYXRlUG9zdCk7XHJcbnJvdXRlci5wb3N0KCcvYXBpL3Bvc3QvdXBkYXRlUG9zdCcsIGF1dGhlbnRpY2F0ZVRva2VuLCB1cGRhdGVQb3N0KTtcclxucm91dGVyLmRlbGV0ZSgnL2FwaS9wb3N0L2RlbGV0ZVBvc3QnLCBhdXRoZW50aWNhdGVUb2tlbiwgZGVsdGVQb3N0KTtcclxucm91dGVyLmdldCgnL2FwaS9wb3N0L2dldFBvc3RzJywgZ2V0UG9zdHMpO1xyXG5yb3V0ZXIuZ2V0KCcvYXBpL3Bvc3QvZ2V0VXNlclBvc3RzJywgZ2V0VXNlclBvc3RzKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUVBLElBQUFDLGdCQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxlQUFBLEdBQUFGLE9BQUE7QUFFQSxNQUFNRyxNQUFNLEdBQUcsSUFBQUMsZUFBTSxFQUFDLENBQUM7QUFFdkJELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLHNCQUFzQixFQUFFQyxpQ0FBaUIsRUFBRUMsMkJBQVUsQ0FBQztBQUNsRUosTUFBTSxDQUFDRSxJQUFJLENBQUMsc0JBQXNCLEVBQUVDLGlDQUFpQixFQUFFRSwyQkFBVSxDQUFDO0FBQ2xFTCxNQUFNLENBQUNNLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRUgsaUNBQWlCLEVBQUVJLDBCQUFTLENBQUM7QUFDbkVQLE1BQU0sQ0FBQ1EsR0FBRyxDQUFDLG9CQUFvQixFQUFFQyx5QkFBUSxDQUFDO0FBQzFDVCxNQUFNLENBQUNRLEdBQUcsQ0FBQyx3QkFBd0IsRUFBRUUsNkJBQVksQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRXBDYixNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_express","require","_postsController","_authMiddleware","router","Router","post","authenticateToken","createPost","updatePost","delete","deltePost","get","getPosts","getUserPosts","_default","exports","default"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\src\\routes\\","sources":["post.routes.js"],"sourcesContent":["import { Router } from \"express\";\r\n\r\nimport { createPost, deltePost, updatePost, getPosts, getUserPosts } from \"../controllers/postsController\";\r\nimport { authenticateToken } from \"../middleware/authMiddleware\";\r\n\r\nconst router = Router();\r\n\r\nrouter.post('/api/post/createPost', authenticateToken, createPost);\r\nrouter.post('/api/post/updatePost', authenticateToken, updatePost);\r\nrouter.delete('/api/post/deletePost', authenticateToken, deltePost);\r\nrouter.get('/api/post/getPosts', getPosts);\r\nrouter.get('/api/post/getUserPosts', getUserPosts);\r\n\r\nexport default router;"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAEA,IAAAC,gBAAA,GAAAD,OAAA;AACA,IAAAE,eAAA,GAAAF,OAAA;AAEA,MAAMG,MAAM,GAAG,IAAAC,eAAM,EAAC,CAAC;AAEvBD,MAAM,CAACE,IAAI,CAAC,sBAAsB,EAAEC,iCAAiB,EAAEC,2BAAU,CAAC;AAClEJ,MAAM,CAACE,IAAI,CAAC,sBAAsB,EAAEC,iCAAiB,EAAEE,2BAAU,CAAC;AAClEL,MAAM,CAACM,MAAM,CAAC,sBAAsB,EAAEH,iCAAiB,EAAEI,0BAAS,CAAC;AACnEP,MAAM,CAACQ,GAAG,CAAC,oBAAoB,EAAEC,yBAAQ,CAAC;AAC1CT,MAAM,CAACQ,GAAG,CAAC,wBAAwB,EAAEE,6BAAY,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEpCb,MAAM","ignoreList":[]}},"mtime":1718587179591},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\controllers\\\\postsController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updatePost = exports.getUserPosts = exports.getPosts = exports.deltePost = exports.createPost = void 0;\nvar _expressValidator = require(\"express-validator\");\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _index = require(\"../../database/index\");\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _fs = _interopRequireDefault(require(\"fs\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// export const createPost = async (req, res) => {\n//   console.log(req.body);\n//   console.log(req.files);\n\n//   const errors = validationResult(req);\n//   if (!errors.isEmpty()) {\n//     return res.status(400).json({ errors: errors.array() });\n//   }\n\n//   const { tittle, textDescrip } = req.body;\n//   const picture = req.files && req.files.picture ? req.files.picture : null;\n\n//   try {\n//     const token = req.headers.authorization.split(\" \")[1];\n//     const decoded = jwt.verify(token, process.env.TOKEN);\n//     const userId = decoded.userId;\n\n//     let params = {\n//       tittle,\n//       textDescrip,\n//       picture: picture ? picture.name : null,\n//     };\n\n//     if (picture) {\n//       const fileName = picture.name;\n//       const uploadPath = path.join(__dirname, \"../../photos\", fileName);\n\n//       await picture.mv(uploadPath);\n\n//       const fileData = fs.readFileSync(uploadPath);\n\n//       params.picture = fileData;\n//     }\n\n//     const result = await executeQuery(queries.insertPost, params);\n\n//     const postId = result.recordset[0].id;\n\n//     const relationParams = {\n//       idUser: userId,\n//       idPost: postId,\n//     };\n\n//     await executeQuery(queries.insertUserPost, relationParams);\n\n//     res.status(201).json({ message: \"Post creado exitosamente\", postId });\n//   } catch (err) {\n//     console.error(err.message);\n//     res.status(500).send(\"Error en el servidor al intentar crear el post\");\n\n//     if (picture) {\n//       const filePath = path.join(__dirname, \"../../photos\", picture.name);\n//       fs.unlinkSync(filePath);\n//     }\n//   }\n// };\n\nconst createPost = async (req, res) => {\n  // console.log(req.body);\n  // console.log(req.files);\n\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    tittle,\n    textDescrip\n  } = req.body;\n  let picture;\n  try {\n    const token = req.headers.authorization.split(\" \")[1];\n    const decoded = _jsonwebtoken.default.verify(token, process.env.TOKEN);\n    const userId = decoded.userId;\n    let params = {\n      tittle,\n      textDescrip,\n      picture: null // Aquí cambiamos el buffer por el nombre del archivo\n    };\n    picture = req.files ? req.files.picture : '';\n    if (picture) {\n      const fileName = picture.name;\n      const uploadPath = _path.default.join(__dirname, \"../photos/\", fileName);\n      params.picture = fileName; // Actualiza params.picture con el nombre del archivo\n      await picture.mv(uploadPath);\n    }\n    if (params.picture) {\n      // Asegúrate de que 'picture' no es null o undefined antes de llamar a 'executeQuery'\n      console.log(params);\n      const result = await (0, _index.executeQuery)(_index.queries.insertPost, params);\n      const postId = result.recordset[0].id;\n      const relationParams = {\n        idUser: userId,\n        idPost: postId\n      };\n      await (0, _index.executeQuery)(_index.queries.insertUserPost, relationParams);\n      res.status(201).json({\n        message: \"Post creado exitosamente\",\n        postId\n      });\n    } else {\n      console.error(\"Error: 'picture' es null o undefined\");\n    }\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Error en el servidor al intentar crear el post\");\n    if (picture) {\n      const filePath = _path.default.join(__dirname, \"./photos\", picture.name);\n      _fs.default.unlinkSync(filePath);\n    }\n  }\n};\nexports.createPost = createPost;\nconst updatePost = async (req, res) => {\n  console.log(req.body);\n  console.log(req.files);\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    id,\n    tittle,\n    textDescrip\n  } = req.body;\n  const picture = req.files && req.files.picture ? req.files.picture[0] : null;\n  try {\n    const token = req.headers.authorization.split(\" \")[1];\n    const decoded = _jsonwebtoken.default.verify(token, process.env.TOKEN);\n    const userId = decoded.userId;\n    let params = {\n      id,\n      userId,\n      tittle: tittle || null,\n      textDescrip: textDescrip || null,\n      picture: picture ? picture.buffer : Buffer.from(\"\")\n    };\n    if (picture) {\n      const fileName = picture.name;\n      const uploadPath = _path.default.join(__dirname, \"../../photos\", fileName);\n      await picture.mv(uploadPath);\n      const fileData = _fs.default.readFileSync(uploadPath);\n      params.picture = fileData;\n    }\n    const postExist = await (0, _index.executeQuery)(_index.queries.getPost, {\n      id\n    });\n    if (postExist.recordset.length === 0) {\n      return res.status(400).json({\n        message: `No existe el post con id: ${id}`\n      });\n    }\n    await (0, _index.executeQuery)(_index.queries.updatePost, params);\n    if (picture) {\n      const currentPicture = postExist.recordset[0].picture;\n      if (currentPicture && currentPicture !== picture.name) {\n        const filePath = _path.default.join(__dirname, \"../../photos\", currentPicture);\n        _fs.default.unlinkSync(filePath);\n      }\n    }\n    res.status(201).json({\n      message: \"Post actualizado exitosamente\"\n    });\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Error en el servidor al intentar actualizar el post\");\n    if (picture) {\n      const filePath = _path.default.join(__dirname, \"../../photos\", picture.name);\n      _fs.default.unlinkSync(filePath);\n    }\n  }\n};\nexports.updatePost = updatePost;\nconst deltePost = async (req, res) => {\n  console.log(req.body);\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    id\n  } = req.body;\n  try {\n    const token = req.headers.authorization.split(\" \")[1];\n    const decoded = _jsonwebtoken.default.verify(token, process.env.TOKEN);\n    const userId = decoded.userId;\n    const params = {\n      id,\n      userId\n    };\n    const postExist = await (0, _index.executeQuery)(_index.queries.getPost, {\n      id\n    });\n    if (postExist.recordset.length === 0) {\n      return res.status(400).json({\n        message: `No existe el post con id: ${id}`\n      });\n    }\n    await (0, _index.executeQuery)(_index.queries.deletePost, params);\n    res.status(201).json({\n      message: \"Post eliminado exitosamente\"\n    });\n  } catch (err) {}\n};\nexports.deltePost = deltePost;\nconst getPosts = async (req, res) => {\n  try {\n    const result = await (0, _index.executeQuery)(_index.queries.getPosts);\n    res.status(200).json(result.recordset);\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Error en el servidor al intentar crear el post\");\n  }\n};\nexports.getPosts = getPosts;\nconst getUserPosts = async (req, res) => {\n  try {\n    const idUser = req.userId;\n    console.log(idUser);\n    const result = await (0, _index.executeQuery)(_index.queries.getUserPosts, {\n      idUser: idUser\n    });\n    res.status(200).json(result.recordset);\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Error en el servidor al intentar buscar los posts\");\n  }\n};\nexports.getUserPosts = getUserPosts;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzc1ZhbGlkYXRvciIsInJlcXVpcmUiLCJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9pbmRleCIsIl9wYXRoIiwiX2ZzIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY3JlYXRlUG9zdCIsInJlcSIsInJlcyIsImVycm9ycyIsInZhbGlkYXRpb25SZXN1bHQiLCJpc0VtcHR5Iiwic3RhdHVzIiwianNvbiIsImFycmF5IiwidGl0dGxlIiwidGV4dERlc2NyaXAiLCJib2R5IiwicGljdHVyZSIsInRva2VuIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzcGxpdCIsImRlY29kZWQiLCJqd3QiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiVE9LRU4iLCJ1c2VySWQiLCJwYXJhbXMiLCJmaWxlcyIsImZpbGVOYW1lIiwibmFtZSIsInVwbG9hZFBhdGgiLCJwYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsIm12IiwiY29uc29sZSIsImxvZyIsInJlc3VsdCIsImV4ZWN1dGVRdWVyeSIsInF1ZXJpZXMiLCJpbnNlcnRQb3N0IiwicG9zdElkIiwicmVjb3Jkc2V0IiwiaWQiLCJyZWxhdGlvblBhcmFtcyIsImlkVXNlciIsImlkUG9zdCIsImluc2VydFVzZXJQb3N0IiwibWVzc2FnZSIsImVycm9yIiwiZXJyIiwic2VuZCIsImZpbGVQYXRoIiwiZnMiLCJ1bmxpbmtTeW5jIiwiZXhwb3J0cyIsInVwZGF0ZVBvc3QiLCJidWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwiZmlsZURhdGEiLCJyZWFkRmlsZVN5bmMiLCJwb3N0RXhpc3QiLCJnZXRQb3N0IiwibGVuZ3RoIiwiY3VycmVudFBpY3R1cmUiLCJkZWx0ZVBvc3QiLCJkZWxldGVQb3N0IiwiZ2V0UG9zdHMiLCJnZXRVc2VyUG9zdHMiXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXEJsb2dfQmFja1xcc3JjXFxjb250cm9sbGVyc1xcIiwic291cmNlcyI6WyJwb3N0c0NvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmFsaWRhdGlvblJlc3VsdCB9IGZyb20gXCJleHByZXNzLXZhbGlkYXRvclwiO1xyXG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuaW1wb3J0IHsgZXhlY3V0ZVF1ZXJ5LCBxdWVyaWVzIH0gZnJvbSBcIi4uLy4uL2RhdGFiYXNlL2luZGV4XCI7XHJcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XHJcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcclxuXHJcbi8vIGV4cG9ydCBjb25zdCBjcmVhdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbi8vICAgY29uc29sZS5sb2cocmVxLmJvZHkpO1xyXG4vLyAgIGNvbnNvbGUubG9nKHJlcS5maWxlcyk7XHJcblxyXG4vLyAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcclxuLy8gICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcclxuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XHJcbi8vICAgfVxyXG5cclxuLy8gICBjb25zdCB7IHRpdHRsZSwgdGV4dERlc2NyaXAgfSA9IHJlcS5ib2R5O1xyXG4vLyAgIGNvbnN0IHBpY3R1cmUgPSByZXEuZmlsZXMgJiYgcmVxLmZpbGVzLnBpY3R1cmUgPyByZXEuZmlsZXMucGljdHVyZSA6IG51bGw7XHJcblxyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3BsaXQoXCIgXCIpWzFdO1xyXG4vLyAgICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LlRPS0VOKTtcclxuLy8gICAgIGNvbnN0IHVzZXJJZCA9IGRlY29kZWQudXNlcklkO1xyXG5cclxuLy8gICAgIGxldCBwYXJhbXMgPSB7XHJcbi8vICAgICAgIHRpdHRsZSxcclxuLy8gICAgICAgdGV4dERlc2NyaXAsXHJcbi8vICAgICAgIHBpY3R1cmU6IHBpY3R1cmUgPyBwaWN0dXJlLm5hbWUgOiBudWxsLFxyXG4vLyAgICAgfTtcclxuXHJcbi8vICAgICBpZiAocGljdHVyZSkge1xyXG4vLyAgICAgICBjb25zdCBmaWxlTmFtZSA9IHBpY3R1cmUubmFtZTtcclxuLy8gICAgICAgY29uc3QgdXBsb2FkUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vcGhvdG9zXCIsIGZpbGVOYW1lKTtcclxuXHJcbi8vICAgICAgIGF3YWl0IHBpY3R1cmUubXYodXBsb2FkUGF0aCk7XHJcblxyXG4vLyAgICAgICBjb25zdCBmaWxlRGF0YSA9IGZzLnJlYWRGaWxlU3luYyh1cGxvYWRQYXRoKTtcclxuXHJcbi8vICAgICAgIHBhcmFtcy5waWN0dXJlID0gZmlsZURhdGE7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHF1ZXJpZXMuaW5zZXJ0UG9zdCwgcGFyYW1zKTtcclxuXHJcbi8vICAgICBjb25zdCBwb3N0SWQgPSByZXN1bHQucmVjb3Jkc2V0WzBdLmlkO1xyXG5cclxuLy8gICAgIGNvbnN0IHJlbGF0aW9uUGFyYW1zID0ge1xyXG4vLyAgICAgICBpZFVzZXI6IHVzZXJJZCxcclxuLy8gICAgICAgaWRQb3N0OiBwb3N0SWQsXHJcbi8vICAgICB9O1xyXG5cclxuLy8gICAgIGF3YWl0IGV4ZWN1dGVRdWVyeShxdWVyaWVzLmluc2VydFVzZXJQb3N0LCByZWxhdGlvblBhcmFtcyk7XHJcblxyXG4vLyAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIlBvc3QgY3JlYWRvIGV4aXRvc2FtZW50ZVwiLCBwb3N0SWQgfSk7XHJcbi8vICAgfSBjYXRjaCAoZXJyKSB7XHJcbi8vICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcclxuLy8gICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiRXJyb3IgZW4gZWwgc2Vydmlkb3IgYWwgaW50ZW50YXIgY3JlYXIgZWwgcG9zdFwiKTtcclxuXHJcbi8vICAgICBpZiAocGljdHVyZSkge1xyXG4vLyAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vcGhvdG9zXCIsIHBpY3R1cmUubmFtZSk7XHJcbi8vICAgICAgIGZzLnVubGlua1N5bmMoZmlsZVBhdGgpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH1cclxuLy8gfTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgLy8gY29uc29sZS5sb2cocmVxLmJvZHkpO1xyXG4gIC8vIGNvbnNvbGUubG9nKHJlcS5maWxlcyk7XHJcblxyXG4gIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcclxuICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB7IHRpdHRsZSwgdGV4dERlc2NyaXAgfSA9IHJlcS5ib2R5O1xyXG5cclxuICBsZXQgcGljdHVyZTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uLnNwbGl0KFwiIFwiKVsxXTtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5UT0tFTik7XHJcbiAgICBjb25zdCB1c2VySWQgPSBkZWNvZGVkLnVzZXJJZDtcclxuXHJcbiAgICBsZXQgcGFyYW1zID0ge1xyXG4gICAgICB0aXR0bGUsXHJcbiAgICAgIHRleHREZXNjcmlwLFxyXG4gICAgICBwaWN0dXJlOiBudWxsLCAvLyBBcXXDrSBjYW1iaWFtb3MgZWwgYnVmZmVyIHBvciBlbCBub21icmUgZGVsIGFyY2hpdm9cclxuICAgIH07XHJcblxyXG4gICAgcGljdHVyZSA9IHJlcS5maWxlcyA/IHJlcS5maWxlcy5waWN0dXJlIDogJyc7XHJcblxyXG4gICAgaWYgKHBpY3R1cmUpIHtcclxuICAgICAgY29uc3QgZmlsZU5hbWUgPSBwaWN0dXJlLm5hbWU7XHJcbiAgICAgIGNvbnN0IHVwbG9hZFBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4uL3Bob3Rvcy9cIiwgZmlsZU5hbWUpO1xyXG5cclxuICAgICAgcGFyYW1zLnBpY3R1cmUgPSBmaWxlTmFtZTsgLy8gQWN0dWFsaXphIHBhcmFtcy5waWN0dXJlIGNvbiBlbCBub21icmUgZGVsIGFyY2hpdm9cclxuICAgICAgYXdhaXQgcGljdHVyZS5tdih1cGxvYWRQYXRoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHBhcmFtcy5waWN0dXJlKSB7IC8vIEFzZWfDunJhdGUgZGUgcXVlICdwaWN0dXJlJyBubyBlcyBudWxsIG8gdW5kZWZpbmVkIGFudGVzIGRlIGxsYW1hciBhICdleGVjdXRlUXVlcnknXHJcbiAgICAgIGNvbnNvbGUubG9nKHBhcmFtcyk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVRdWVyeShxdWVyaWVzLmluc2VydFBvc3QsIHBhcmFtcyk7XHJcblxyXG4gICAgICBjb25zdCBwb3N0SWQgPSByZXN1bHQucmVjb3Jkc2V0WzBdLmlkO1xyXG5cclxuICAgICAgY29uc3QgcmVsYXRpb25QYXJhbXMgPSB7XHJcbiAgICAgICAgaWRVc2VyOiB1c2VySWQsXHJcbiAgICAgICAgaWRQb3N0OiBwb3N0SWQsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhd2FpdCBleGVjdXRlUXVlcnkocXVlcmllcy5pbnNlcnRVc2VyUG9zdCwgcmVsYXRpb25QYXJhbXMpO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIlBvc3QgY3JlYWRvIGV4aXRvc2FtZW50ZVwiLCBwb3N0SWQgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6ICdwaWN0dXJlJyBlcyBudWxsIG8gdW5kZWZpbmVkXCIpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIkVycm9yIGVuIGVsIHNlcnZpZG9yIGFsIGludGVudGFyIGNyZWFyIGVsIHBvc3RcIik7XHJcblxyXG4gICAgaWYgKHBpY3R1cmUpIHtcclxuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4vcGhvdG9zXCIsIHBpY3R1cmUubmFtZSk7XHJcbiAgICAgIGZzLnVubGlua1N5bmMoZmlsZVBhdGgpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc29sZS5sb2cocmVxLmJvZHkpO1xyXG4gIGNvbnNvbGUubG9nKHJlcS5maWxlcyk7XHJcblxyXG4gIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcclxuICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB7IGlkLCB0aXR0bGUsIHRleHREZXNjcmlwIH0gPSByZXEuYm9keTtcclxuICBjb25zdCBwaWN0dXJlID0gcmVxLmZpbGVzICYmIHJlcS5maWxlcy5waWN0dXJlID8gcmVxLmZpbGVzLnBpY3R1cmVbMF0gOiBudWxsO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uLnNwbGl0KFwiIFwiKVsxXTtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5UT0tFTik7XHJcbiAgICBjb25zdCB1c2VySWQgPSBkZWNvZGVkLnVzZXJJZDtcclxuXHJcbiAgICBsZXQgcGFyYW1zID0ge1xyXG4gICAgICBpZCxcclxuICAgICAgdXNlcklkLFxyXG4gICAgICB0aXR0bGU6IHRpdHRsZSB8fCBudWxsLFxyXG4gICAgICB0ZXh0RGVzY3JpcDogdGV4dERlc2NyaXAgfHwgbnVsbCxcclxuICAgICAgcGljdHVyZTogcGljdHVyZSA/IHBpY3R1cmUuYnVmZmVyIDogQnVmZmVyLmZyb20oXCJcIiksXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChwaWN0dXJlKSB7XHJcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gcGljdHVyZS5uYW1lO1xyXG4gICAgICBjb25zdCB1cGxvYWRQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgXCIuLi8uLi9waG90b3NcIiwgZmlsZU5hbWUpO1xyXG5cclxuICAgICAgYXdhaXQgcGljdHVyZS5tdih1cGxvYWRQYXRoKTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbGVEYXRhID0gZnMucmVhZEZpbGVTeW5jKHVwbG9hZFBhdGgpO1xyXG5cclxuICAgICAgcGFyYW1zLnBpY3R1cmUgPSBmaWxlRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwb3N0RXhpc3QgPSBhd2FpdCBleGVjdXRlUXVlcnkocXVlcmllcy5nZXRQb3N0LCB7IGlkIH0pO1xyXG4gICAgaWYgKHBvc3RFeGlzdC5yZWNvcmRzZXQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXNcclxuICAgICAgICAuc3RhdHVzKDQwMClcclxuICAgICAgICAuanNvbih7IG1lc3NhZ2U6IGBObyBleGlzdGUgZWwgcG9zdCBjb24gaWQ6ICR7aWR9YCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBleGVjdXRlUXVlcnkocXVlcmllcy51cGRhdGVQb3N0LCBwYXJhbXMpO1xyXG5cclxuICAgIGlmIChwaWN0dXJlKSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRQaWN0dXJlID0gcG9zdEV4aXN0LnJlY29yZHNldFswXS5waWN0dXJlO1xyXG5cclxuICAgICAgaWYgKGN1cnJlbnRQaWN0dXJlICYmIGN1cnJlbnRQaWN0dXJlICE9PSBwaWN0dXJlLm5hbWUpIHtcclxuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vcGhvdG9zXCIsIGN1cnJlbnRQaWN0dXJlKTtcclxuICAgICAgICBmcy51bmxpbmtTeW5jKGZpbGVQYXRoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogXCJQb3N0IGFjdHVhbGl6YWRvIGV4aXRvc2FtZW50ZVwiIH0pO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIkVycm9yIGVuIGVsIHNlcnZpZG9yIGFsIGludGVudGFyIGFjdHVhbGl6YXIgZWwgcG9zdFwiKTtcclxuICAgIGlmIChwaWN0dXJlKSB7XHJcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgXCIuLi8uLi9waG90b3NcIiwgcGljdHVyZS5uYW1lKTtcclxuICAgICAgZnMudW5saW5rU3luYyhmaWxlUGF0aCk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlbHRlUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnNvbGUubG9nKHJlcS5ib2R5KTtcclxuXHJcbiAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xyXG4gIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uLnNwbGl0KFwiIFwiKVsxXTtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5UT0tFTik7XHJcbiAgICBjb25zdCB1c2VySWQgPSBkZWNvZGVkLnVzZXJJZDtcclxuXHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgIGlkLFxyXG4gICAgICB1c2VySWQsXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcG9zdEV4aXN0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHF1ZXJpZXMuZ2V0UG9zdCwgeyBpZCB9KTtcclxuICAgIGlmIChwb3N0RXhpc3QucmVjb3Jkc2V0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzXHJcbiAgICAgICAgLnN0YXR1cyg0MDApXHJcbiAgICAgICAgLmpzb24oeyBtZXNzYWdlOiBgTm8gZXhpc3RlIGVsIHBvc3QgY29uIGlkOiAke2lkfWAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgZXhlY3V0ZVF1ZXJ5KHF1ZXJpZXMuZGVsZXRlUG9zdCwgcGFyYW1zKTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6IFwiUG9zdCBlbGltaW5hZG8gZXhpdG9zYW1lbnRlXCIgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7fVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFBvc3RzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVRdWVyeShxdWVyaWVzLmdldFBvc3RzKTtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3VsdC5yZWNvcmRzZXQpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIkVycm9yIGVuIGVsIHNlcnZpZG9yIGFsIGludGVudGFyIGNyZWFyIGVsIHBvc3RcIik7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFVzZXJQb3N0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBpZFVzZXIgPSByZXEudXNlcklkO1xyXG4gICAgY29uc29sZS5sb2coaWRVc2VyKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVRdWVyeShxdWVyaWVzLmdldFVzZXJQb3N0cywgeyBpZFVzZXI6IGlkVXNlciB9KTtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3VsdC5yZWNvcmRzZXQpO1xyXG5cclxuXHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiRXJyb3IgZW4gZWwgc2Vydmlkb3IgYWwgaW50ZW50YXIgYnVzY2FyIGxvcyBwb3N0c1wiKTtcclxuICB9XHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLGlCQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxhQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxNQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxLQUFBLEdBQUFGLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBSyxHQUFBLEdBQUFILHNCQUFBLENBQUFGLE9BQUE7QUFBb0IsU0FBQUUsdUJBQUFJLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFFcEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FB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","map":{"version":3,"names":["_expressValidator","require","_jsonwebtoken","_interopRequireDefault","_index","_path","_fs","e","__esModule","default","createPost","req","res","errors","validationResult","isEmpty","status","json","array","tittle","textDescrip","body","picture","token","headers","authorization","split","decoded","jwt","verify","process","env","TOKEN","userId","params","files","fileName","name","uploadPath","path","join","__dirname","mv","console","log","result","executeQuery","queries","insertPost","postId","recordset","id","relationParams","idUser","idPost","insertUserPost","message","error","err","send","filePath","fs","unlinkSync","exports","updatePost","buffer","Buffer","from","fileData","readFileSync","postExist","getPost","length","currentPicture","deltePost","deletePost","getPosts","getUserPosts"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\src\\controllers\\","sources":["postsController.js"],"sourcesContent":["import { validationResult } from \"express-validator\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport { executeQuery, queries } from \"../../database/index\";\r\nimport path from \"path\";\r\nimport fs from \"fs\";\r\n\r\n// export const createPost = async (req, res) => {\r\n//   console.log(req.body);\r\n//   console.log(req.files);\r\n\r\n//   const errors = validationResult(req);\r\n//   if (!errors.isEmpty()) {\r\n//     return res.status(400).json({ errors: errors.array() });\r\n//   }\r\n\r\n//   const { tittle, textDescrip } = req.body;\r\n//   const picture = req.files && req.files.picture ? req.files.picture : null;\r\n\r\n//   try {\r\n//     const token = req.headers.authorization.split(\" \")[1];\r\n//     const decoded = jwt.verify(token, process.env.TOKEN);\r\n//     const userId = decoded.userId;\r\n\r\n//     let params = {\r\n//       tittle,\r\n//       textDescrip,\r\n//       picture: picture ? picture.name : null,\r\n//     };\r\n\r\n//     if (picture) {\r\n//       const fileName = picture.name;\r\n//       const uploadPath = path.join(__dirname, \"../../photos\", fileName);\r\n\r\n//       await picture.mv(uploadPath);\r\n\r\n//       const fileData = fs.readFileSync(uploadPath);\r\n\r\n//       params.picture = fileData;\r\n//     }\r\n\r\n//     const result = await executeQuery(queries.insertPost, params);\r\n\r\n//     const postId = result.recordset[0].id;\r\n\r\n//     const relationParams = {\r\n//       idUser: userId,\r\n//       idPost: postId,\r\n//     };\r\n\r\n//     await executeQuery(queries.insertUserPost, relationParams);\r\n\r\n//     res.status(201).json({ message: \"Post creado exitosamente\", postId });\r\n//   } catch (err) {\r\n//     console.error(err.message);\r\n//     res.status(500).send(\"Error en el servidor al intentar crear el post\");\r\n\r\n//     if (picture) {\r\n//       const filePath = path.join(__dirname, \"../../photos\", picture.name);\r\n//       fs.unlinkSync(filePath);\r\n//     }\r\n//   }\r\n// };\r\n\r\nexport const createPost = async (req, res) => {\r\n  // console.log(req.body);\r\n  // console.log(req.files);\r\n\r\n  const errors = validationResult(req);\r\n  if (!errors.isEmpty()) {\r\n    return res.status(400).json({ errors: errors.array() });\r\n  }\r\n\r\n  const { tittle, textDescrip } = req.body;\r\n\r\n  let picture;\r\n  try {\r\n    const token = req.headers.authorization.split(\" \")[1];\r\n    const decoded = jwt.verify(token, process.env.TOKEN);\r\n    const userId = decoded.userId;\r\n\r\n    let params = {\r\n      tittle,\r\n      textDescrip,\r\n      picture: null, // Aquí cambiamos el buffer por el nombre del archivo\r\n    };\r\n\r\n    picture = req.files ? req.files.picture : '';\r\n\r\n    if (picture) {\r\n      const fileName = picture.name;\r\n      const uploadPath = path.join(__dirname, \"../photos/\", fileName);\r\n\r\n      params.picture = fileName; // Actualiza params.picture con el nombre del archivo\r\n      await picture.mv(uploadPath);\r\n\r\n    }\r\n\r\n    if (params.picture) { // Asegúrate de que 'picture' no es null o undefined antes de llamar a 'executeQuery'\r\n      console.log(params);\r\n      const result = await executeQuery(queries.insertPost, params);\r\n\r\n      const postId = result.recordset[0].id;\r\n\r\n      const relationParams = {\r\n        idUser: userId,\r\n        idPost: postId,\r\n      };\r\n\r\n      await executeQuery(queries.insertUserPost, relationParams);\r\n\r\n      res.status(201).json({ message: \"Post creado exitosamente\", postId });\r\n    } else {\r\n      console.error(\"Error: 'picture' es null o undefined\");\r\n    }\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    res.status(500).send(\"Error en el servidor al intentar crear el post\");\r\n\r\n    if (picture) {\r\n      const filePath = path.join(__dirname, \"./photos\", picture.name);\r\n      fs.unlinkSync(filePath);\r\n    }\r\n  }\r\n};\r\n\r\nexport const updatePost = async (req, res) => {\r\n  console.log(req.body);\r\n  console.log(req.files);\r\n\r\n  const errors = validationResult(req);\r\n  if (!errors.isEmpty()) {\r\n    return res.status(400).json({ errors: errors.array() });\r\n  }\r\n\r\n  const { id, tittle, textDescrip } = req.body;\r\n  const picture = req.files && req.files.picture ? req.files.picture[0] : null;\r\n\r\n  try {\r\n    const token = req.headers.authorization.split(\" \")[1];\r\n    const decoded = jwt.verify(token, process.env.TOKEN);\r\n    const userId = decoded.userId;\r\n\r\n    let params = {\r\n      id,\r\n      userId,\r\n      tittle: tittle || null,\r\n      textDescrip: textDescrip || null,\r\n      picture: picture ? picture.buffer : Buffer.from(\"\"),\r\n    };\r\n\r\n    if (picture) {\r\n      const fileName = picture.name;\r\n      const uploadPath = path.join(__dirname, \"../../photos\", fileName);\r\n\r\n      await picture.mv(uploadPath);\r\n\r\n      const fileData = fs.readFileSync(uploadPath);\r\n\r\n      params.picture = fileData;\r\n    }\r\n\r\n    const postExist = await executeQuery(queries.getPost, { id });\r\n    if (postExist.recordset.length === 0) {\r\n      return res\r\n        .status(400)\r\n        .json({ message: `No existe el post con id: ${id}` });\r\n    }\r\n\r\n    await executeQuery(queries.updatePost, params);\r\n\r\n    if (picture) {\r\n      const currentPicture = postExist.recordset[0].picture;\r\n\r\n      if (currentPicture && currentPicture !== picture.name) {\r\n        const filePath = path.join(__dirname, \"../../photos\", currentPicture);\r\n        fs.unlinkSync(filePath);\r\n      }\r\n    }\r\n\r\n    res.status(201).json({ message: \"Post actualizado exitosamente\" });\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    res.status(500).send(\"Error en el servidor al intentar actualizar el post\");\r\n    if (picture) {\r\n      const filePath = path.join(__dirname, \"../../photos\", picture.name);\r\n      fs.unlinkSync(filePath);\r\n    }\r\n  }\r\n};\r\n\r\nexport const deltePost = async (req, res) => {\r\n  console.log(req.body);\r\n\r\n  const errors = validationResult(req);\r\n  if (!errors.isEmpty()) {\r\n    return res.status(400).json({ errors: errors.array() });\r\n  }\r\n\r\n  const { id } = req.body;\r\n\r\n  try {\r\n    const token = req.headers.authorization.split(\" \")[1];\r\n    const decoded = jwt.verify(token, process.env.TOKEN);\r\n    const userId = decoded.userId;\r\n\r\n    const params = {\r\n      id,\r\n      userId,\r\n    };\r\n    const postExist = await executeQuery(queries.getPost, { id });\r\n    if (postExist.recordset.length === 0) {\r\n      return res\r\n        .status(400)\r\n        .json({ message: `No existe el post con id: ${id}` });\r\n    }\r\n\r\n    await executeQuery(queries.deletePost, params);\r\n\r\n    res.status(201).json({ message: \"Post eliminado exitosamente\" });\r\n  } catch (err) {}\r\n};\r\n\r\nexport const getPosts = async (req, res) => {\r\n  try {\r\n    const result = await executeQuery(queries.getPosts);\r\n    res.status(200).json(result.recordset);\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    res.status(500).send(\"Error en el servidor al intentar crear el post\");\r\n  }\r\n};\r\n\r\nexport const getUserPosts = async (req, res) => {\r\n  try {\r\n    const idUser = req.userId;\r\n    console.log(idUser);\r\n    const result = await executeQuery(queries.getUserPosts, { idUser: idUser });\r\n    res.status(200).json(result.recordset);\r\n\r\n\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    res.status(500).send(\"Error en el servidor al intentar buscar los posts\");\r\n  }\r\n}"],"mappings":"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","ignoreList":[]}},"mtime":1718588226864},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"filename\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\\\\src\\\\controllers\\\\postsController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\UTM\\\\9no\\\\Web_Integral\\\\blog_back\\\\Blog_Back\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.24.7:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updatePost = exports.getUserPosts = exports.getPosts = exports.deltePost = exports.createPost = void 0;\nvar _expressValidator = require(\"express-validator\");\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _index = require(\"../../database/index\");\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _fs = _interopRequireDefault(require(\"fs\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// export const createPost = async (req, res) => {\n//   console.log(req.body);\n//   console.log(req.files);\n\n//   const errors = validationResult(req);\n//   if (!errors.isEmpty()) {\n//     return res.status(400).json({ errors: errors.array() });\n//   }\n\n//   const { tittle, textDescrip } = req.body;\n//   const picture = req.files && req.files.picture ? req.files.picture : null;\n\n//   try {\n//     const token = req.headers.authorization.split(\" \")[1];\n//     const decoded = jwt.verify(token, process.env.TOKEN);\n//     const userId = decoded.userId;\n\n//     let params = {\n//       tittle,\n//       textDescrip,\n//       picture: picture ? picture.name : null,\n//     };\n\n//     if (picture) {\n//       const fileName = picture.name;\n//       const uploadPath = path.join(__dirname, \"../../photos\", fileName);\n\n//       await picture.mv(uploadPath);\n\n//       const fileData = fs.readFileSync(uploadPath);\n\n//       params.picture = fileData;\n//     }\n\n//     const result = await executeQuery(queries.insertPost, params);\n\n//     const postId = result.recordset[0].id;\n\n//     const relationParams = {\n//       idUser: userId,\n//       idPost: postId,\n//     };\n\n//     await executeQuery(queries.insertUserPost, relationParams);\n\n//     res.status(201).json({ message: \"Post creado exitosamente\", postId });\n//   } catch (err) {\n//     console.error(err.message);\n//     res.status(500).send(\"Error en el servidor al intentar crear el post\");\n\n//     if (picture) {\n//       const filePath = path.join(__dirname, \"../../photos\", picture.name);\n//       fs.unlinkSync(filePath);\n//     }\n//   }\n// };\n\nconst createPost = async (req, res) => {\n  // console.log(req.body);\n  // console.log(req.files);\n\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    tittle,\n    textDescrip\n  } = req.body;\n  let picture;\n  try {\n    const token = req.headers.authorization.split(\" \")[1];\n    const decoded = _jsonwebtoken.default.verify(token, process.env.TOKEN);\n    const userId = decoded.userId;\n    let params = {\n      tittle,\n      textDescrip,\n      picture: null // Aquí cambiamos el buffer por el nombre del archivo\n    };\n    picture = req.files ? req.files.picture : '';\n    if (picture) {\n      const fileName = picture.name;\n      const uploadPath = _path.default.join(__dirname, \"../photos/\", fileName);\n      params.picture = fileName; // Actualiza params.picture con el nombre del archivo\n      await picture.mv(uploadPath);\n    }\n    if (params.picture) {\n      // Asegúrate de que 'picture' no es null o undefined antes de llamar a 'executeQuery'\n      console.log(params);\n      const result = await (0, _index.executeQuery)(_index.queries.insertPost, params);\n      const postId = result.recordset[0].id;\n      const relationParams = {\n        idUser: userId,\n        idPost: postId\n      };\n      await (0, _index.executeQuery)(_index.queries.insertUserPost, relationParams);\n      res.status(201).json({\n        message: \"Post creado exitosamente\",\n        postId\n      });\n    } else {\n      console.error(\"Error: 'picture' es null o undefined\");\n    }\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Error en el servidor al intentar crear el post\");\n    if (picture) {\n      const filePath = _path.default.join(__dirname, \"../photos\", picture.name);\n      _fs.default.unlinkSync(filePath);\n    }\n  }\n};\n\n// export const updatePost = async (req, res) => {\n//   console.log(req.body);\n//   console.log(req.files);\n\n//   const errors = validationResult(req);\n//   if (!errors.isEmpty()) {\n//     return res.status(400).json({ errors: errors.array() });\n//   }\n\n//   const { id, tittle, textDescrip } = req.body;\n//   let pictureName;\n\n//   try {\n//     const token = req.headers.authorization.split(\" \")[1];\n//     const decoded = jwt.verify(token, process.env.TOKEN);\n//     const userId = decoded.userId;\n\n//     // Obtener el post existente\n//     const postExist = await executeQuery(queries.getPost, { id });\n//     if (postExist.recordset.length === 0) {\n//       return res\n//         .status(400)\n//         .json({ message: `No existe el post con id: ${id}` });\n//     }\n\n//     let params = {\n//       id,\n//       userId,\n//       tittle: tittle || null,\n//       textDescrip: textDescrip || null,\n//       picture: postExist.recordset[0].picture, // Mantener la imagen existente si no se envía una nueva\n//     };\n//     // picture = req.files ? req.files.picture : '';\n\n//     if (req.files && req.files.picture) {\n//       const uploadedPicture = req.files.picture;\n//       const fileName = uploadedPicture.name;\n//       const uploadPath = path.join(__dirname, \"../photos\", fileName);\n\n//       const fileSizeInBytes = uploadedPicture.data.length;\n//       const maxSizeInBytes = 5242880;\n\n//       if (fileSizeInBytes > maxSizeInBytes) {\n//         return res.status(400).json({ message: \"El tamaño del archivo excede el límite permitido\" });\n//       }\n\n//       await uploadedPicture.mv(uploadPath);\n\n//       const fileData = fs.readFileSync(uploadPath);\n\n//       params.picture = fileData;\n//       pictureName = fileName;\n\n//       // Eliminar la imagen antigua si existe una nueva\n//       // const currentPicture = postExist.recordset[0].picture;\n//       // if (currentPicture && currentPicture !== picture.name) {\n//       //   const filePath = path.join(__dirname, \"../photos\", currentPicture);\n//       //   if (fs.existsSync(filePath)) {\n//       //     fs.unlinkSync(filePath);\n//       //   }\n//       // }\n//     }\n\n//     await executeQuery(queries.updatePost, params);\n\n//     res.status(201).json({ message: \"Post actualizado exitosamente\" });\n//   } catch (err) {\n//     console.error(err.message);\n//     res.status(500).send(\"Error en el servidor al intentar actualizar el post\");\n//     // if (picture) {\n//     //   const filePath = path.join(__dirname, \"../photos\", picture.name);\n//     //   if (fs.existsSync(filePath)) {\n//     //     fs.unlinkSync(filePath);\n//     //   }\n//     // }\n//   }\n// };\nexports.createPost = createPost;\nconst updatePost = async (req, res) => {\n  console.log(req.body);\n  console.log(req.files);\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    id,\n    tittle,\n    textDescrip\n  } = req.body;\n  let pictureName;\n  try {\n    const token = req.headers.authorization.split(\" \")[1];\n    const decoded = _jsonwebtoken.default.verify(token, process.env.TOKEN);\n    const userId = decoded.userId;\n\n    // Obtener el post existente\n    const postExist = await (0, _index.executeQuery)(_index.queries.getPost, {\n      id\n    });\n    if (postExist.recordset.length === 0) {\n      return res.status(400).json({\n        message: `No existe el post con id: ${id}`\n      });\n    }\n    let params = {\n      id,\n      userId,\n      tittle: tittle || postExist.recordset[0].tittle,\n      textDescrip: textDescrip || postExist.recordset[0].textDescrip,\n      picture: postExist.recordset[0].picture // Mantener el nombre de la imagen existente si no se envía una nueva\n    };\n\n    // Verificar si se envió una nueva imagen\n    if (req.files && req.files.picture) {\n      const uploadedPicture = req.files.picture;\n      const fileName = uploadedPicture.name;\n      const uploadPath = _path.default.join(__dirname, \"../photos\", fileName);\n\n      // Guardar el archivo en el servidor\n      await uploadedPicture.mv(uploadPath);\n\n      // Actualizar el nombre de la imagen en los parámetros\n      params.picture = fileName;\n      pictureName = fileName;\n\n      // Eliminar la imagen antigua si existe una nueva\n      const currentPicture = postExist.recordset[0].picture;\n      if (currentPicture && currentPicture !== pictureName) {\n        const filePath = _path.default.join(__dirname, \"../photos\", currentPicture);\n        if (_fs.default.existsSync(filePath)) {\n          _fs.default.unlinkSync(filePath);\n        }\n      }\n    }\n\n    // Actualizar el post en la base de datos\n    await (0, _index.executeQuery)(_index.queries.updatePost, params);\n    res.status(201).json({\n      message: \"Post actualizado exitosamente\"\n    });\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Error en el servidor al intentar actualizar el post\");\n    if (pictureName) {\n      const filePath = _path.default.join(__dirname, \"../photos\", pictureName);\n      if (_fs.default.existsSync(filePath)) {\n        _fs.default.unlinkSync(filePath);\n      }\n    }\n  }\n};\nexports.updatePost = updatePost;\nconst deltePost = async (req, res) => {\n  console.log(req.body);\n  const errors = (0, _expressValidator.validationResult)(req);\n  if (!errors.isEmpty()) {\n    return res.status(400).json({\n      errors: errors.array()\n    });\n  }\n  const {\n    id\n  } = req.body;\n  try {\n    const token = req.headers.authorization.split(\" \")[1];\n    const decoded = _jsonwebtoken.default.verify(token, process.env.TOKEN);\n    const userId = decoded.userId;\n    const params = {\n      id,\n      userId\n    };\n    const postExist = await (0, _index.executeQuery)(_index.queries.getPost, {\n      id\n    });\n    if (postExist.recordset.length === 0) {\n      return res.status(400).json({\n        message: `No existe el post con id: ${id}`\n      });\n    }\n    await (0, _index.executeQuery)(_index.queries.deletePost, params);\n    res.status(201).json({\n      message: \"Post eliminado exitosamente\"\n    });\n  } catch (err) {}\n};\nexports.deltePost = deltePost;\nconst getPosts = async (req, res) => {\n  try {\n    const result = await (0, _index.executeQuery)(_index.queries.getPosts);\n    res.status(200).json(result.recordset);\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Error en el servidor al intentar crear el post\");\n  }\n};\nexports.getPosts = getPosts;\nconst getUserPosts = async (req, res) => {\n  try {\n    const token = req.headers.authorization.split(\" \")[1];\n    const decoded = _jsonwebtoken.default.verify(token, process.env.TOKEN);\n    const userId = decoded.userId;\n    console.log(userId);\n    const result = await (0, _index.executeQuery)(_index.queries.getUserPosts, {\n      idUser: userId\n    });\n    res.status(200).json(result.recordset);\n  } catch (err) {\n    console.error(err.message);\n    res.status(500).send(\"Error en el servidor al intentar buscar los posts\");\n  }\n};\nexports.getUserPosts = getUserPosts;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzc1ZhbGlkYXRvciIsInJlcXVpcmUiLCJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9pbmRleCIsIl9wYXRoIiwiX2ZzIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY3JlYXRlUG9zdCIsInJlcSIsInJlcyIsImVycm9ycyIsInZhbGlkYXRpb25SZXN1bHQiLCJpc0VtcHR5Iiwic3RhdHVzIiwianNvbiIsImFycmF5IiwidGl0dGxlIiwidGV4dERlc2NyaXAiLCJib2R5IiwicGljdHVyZSIsInRva2VuIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzcGxpdCIsImRlY29kZWQiLCJqd3QiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiVE9LRU4iLCJ1c2VySWQiLCJwYXJhbXMiLCJmaWxlcyIsImZpbGVOYW1lIiwibmFtZSIsInVwbG9hZFBhdGgiLCJwYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsIm12IiwiY29uc29sZSIsImxvZyIsInJlc3VsdCIsImV4ZWN1dGVRdWVyeSIsInF1ZXJpZXMiLCJpbnNlcnRQb3N0IiwicG9zdElkIiwicmVjb3Jkc2V0IiwiaWQiLCJyZWxhdGlvblBhcmFtcyIsImlkVXNlciIsImlkUG9zdCIsImluc2VydFVzZXJQb3N0IiwibWVzc2FnZSIsImVycm9yIiwiZXJyIiwic2VuZCIsImZpbGVQYXRoIiwiZnMiLCJ1bmxpbmtTeW5jIiwiZXhwb3J0cyIsInVwZGF0ZVBvc3QiLCJwaWN0dXJlTmFtZSIsInBvc3RFeGlzdCIsImdldFBvc3QiLCJsZW5ndGgiLCJ1cGxvYWRlZFBpY3R1cmUiLCJjdXJyZW50UGljdHVyZSIsImV4aXN0c1N5bmMiLCJkZWx0ZVBvc3QiLCJkZWxldGVQb3N0IiwiZ2V0UG9zdHMiLCJnZXRVc2VyUG9zdHMiXSwic291cmNlUm9vdCI6IkQ6XFxVVE1cXDlub1xcV2ViX0ludGVncmFsXFxibG9nX2JhY2tcXEJsb2dfQmFja1xcc3JjXFxjb250cm9sbGVyc1xcIiwic291cmNlcyI6WyJwb3N0c0NvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmFsaWRhdGlvblJlc3VsdCB9IGZyb20gXCJleHByZXNzLXZhbGlkYXRvclwiO1xyXG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuaW1wb3J0IHsgZXhlY3V0ZVF1ZXJ5LCBxdWVyaWVzIH0gZnJvbSBcIi4uLy4uL2RhdGFiYXNlL2luZGV4XCI7XHJcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XHJcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcclxuXHJcbi8vIGV4cG9ydCBjb25zdCBjcmVhdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbi8vICAgY29uc29sZS5sb2cocmVxLmJvZHkpO1xyXG4vLyAgIGNvbnNvbGUubG9nKHJlcS5maWxlcyk7XHJcblxyXG4vLyAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcclxuLy8gICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcclxuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XHJcbi8vICAgfVxyXG5cclxuLy8gICBjb25zdCB7IHRpdHRsZSwgdGV4dERlc2NyaXAgfSA9IHJlcS5ib2R5O1xyXG4vLyAgIGNvbnN0IHBpY3R1cmUgPSByZXEuZmlsZXMgJiYgcmVxLmZpbGVzLnBpY3R1cmUgPyByZXEuZmlsZXMucGljdHVyZSA6IG51bGw7XHJcblxyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3BsaXQoXCIgXCIpWzFdO1xyXG4vLyAgICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LlRPS0VOKTtcclxuLy8gICAgIGNvbnN0IHVzZXJJZCA9IGRlY29kZWQudXNlcklkO1xyXG5cclxuLy8gICAgIGxldCBwYXJhbXMgPSB7XHJcbi8vICAgICAgIHRpdHRsZSxcclxuLy8gICAgICAgdGV4dERlc2NyaXAsXHJcbi8vICAgICAgIHBpY3R1cmU6IHBpY3R1cmUgPyBwaWN0dXJlLm5hbWUgOiBudWxsLFxyXG4vLyAgICAgfTtcclxuXHJcbi8vICAgICBpZiAocGljdHVyZSkge1xyXG4vLyAgICAgICBjb25zdCBmaWxlTmFtZSA9IHBpY3R1cmUubmFtZTtcclxuLy8gICAgICAgY29uc3QgdXBsb2FkUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vcGhvdG9zXCIsIGZpbGVOYW1lKTtcclxuXHJcbi8vICAgICAgIGF3YWl0IHBpY3R1cmUubXYodXBsb2FkUGF0aCk7XHJcblxyXG4vLyAgICAgICBjb25zdCBmaWxlRGF0YSA9IGZzLnJlYWRGaWxlU3luYyh1cGxvYWRQYXRoKTtcclxuXHJcbi8vICAgICAgIHBhcmFtcy5waWN0dXJlID0gZmlsZURhdGE7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHF1ZXJpZXMuaW5zZXJ0UG9zdCwgcGFyYW1zKTtcclxuXHJcbi8vICAgICBjb25zdCBwb3N0SWQgPSByZXN1bHQucmVjb3Jkc2V0WzBdLmlkO1xyXG5cclxuLy8gICAgIGNvbnN0IHJlbGF0aW9uUGFyYW1zID0ge1xyXG4vLyAgICAgICBpZFVzZXI6IHVzZXJJZCxcclxuLy8gICAgICAgaWRQb3N0OiBwb3N0SWQsXHJcbi8vICAgICB9O1xyXG5cclxuLy8gICAgIGF3YWl0IGV4ZWN1dGVRdWVyeShxdWVyaWVzLmluc2VydFVzZXJQb3N0LCByZWxhdGlvblBhcmFtcyk7XHJcblxyXG4vLyAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIlBvc3QgY3JlYWRvIGV4aXRvc2FtZW50ZVwiLCBwb3N0SWQgfSk7XHJcbi8vICAgfSBjYXRjaCAoZXJyKSB7XHJcbi8vICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcclxuLy8gICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiRXJyb3IgZW4gZWwgc2Vydmlkb3IgYWwgaW50ZW50YXIgY3JlYXIgZWwgcG9zdFwiKTtcclxuXHJcbi8vICAgICBpZiAocGljdHVyZSkge1xyXG4vLyAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vcGhvdG9zXCIsIHBpY3R1cmUubmFtZSk7XHJcbi8vICAgICAgIGZzLnVubGlua1N5bmMoZmlsZVBhdGgpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH1cclxuLy8gfTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgLy8gY29uc29sZS5sb2cocmVxLmJvZHkpO1xyXG4gIC8vIGNvbnNvbGUubG9nKHJlcS5maWxlcyk7XHJcblxyXG4gIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcclxuICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB7IHRpdHRsZSwgdGV4dERlc2NyaXAgfSA9IHJlcS5ib2R5O1xyXG5cclxuICBsZXQgcGljdHVyZTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uLnNwbGl0KFwiIFwiKVsxXTtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5UT0tFTik7XHJcbiAgICBjb25zdCB1c2VySWQgPSBkZWNvZGVkLnVzZXJJZDtcclxuXHJcbiAgICBsZXQgcGFyYW1zID0ge1xyXG4gICAgICB0aXR0bGUsXHJcbiAgICAgIHRleHREZXNjcmlwLFxyXG4gICAgICBwaWN0dXJlOiBudWxsLCAvLyBBcXXDrSBjYW1iaWFtb3MgZWwgYnVmZmVyIHBvciBlbCBub21icmUgZGVsIGFyY2hpdm9cclxuICAgIH07XHJcblxyXG4gICAgcGljdHVyZSA9IHJlcS5maWxlcyA/IHJlcS5maWxlcy5waWN0dXJlIDogJyc7XHJcblxyXG4gICAgaWYgKHBpY3R1cmUpIHtcclxuICAgICAgY29uc3QgZmlsZU5hbWUgPSBwaWN0dXJlLm5hbWU7XHJcbiAgICAgIGNvbnN0IHVwbG9hZFBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4uL3Bob3Rvcy9cIiwgZmlsZU5hbWUpO1xyXG5cclxuICAgICAgcGFyYW1zLnBpY3R1cmUgPSBmaWxlTmFtZTsgLy8gQWN0dWFsaXphIHBhcmFtcy5waWN0dXJlIGNvbiBlbCBub21icmUgZGVsIGFyY2hpdm9cclxuICAgICAgYXdhaXQgcGljdHVyZS5tdih1cGxvYWRQYXRoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHBhcmFtcy5waWN0dXJlKSB7IC8vIEFzZWfDunJhdGUgZGUgcXVlICdwaWN0dXJlJyBubyBlcyBudWxsIG8gdW5kZWZpbmVkIGFudGVzIGRlIGxsYW1hciBhICdleGVjdXRlUXVlcnknXHJcbiAgICAgIGNvbnNvbGUubG9nKHBhcmFtcyk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVRdWVyeShxdWVyaWVzLmluc2VydFBvc3QsIHBhcmFtcyk7XHJcblxyXG4gICAgICBjb25zdCBwb3N0SWQgPSByZXN1bHQucmVjb3Jkc2V0WzBdLmlkO1xyXG5cclxuICAgICAgY29uc3QgcmVsYXRpb25QYXJhbXMgPSB7XHJcbiAgICAgICAgaWRVc2VyOiB1c2VySWQsXHJcbiAgICAgICAgaWRQb3N0OiBwb3N0SWQsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhd2FpdCBleGVjdXRlUXVlcnkocXVlcmllcy5pbnNlcnRVc2VyUG9zdCwgcmVsYXRpb25QYXJhbXMpO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIlBvc3QgY3JlYWRvIGV4aXRvc2FtZW50ZVwiLCBwb3N0SWQgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6ICdwaWN0dXJlJyBlcyBudWxsIG8gdW5kZWZpbmVkXCIpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIkVycm9yIGVuIGVsIHNlcnZpZG9yIGFsIGludGVudGFyIGNyZWFyIGVsIHBvc3RcIik7XHJcblxyXG4gICAgaWYgKHBpY3R1cmUpIHtcclxuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4uL3Bob3Rvc1wiLCBwaWN0dXJlLm5hbWUpO1xyXG4gICAgICBmcy51bmxpbmtTeW5jKGZpbGVQYXRoKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5cclxuXHJcbi8vIGV4cG9ydCBjb25zdCB1cGRhdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbi8vICAgY29uc29sZS5sb2cocmVxLmJvZHkpO1xyXG4vLyAgIGNvbnNvbGUubG9nKHJlcS5maWxlcyk7XHJcblxyXG4vLyAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcclxuLy8gICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcclxuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yczogZXJyb3JzLmFycmF5KCkgfSk7XHJcbi8vICAgfVxyXG5cclxuLy8gICBjb25zdCB7IGlkLCB0aXR0bGUsIHRleHREZXNjcmlwIH0gPSByZXEuYm9keTtcclxuLy8gICBsZXQgcGljdHVyZU5hbWU7XHJcblxyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3BsaXQoXCIgXCIpWzFdO1xyXG4vLyAgICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LlRPS0VOKTtcclxuLy8gICAgIGNvbnN0IHVzZXJJZCA9IGRlY29kZWQudXNlcklkO1xyXG5cclxuLy8gICAgIC8vIE9idGVuZXIgZWwgcG9zdCBleGlzdGVudGVcclxuLy8gICAgIGNvbnN0IHBvc3RFeGlzdCA9IGF3YWl0IGV4ZWN1dGVRdWVyeShxdWVyaWVzLmdldFBvc3QsIHsgaWQgfSk7XHJcbi8vICAgICBpZiAocG9zdEV4aXN0LnJlY29yZHNldC5sZW5ndGggPT09IDApIHtcclxuLy8gICAgICAgcmV0dXJuIHJlc1xyXG4vLyAgICAgICAgIC5zdGF0dXMoNDAwKVxyXG4vLyAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogYE5vIGV4aXN0ZSBlbCBwb3N0IGNvbiBpZDogJHtpZH1gIH0pO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGxldCBwYXJhbXMgPSB7XHJcbi8vICAgICAgIGlkLFxyXG4vLyAgICAgICB1c2VySWQsXHJcbi8vICAgICAgIHRpdHRsZTogdGl0dGxlIHx8IG51bGwsXHJcbi8vICAgICAgIHRleHREZXNjcmlwOiB0ZXh0RGVzY3JpcCB8fCBudWxsLFxyXG4vLyAgICAgICBwaWN0dXJlOiBwb3N0RXhpc3QucmVjb3Jkc2V0WzBdLnBpY3R1cmUsIC8vIE1hbnRlbmVyIGxhIGltYWdlbiBleGlzdGVudGUgc2kgbm8gc2UgZW52w61hIHVuYSBudWV2YVxyXG4vLyAgICAgfTtcclxuLy8gICAgIC8vIHBpY3R1cmUgPSByZXEuZmlsZXMgPyByZXEuZmlsZXMucGljdHVyZSA6ICcnO1xyXG5cclxuLy8gICAgIGlmIChyZXEuZmlsZXMgJiYgcmVxLmZpbGVzLnBpY3R1cmUpIHtcclxuLy8gICAgICAgY29uc3QgdXBsb2FkZWRQaWN0dXJlID0gcmVxLmZpbGVzLnBpY3R1cmU7XHJcbi8vICAgICAgIGNvbnN0IGZpbGVOYW1lID0gdXBsb2FkZWRQaWN0dXJlLm5hbWU7XHJcbi8vICAgICAgIGNvbnN0IHVwbG9hZFBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4uL3Bob3Rvc1wiLCBmaWxlTmFtZSk7XHJcblxyXG4vLyAgICAgICBjb25zdCBmaWxlU2l6ZUluQnl0ZXMgPSB1cGxvYWRlZFBpY3R1cmUuZGF0YS5sZW5ndGg7XHJcbi8vICAgICAgIGNvbnN0IG1heFNpemVJbkJ5dGVzID0gNTI0Mjg4MDtcclxuXHJcbi8vICAgICAgIGlmIChmaWxlU2l6ZUluQnl0ZXMgPiBtYXhTaXplSW5CeXRlcykge1xyXG4vLyAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiRWwgdGFtYcOxbyBkZWwgYXJjaGl2byBleGNlZGUgZWwgbMOtbWl0ZSBwZXJtaXRpZG9cIiB9KTtcclxuLy8gICAgICAgfVxyXG5cclxuLy8gICAgICAgYXdhaXQgdXBsb2FkZWRQaWN0dXJlLm12KHVwbG9hZFBhdGgpO1xyXG5cclxuLy8gICAgICAgY29uc3QgZmlsZURhdGEgPSBmcy5yZWFkRmlsZVN5bmModXBsb2FkUGF0aCk7XHJcblxyXG4vLyAgICAgICBwYXJhbXMucGljdHVyZSA9IGZpbGVEYXRhO1xyXG4vLyAgICAgICBwaWN0dXJlTmFtZSA9IGZpbGVOYW1lO1xyXG5cclxuLy8gICAgICAgLy8gRWxpbWluYXIgbGEgaW1hZ2VuIGFudGlndWEgc2kgZXhpc3RlIHVuYSBudWV2YVxyXG4vLyAgICAgICAvLyBjb25zdCBjdXJyZW50UGljdHVyZSA9IHBvc3RFeGlzdC5yZWNvcmRzZXRbMF0ucGljdHVyZTtcclxuLy8gICAgICAgLy8gaWYgKGN1cnJlbnRQaWN0dXJlICYmIGN1cnJlbnRQaWN0dXJlICE9PSBwaWN0dXJlLm5hbWUpIHtcclxuLy8gICAgICAgLy8gICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi4vcGhvdG9zXCIsIGN1cnJlbnRQaWN0dXJlKTtcclxuLy8gICAgICAgLy8gICBpZiAoZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcclxuLy8gICAgICAgLy8gICAgIGZzLnVubGlua1N5bmMoZmlsZVBhdGgpO1xyXG4vLyAgICAgICAvLyAgIH1cclxuLy8gICAgICAgLy8gfVxyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGF3YWl0IGV4ZWN1dGVRdWVyeShxdWVyaWVzLnVwZGF0ZVBvc3QsIHBhcmFtcyk7XHJcblxyXG4vLyAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIlBvc3QgYWN0dWFsaXphZG8gZXhpdG9zYW1lbnRlXCIgfSk7XHJcbi8vICAgfSBjYXRjaCAoZXJyKSB7XHJcbi8vICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcclxuLy8gICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiRXJyb3IgZW4gZWwgc2Vydmlkb3IgYWwgaW50ZW50YXIgYWN0dWFsaXphciBlbCBwb3N0XCIpO1xyXG4vLyAgICAgLy8gaWYgKHBpY3R1cmUpIHtcclxuLy8gICAgIC8vICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4uL3Bob3Rvc1wiLCBwaWN0dXJlLm5hbWUpO1xyXG4vLyAgICAgLy8gICBpZiAoZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcclxuLy8gICAgIC8vICAgICBmcy51bmxpbmtTeW5jKGZpbGVQYXRoKTtcclxuLy8gICAgIC8vICAgfVxyXG4vLyAgICAgLy8gfVxyXG4vLyAgIH1cclxuLy8gfTtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgdXBkYXRlUG9zdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnNvbGUubG9nKHJlcS5ib2R5KTtcclxuICBjb25zb2xlLmxvZyhyZXEuZmlsZXMpO1xyXG5cclxuICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XHJcbiAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgeyBpZCwgdGl0dGxlLCB0ZXh0RGVzY3JpcCB9ID0gcmVxLmJvZHk7XHJcbiAgbGV0IHBpY3R1cmVOYW1lO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uLnNwbGl0KFwiIFwiKVsxXTtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5UT0tFTik7XHJcbiAgICBjb25zdCB1c2VySWQgPSBkZWNvZGVkLnVzZXJJZDtcclxuXHJcbiAgICAvLyBPYnRlbmVyIGVsIHBvc3QgZXhpc3RlbnRlXHJcbiAgICBjb25zdCBwb3N0RXhpc3QgPSBhd2FpdCBleGVjdXRlUXVlcnkocXVlcmllcy5nZXRQb3N0LCB7IGlkIH0pO1xyXG4gICAgaWYgKHBvc3RFeGlzdC5yZWNvcmRzZXQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IGBObyBleGlzdGUgZWwgcG9zdCBjb24gaWQ6ICR7aWR9YCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcGFyYW1zID0ge1xyXG4gICAgICBpZCxcclxuICAgICAgdXNlcklkLFxyXG4gICAgICB0aXR0bGU6IHRpdHRsZSB8fCBwb3N0RXhpc3QucmVjb3Jkc2V0WzBdLnRpdHRsZSxcclxuICAgICAgdGV4dERlc2NyaXA6IHRleHREZXNjcmlwIHx8IHBvc3RFeGlzdC5yZWNvcmRzZXRbMF0udGV4dERlc2NyaXAsXHJcbiAgICAgIHBpY3R1cmU6IHBvc3RFeGlzdC5yZWNvcmRzZXRbMF0ucGljdHVyZSwgLy8gTWFudGVuZXIgZWwgbm9tYnJlIGRlIGxhIGltYWdlbiBleGlzdGVudGUgc2kgbm8gc2UgZW52w61hIHVuYSBudWV2YVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBWZXJpZmljYXIgc2kgc2UgZW52acOzIHVuYSBudWV2YSBpbWFnZW5cclxuICAgIGlmIChyZXEuZmlsZXMgJiYgcmVxLmZpbGVzLnBpY3R1cmUpIHtcclxuICAgICAgY29uc3QgdXBsb2FkZWRQaWN0dXJlID0gcmVxLmZpbGVzLnBpY3R1cmU7XHJcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gdXBsb2FkZWRQaWN0dXJlLm5hbWU7XHJcbiAgICAgIGNvbnN0IHVwbG9hZFBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4uL3Bob3Rvc1wiLCBmaWxlTmFtZSk7XHJcblxyXG4gICAgICAvLyBHdWFyZGFyIGVsIGFyY2hpdm8gZW4gZWwgc2Vydmlkb3JcclxuICAgICAgYXdhaXQgdXBsb2FkZWRQaWN0dXJlLm12KHVwbG9hZFBhdGgpO1xyXG5cclxuICAgICAgLy8gQWN0dWFsaXphciBlbCBub21icmUgZGUgbGEgaW1hZ2VuIGVuIGxvcyBwYXLDoW1ldHJvc1xyXG4gICAgICBwYXJhbXMucGljdHVyZSA9IGZpbGVOYW1lO1xyXG4gICAgICBwaWN0dXJlTmFtZSA9IGZpbGVOYW1lO1xyXG5cclxuICAgICAgLy8gRWxpbWluYXIgbGEgaW1hZ2VuIGFudGlndWEgc2kgZXhpc3RlIHVuYSBudWV2YVxyXG4gICAgICBjb25zdCBjdXJyZW50UGljdHVyZSA9IHBvc3RFeGlzdC5yZWNvcmRzZXRbMF0ucGljdHVyZTtcclxuICAgICAgaWYgKGN1cnJlbnRQaWN0dXJlICYmIGN1cnJlbnRQaWN0dXJlICE9PSBwaWN0dXJlTmFtZSkge1xyXG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgXCIuLi9waG90b3NcIiwgY3VycmVudFBpY3R1cmUpO1xyXG4gICAgICAgIGlmIChmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkge1xyXG4gICAgICAgICAgZnMudW5saW5rU3luYyhmaWxlUGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWN0dWFsaXphciBlbCBwb3N0IGVuIGxhIGJhc2UgZGUgZGF0b3NcclxuICAgIGF3YWl0IGV4ZWN1dGVRdWVyeShxdWVyaWVzLnVwZGF0ZVBvc3QsIHBhcmFtcyk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIlBvc3QgYWN0dWFsaXphZG8gZXhpdG9zYW1lbnRlXCIgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiRXJyb3IgZW4gZWwgc2Vydmlkb3IgYWwgaW50ZW50YXIgYWN0dWFsaXphciBlbCBwb3N0XCIpO1xyXG4gICAgaWYgKHBpY3R1cmVOYW1lKSB7XHJcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgXCIuLi9waG90b3NcIiwgcGljdHVyZU5hbWUpO1xyXG4gICAgICBpZiAoZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcclxuICAgICAgICBmcy51bmxpbmtTeW5jKGZpbGVQYXRoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgZGVsdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc29sZS5sb2cocmVxLmJvZHkpO1xyXG5cclxuICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XHJcbiAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcnM6IGVycm9ycy5hcnJheSgpIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgeyBpZCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3BsaXQoXCIgXCIpWzFdO1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LlRPS0VOKTtcclxuICAgIGNvbnN0IHVzZXJJZCA9IGRlY29kZWQudXNlcklkO1xyXG5cclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgaWQsXHJcbiAgICAgIHVzZXJJZCxcclxuICAgIH07XHJcbiAgICBjb25zdCBwb3N0RXhpc3QgPSBhd2FpdCBleGVjdXRlUXVlcnkocXVlcmllcy5nZXRQb3N0LCB7IGlkIH0pO1xyXG4gICAgaWYgKHBvc3RFeGlzdC5yZWNvcmRzZXQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXNcclxuICAgICAgICAuc3RhdHVzKDQwMClcclxuICAgICAgICAuanNvbih7IG1lc3NhZ2U6IGBObyBleGlzdGUgZWwgcG9zdCBjb24gaWQ6ICR7aWR9YCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBleGVjdXRlUXVlcnkocXVlcmllcy5kZWxldGVQb3N0LCBwYXJhbXMpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogXCJQb3N0IGVsaW1pbmFkbyBleGl0b3NhbWVudGVcIiB9KTtcclxuICB9IGNhdGNoIChlcnIpIHt9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0UG9zdHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHF1ZXJpZXMuZ2V0UG9zdHMpO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0LnJlY29yZHNldCk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiRXJyb3IgZW4gZWwgc2Vydmlkb3IgYWwgaW50ZW50YXIgY3JlYXIgZWwgcG9zdFwiKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0VXNlclBvc3RzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbi5zcGxpdChcIiBcIilbMV07XHJcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuVE9LRU4pO1xyXG4gICAgY29uc3QgdXNlcklkID0gZGVjb2RlZC51c2VySWQ7XHJcbiAgICBjb25zb2xlLmxvZyh1c2VySWQpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHF1ZXJpZXMuZ2V0VXNlclBvc3RzLCB7IGlkVXNlcjogdXNlcklkIH0pO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0LnJlY29yZHNldCk7XHJcblxyXG5cclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJFcnJvciBlbiBlbCBzZXJ2aWRvciBhbCBpbnRlbnRhciBidXNjYXIgbG9zIHBvc3RzXCIpO1xyXG4gIH1cclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsaUJBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLE1BQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLEtBQUEsR0FBQUYsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFLLEdBQUEsR0FBQUgsc0JBQUEsQ0FBQUYsT0FBQTtBQUFvQixTQUFBRSx1QkFBQUksQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUVwQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNB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","map":{"version":3,"names":["_expressValidator","require","_jsonwebtoken","_interopRequireDefault","_index","_path","_fs","e","__esModule","default","createPost","req","res","errors","validationResult","isEmpty","status","json","array","tittle","textDescrip","body","picture","token","headers","authorization","split","decoded","jwt","verify","process","env","TOKEN","userId","params","files","fileName","name","uploadPath","path","join","__dirname","mv","console","log","result","executeQuery","queries","insertPost","postId","recordset","id","relationParams","idUser","idPost","insertUserPost","message","error","err","send","filePath","fs","unlinkSync","exports","updatePost","pictureName","postExist","getPost","length","uploadedPicture","currentPicture","existsSync","deltePost","deletePost","getPosts","getUserPosts"],"sourceRoot":"D:\\UTM\\9no\\Web_Integral\\blog_back\\Blog_Back\\src\\controllers\\","sources":["postsController.js"],"sourcesContent":["import { validationResult } from \"express-validator\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport { executeQuery, queries } from \"../../database/index\";\r\nimport path from \"path\";\r\nimport fs from \"fs\";\r\n\r\n// export const createPost = async (req, res) => {\r\n//   console.log(req.body);\r\n//   console.log(req.files);\r\n\r\n//   const errors = validationResult(req);\r\n//   if (!errors.isEmpty()) {\r\n//     return res.status(400).json({ errors: errors.array() });\r\n//   }\r\n\r\n//   const { tittle, textDescrip } = req.body;\r\n//   const picture = req.files && req.files.picture ? req.files.picture : null;\r\n\r\n//   try {\r\n//     const token = req.headers.authorization.split(\" \")[1];\r\n//     const decoded = jwt.verify(token, process.env.TOKEN);\r\n//     const userId = decoded.userId;\r\n\r\n//     let params = {\r\n//       tittle,\r\n//       textDescrip,\r\n//       picture: picture ? picture.name : null,\r\n//     };\r\n\r\n//     if (picture) {\r\n//       const fileName = picture.name;\r\n//       const uploadPath = path.join(__dirname, \"../../photos\", fileName);\r\n\r\n//       await picture.mv(uploadPath);\r\n\r\n//       const fileData = fs.readFileSync(uploadPath);\r\n\r\n//       params.picture = fileData;\r\n//     }\r\n\r\n//     const result = await executeQuery(queries.insertPost, params);\r\n\r\n//     const postId = result.recordset[0].id;\r\n\r\n//     const relationParams = {\r\n//       idUser: userId,\r\n//       idPost: postId,\r\n//     };\r\n\r\n//     await executeQuery(queries.insertUserPost, relationParams);\r\n\r\n//     res.status(201).json({ message: \"Post creado exitosamente\", postId });\r\n//   } catch (err) {\r\n//     console.error(err.message);\r\n//     res.status(500).send(\"Error en el servidor al intentar crear el post\");\r\n\r\n//     if (picture) {\r\n//       const filePath = path.join(__dirname, \"../../photos\", picture.name);\r\n//       fs.unlinkSync(filePath);\r\n//     }\r\n//   }\r\n// };\r\n\r\nexport const createPost = async (req, res) => {\r\n  // console.log(req.body);\r\n  // console.log(req.files);\r\n\r\n  const errors = validationResult(req);\r\n  if (!errors.isEmpty()) {\r\n    return res.status(400).json({ errors: errors.array() });\r\n  }\r\n\r\n  const { tittle, textDescrip } = req.body;\r\n\r\n  let picture;\r\n  try {\r\n    const token = req.headers.authorization.split(\" \")[1];\r\n    const decoded = jwt.verify(token, process.env.TOKEN);\r\n    const userId = decoded.userId;\r\n\r\n    let params = {\r\n      tittle,\r\n      textDescrip,\r\n      picture: null, // Aquí cambiamos el buffer por el nombre del archivo\r\n    };\r\n\r\n    picture = req.files ? req.files.picture : '';\r\n\r\n    if (picture) {\r\n      const fileName = picture.name;\r\n      const uploadPath = path.join(__dirname, \"../photos/\", fileName);\r\n\r\n      params.picture = fileName; // Actualiza params.picture con el nombre del archivo\r\n      await picture.mv(uploadPath);\r\n\r\n    }\r\n\r\n    if (params.picture) { // Asegúrate de que 'picture' no es null o undefined antes de llamar a 'executeQuery'\r\n      console.log(params);\r\n      const result = await executeQuery(queries.insertPost, params);\r\n\r\n      const postId = result.recordset[0].id;\r\n\r\n      const relationParams = {\r\n        idUser: userId,\r\n        idPost: postId,\r\n      };\r\n\r\n      await executeQuery(queries.insertUserPost, relationParams);\r\n\r\n      res.status(201).json({ message: \"Post creado exitosamente\", postId });\r\n    } else {\r\n      console.error(\"Error: 'picture' es null o undefined\");\r\n    }\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    res.status(500).send(\"Error en el servidor al intentar crear el post\");\r\n\r\n    if (picture) {\r\n      const filePath = path.join(__dirname, \"../photos\", picture.name);\r\n      fs.unlinkSync(filePath);\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\n// export const updatePost = async (req, res) => {\r\n//   console.log(req.body);\r\n//   console.log(req.files);\r\n\r\n//   const errors = validationResult(req);\r\n//   if (!errors.isEmpty()) {\r\n//     return res.status(400).json({ errors: errors.array() });\r\n//   }\r\n\r\n//   const { id, tittle, textDescrip } = req.body;\r\n//   let pictureName;\r\n\r\n//   try {\r\n//     const token = req.headers.authorization.split(\" \")[1];\r\n//     const decoded = jwt.verify(token, process.env.TOKEN);\r\n//     const userId = decoded.userId;\r\n\r\n//     // Obtener el post existente\r\n//     const postExist = await executeQuery(queries.getPost, { id });\r\n//     if (postExist.recordset.length === 0) {\r\n//       return res\r\n//         .status(400)\r\n//         .json({ message: `No existe el post con id: ${id}` });\r\n//     }\r\n\r\n//     let params = {\r\n//       id,\r\n//       userId,\r\n//       tittle: tittle || null,\r\n//       textDescrip: textDescrip || null,\r\n//       picture: postExist.recordset[0].picture, // Mantener la imagen existente si no se envía una nueva\r\n//     };\r\n//     // picture = req.files ? req.files.picture : '';\r\n\r\n//     if (req.files && req.files.picture) {\r\n//       const uploadedPicture = req.files.picture;\r\n//       const fileName = uploadedPicture.name;\r\n//       const uploadPath = path.join(__dirname, \"../photos\", fileName);\r\n\r\n//       const fileSizeInBytes = uploadedPicture.data.length;\r\n//       const maxSizeInBytes = 5242880;\r\n\r\n//       if (fileSizeInBytes > maxSizeInBytes) {\r\n//         return res.status(400).json({ message: \"El tamaño del archivo excede el límite permitido\" });\r\n//       }\r\n\r\n//       await uploadedPicture.mv(uploadPath);\r\n\r\n//       const fileData = fs.readFileSync(uploadPath);\r\n\r\n//       params.picture = fileData;\r\n//       pictureName = fileName;\r\n\r\n//       // Eliminar la imagen antigua si existe una nueva\r\n//       // const currentPicture = postExist.recordset[0].picture;\r\n//       // if (currentPicture && currentPicture !== picture.name) {\r\n//       //   const filePath = path.join(__dirname, \"../photos\", currentPicture);\r\n//       //   if (fs.existsSync(filePath)) {\r\n//       //     fs.unlinkSync(filePath);\r\n//       //   }\r\n//       // }\r\n//     }\r\n\r\n//     await executeQuery(queries.updatePost, params);\r\n\r\n//     res.status(201).json({ message: \"Post actualizado exitosamente\" });\r\n//   } catch (err) {\r\n//     console.error(err.message);\r\n//     res.status(500).send(\"Error en el servidor al intentar actualizar el post\");\r\n//     // if (picture) {\r\n//     //   const filePath = path.join(__dirname, \"../photos\", picture.name);\r\n//     //   if (fs.existsSync(filePath)) {\r\n//     //     fs.unlinkSync(filePath);\r\n//     //   }\r\n//     // }\r\n//   }\r\n// };\r\n\r\n\r\nexport const updatePost = async (req, res) => {\r\n  console.log(req.body);\r\n  console.log(req.files);\r\n\r\n  const errors = validationResult(req);\r\n  if (!errors.isEmpty()) {\r\n    return res.status(400).json({ errors: errors.array() });\r\n  }\r\n\r\n  const { id, tittle, textDescrip } = req.body;\r\n  let pictureName;\r\n\r\n  try {\r\n    const token = req.headers.authorization.split(\" \")[1];\r\n    const decoded = jwt.verify(token, process.env.TOKEN);\r\n    const userId = decoded.userId;\r\n\r\n    // Obtener el post existente\r\n    const postExist = await executeQuery(queries.getPost, { id });\r\n    if (postExist.recordset.length === 0) {\r\n      return res.status(400).json({ message: `No existe el post con id: ${id}` });\r\n    }\r\n\r\n    let params = {\r\n      id,\r\n      userId,\r\n      tittle: tittle || postExist.recordset[0].tittle,\r\n      textDescrip: textDescrip || postExist.recordset[0].textDescrip,\r\n      picture: postExist.recordset[0].picture, // Mantener el nombre de la imagen existente si no se envía una nueva\r\n    };\r\n\r\n    // Verificar si se envió una nueva imagen\r\n    if (req.files && req.files.picture) {\r\n      const uploadedPicture = req.files.picture;\r\n      const fileName = uploadedPicture.name;\r\n      const uploadPath = path.join(__dirname, \"../photos\", fileName);\r\n\r\n      // Guardar el archivo en el servidor\r\n      await uploadedPicture.mv(uploadPath);\r\n\r\n      // Actualizar el nombre de la imagen en los parámetros\r\n      params.picture = fileName;\r\n      pictureName = fileName;\r\n\r\n      // Eliminar la imagen antigua si existe una nueva\r\n      const currentPicture = postExist.recordset[0].picture;\r\n      if (currentPicture && currentPicture !== pictureName) {\r\n        const filePath = path.join(__dirname, \"../photos\", currentPicture);\r\n        if (fs.existsSync(filePath)) {\r\n          fs.unlinkSync(filePath);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Actualizar el post en la base de datos\r\n    await executeQuery(queries.updatePost, params);\r\n\r\n    res.status(201).json({ message: \"Post actualizado exitosamente\" });\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    res.status(500).send(\"Error en el servidor al intentar actualizar el post\");\r\n    if (pictureName) {\r\n      const filePath = path.join(__dirname, \"../photos\", pictureName);\r\n      if (fs.existsSync(filePath)) {\r\n        fs.unlinkSync(filePath);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n\r\nexport const deltePost = async (req, res) => {\r\n  console.log(req.body);\r\n\r\n  const errors = validationResult(req);\r\n  if (!errors.isEmpty()) {\r\n    return res.status(400).json({ errors: errors.array() });\r\n  }\r\n\r\n  const { id } = req.body;\r\n\r\n  try {\r\n    const token = req.headers.authorization.split(\" \")[1];\r\n    const decoded = jwt.verify(token, process.env.TOKEN);\r\n    const userId = decoded.userId;\r\n\r\n    const params = {\r\n      id,\r\n      userId,\r\n    };\r\n    const postExist = await executeQuery(queries.getPost, { id });\r\n    if (postExist.recordset.length === 0) {\r\n      return res\r\n        .status(400)\r\n        .json({ message: `No existe el post con id: ${id}` });\r\n    }\r\n\r\n    await executeQuery(queries.deletePost, params);\r\n\r\n    res.status(201).json({ message: \"Post eliminado exitosamente\" });\r\n  } catch (err) {}\r\n};\r\n\r\nexport const getPosts = async (req, res) => {\r\n  try {\r\n    const result = await executeQuery(queries.getPosts);\r\n    res.status(200).json(result.recordset);\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    res.status(500).send(\"Error en el servidor al intentar crear el post\");\r\n  }\r\n};\r\n\r\nexport const getUserPosts = async (req, res) => {\r\n  try {\r\n    const token = req.headers.authorization.split(\" \")[1];\r\n    const decoded = jwt.verify(token, process.env.TOKEN);\r\n    const userId = decoded.userId;\r\n    console.log(userId);\r\n    const result = await executeQuery(queries.getUserPosts, { idUser: userId });\r\n    res.status(200).json(result.recordset);\r\n\r\n\r\n  } catch (err) {\r\n    console.error(err.message);\r\n    res.status(500).send(\"Error en el servidor al intentar buscar los posts\");\r\n  }\r\n}"],"mappings":"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","ignoreList":[]}},"mtime":1718730044107}}